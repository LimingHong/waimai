<?php
 goto caD_3; rKc0H: class VirtualModel { public function getSet() { return globalSetting("\x76\x69\x72\x74\x75\141\154"); } public function updateGoodsStock($id = 0) { goto jtnEH; A73aN: return; goto v7ggM; D4uKq: $goods = pdo_fetch("\x73\145\x6c\x65\143\x74\40\166\151\162\x74\x75\x61\x6c\40\x66\162\157\x6d\x20" . tablename("\155\x69\x68\165\x61\137\x6d\141\154\154\x5f\x67\157\x6f\x64\x73") . "\x20\167\150\x65\x72\145\x20\x69\x64\75\x3a\151\144\x20\x61\156\x64\40\x74\171\x70\145\x3d\63\40\x61\156\x64\40\x75\156\151\x61\x63\x69\144\x3d\x3a\165\x6e\151\141\143\x69\x64\x20\154\x69\x6d\x69\164\40\61", array("\72\x69\144" => $id, "\x3a\x75\156\151\141\143\151\144" => $_W["\x75\156\151\x61\143\x69\x64"])); goto U42W2; r8X2V: shwCN: goto vz8bj; IvTYm: $virtuals = array(); goto qSVqv; lMOIJ: xTRDW: goto RChIc; V6Hh6: $stock = 0; goto t4Q1X; rwmGf: goto xTRDW; goto r8X2V; qSVqv: $alloptions = pdo_fetchall("\x73\x65\154\145\143\x74\40\151\x64\54\40\166\151\162\164\165\x61\154\x20\x66\x72\x6f\155\x20" . tablename("\155\151\x68\x75\141\137\155\141\154\154\x5f\147\157\157\144\163\137\x6f\x70\164\151\157\x6e") . "\40\x77\x68\145\x72\145\40\x67\x6f\157\144\163\x69\144\x3d{$id}"); goto dSCFL; jtnEH: global $_W, $_GPC; goto D4uKq; vz8bj: $stock = pdo_fetchcolumn("\163\145\x6c\145\x63\164\x20\x63\x6f\x75\156\164\x28\52\x29\x20\x66\x72\157\155\40" . tablename("\155\x69\150\x75\141\137\x6d\x61\154\154\x5f\x76\x69\x72\x74\165\x61\x6c\x5f\x64\x61\164\x61") . "\x20\167\x68\x65\x72\x65\x20\164\x79\x70\x65\151\144\x3d\x3a\164\x79\160\145\x69\144\40\x61\156\x64\40\165\156\x69\x61\x63\151\144\x3d\x3a\165\156\151\141\x63\151\x64\x20\141\156\144\40\x6f\x70\145\156\x69\x64\x3d\x27\47\x20\154\x69\x6d\x69\164\40\x31", array("\72\x74\171\x70\145\151\x64" => $goods["\x76\151\162\164\165\141\x6c"], "\72\165\156\x69\x61\143\151\x64" => $_W["\x75\x6e\x69\141\x63\x69\144"])); goto lMOIJ; RChIc: pdo_update("\x6d\151\150\x75\x61\x5f\x6d\x61\154\x6c\137\x67\157\x6f\144\x73", array("\x74\157\x74\141\x6c" => $stock), array("\151\144" => $id)); goto jndZ5; t4Q1X: if (!empty($goods["\166\x69\x72\x74\x75\141\x6c"])) { goto shwCN; } goto IvTYm; wESin: xdfMh: goto rwmGf; v7ggM: dj7we: goto V6Hh6; U42W2: if (!empty($goods)) { goto dj7we; } goto A73aN; dSCFL: foreach ($alloptions as $opt) { goto JIlLz; Pkb0c: $stock += $c; goto f58EL; JIlLz: if (!empty($opt["\166\151\162\164\x75\141\x6c"])) { goto ZK1Hp; } goto e9eLt; I4nhW: ZK1Hp: goto FgxYy; J5bNr: if (in_array($opt["\166\x69\x72\x74\x75\x61\154"], $virtuals)) { goto BFAVf; } goto zX2WO; zX2WO: $virtuals[] = $opt["\x76\x69\x72\x74\x75\x61\x6c"]; goto Pkb0c; e9eLt: goto TMEkE; goto I4nhW; cJ0oJ: TMEkE: goto WLQpp; f58EL: BFAVf: goto cJ0oJ; FgxYy: $c = pdo_fetchcolumn("\163\145\x6c\x65\x63\164\40\x63\157\165\156\164\50\52\51\x20\146\162\x6f\155\40" . tablename("\x6d\151\x68\165\141\137\155\x61\154\154\x5f\x76\x69\162\x74\165\141\x6c\137\x64\x61\164\x61") . "\x20\167\x68\145\x72\x65\x20\x74\171\x70\x65\x69\144\x3d\72\x74\x79\x70\145\x69\144\x20\x61\156\x64\40\x75\156\151\x61\143\151\x64\x3d\x3a\x75\x6e\x69\x61\143\151\x64\x20\x61\x6e\144\x20\x6f\x70\x65\x6e\151\144\75\x27\x27\40\x6c\151\155\151\x74\x20\x31", array("\x3a\x74\171\160\145\151\144" => $opt["\166\151\162\164\165\x61\154"], "\72\165\156\151\x61\143\151\x64" => $_W["\x75\156\151\x61\143\x69\144"])); goto b1k3K; b1k3K: pdo_update("\155\x69\x68\x75\141\x5f\x6d\x61\154\x6c\137\x67\x6f\x6f\144\163\x5f\x6f\x70\x74\151\x6f\x6e", array("\x73\164\157\x63\x6b" => $c), array("\x69\x64" => $opt["\x69\144"])); goto J5bNr; WLQpp: } goto wESin; jndZ5: } public function updateStock($typeid = 0) { goto Iicwk; mHCNu: foreach ($goodsids as $gid) { $this->updateGoodsStock($gid); PEwrA: } goto j_mGq; Kt3nn: wQDWs: goto mHCNu; Iicwk: global $_W; goto u1p0_; CRuGN: MyJwG: goto coqCX; j_mGq: fWIrb: goto fGxar; ttBGF: foreach ($alloptions as $opt) { goto Bvt8t; Bvt8t: if (in_array($opt["\147\157\x6f\144\x73\151\144"], $goodsids)) { goto F0kBG; } goto g1MDJ; ARGAe: Hinog: goto MnlUg; bvAdr: F0kBG: goto ARGAe; g1MDJ: $goodsids[] = $opt["\147\157\157\x64\x73\x69\144"]; goto bvAdr; MnlUg: } goto Kt3nn; u1p0_: $goodsids = array(); goto rwDMZ; rwDMZ: $goods = pdo_fetchall("\x73\x65\154\x65\143\164\x20\x69\144\40\x66\162\x6f\x6d\x20" . tablename("\155\151\150\x75\141\137\x6d\x61\154\154\x5f\x67\157\x6f\144\163") . "\40\167\150\145\162\145\x20\x74\x79\x70\x65\x3d\x33\x20\x61\156\144\x20\x76\151\x72\x74\165\x61\x6c\75\72\x76\x69\162\x74\x75\x61\x6c\x20\141\x6e\144\x20\x75\x6e\x69\x61\x63\x69\x64\x3d\x3a\165\156\151\x61\143\151\x64\40\x6c\151\155\x69\164\x20\61", array("\x3a\166\x69\x72\164\x75\x61\x6c" => $typeid, "\x3a\165\156\151\x61\x63\151\144" => $_W["\x75\156\151\141\x63\x69\x64"])); goto VdAF0; coqCX: $alloptions = pdo_fetchall("\163\x65\154\x65\x63\x74\x20\x69\144\54\x20\x67\x6f\157\144\163\151\x64\40\146\162\x6f\x6d\40" . tablename("\x6d\151\150\165\x61\x5f\155\141\x6c\154\x5f\147\157\157\x64\163\137\157\x70\x74\x69\x6f\156") . "\40\x77\150\x65\162\x65\40\166\151\162\164\165\x61\x6c\x3d\x3a\x76\x69\x72\x74\165\x61\154\x20\141\x6e\x64\x20\165\x6e\x69\x61\x63\x69\x64\75\x3a\x75\x6e\151\x61\143\151\144", array("\x3a\165\x6e\x69\141\x63\x69\144" => $_W["\165\x6e\151\141\143\151\x64"], "\x3a\x76\x69\x72\164\x75\x61\154" => $typeid)); goto ttBGF; VdAF0: foreach ($goods as $g) { $goodsids[] = $g["\151\144"]; IEfSS: } goto CRuGN; fGxar: } public function pay($order) { goto fy00o; CqwwP: $g = pdo_fetch("\163\145\154\x65\x63\164\40\151\144\54\x63\162\x65\x64\x69\x74\54\163\x61\x6c\x65\x73\x2c\x76\151\x72\164\x75\x61\x6c\x20\x66\162\x6f\155\x20" . tablename("\155\x69\150\x75\141\x5f\155\x61\154\x6c\x5f\x67\157\x6f\x64\163") . "\40\x77\x68\x65\x72\145\x20\40\151\144\x3d\x3a\151\144\x20\141\156\x64\x20\x75\156\x69\141\143\x69\144\75\72\165\156\151\x61\143\x69\144\x20\154\151\155\151\x74\40\x31", array("\x3a\x75\156\x69\x61\x63\x69\144" => $_W["\x75\156\x69\x61\x63\x69\144"], "\72\x69\x64" => $goods["\x67\x6f\157\144\163\x69\x64"])); goto kGqWQ; kGqWQ: $virtual_data = pdo_fetchall("\123\x45\114\105\x43\124\x20\151\x64\54\164\171\x70\145\151\144\54\146\151\145\x6c\x64\163\x20\106\122\117\115\40" . tablename("\x6d\151\150\x75\x61\x5f\x6d\x61\154\x6c\x5f\x76\x69\162\164\165\x61\x6c\137\x64\141\x74\141") . "\x20\127\110\x45\x52\x45\x20\164\171\x70\x65\151\x64\x3d\72\x74\171\160\x65\151\x64\x20\xa\40\x20\x20\x20\40\x20\x20\40\x20\x20\40\40\x20\x61\156\144\x20\165\x6e\151\x61\143\151\x64\75\x3a\165\x6e\x69\x61\x63\x69\x64\40\x20\141\x6e\x64\x20\40\157\x72\x64\145\x72\x69\x64\x3d\60\40\157\162\144\x65\x72\x20\142\171\x20\x69\144\40\144\145\163\x63\40\154\151\x6d\x69\164\40" . $goods["\164\157\164\141\x6c"], array("\x3a\164\x79\x70\x65\x69\x64" => $g["\x76\x69\x72\164\x75\x61\x6c"], "\72\x75\x6e\x69\x61\x63\151\x64" => $_W["\165\x6e\151\x61\x63\151\x64"])); goto RuhPz; Sv_rS: return "\62"; goto FhpD7; ehIqV: $virtual_str = implode("\134\x6e", $virtual_str); goto zwYwY; RuhPz: $type = pdo_fetch("\163\x65\x6c\145\143\x74\40\x66\x69\145\x6c\144\163\x20\x66\x72\x6f\x6d\40" . tablename("\155\151\x68\165\x61\x5f\155\x61\x6c\x6c\x5f\x76\151\x72\164\165\x61\154\137\x74\171\x70\145") . "\x20\x77\150\145\162\x65\40\x69\x64\75\72\151\x64\40\x61\x6e\144\40\165\x6e\151\x61\x63\151\144\75\x3a\165\156\151\141\x63\151\144\40\154\151\155\151\164\x20\61\x20", array("\72\151\144" => $g["\x76\x69\x72\x74\x75\x61\154"], "\72\165\156\x69\141\x63\x69\x64" => $_W["\x75\156\x69\141\143\151\x64"])); goto ZaNgg; ZaNgg: $fields = iunserializer($type["\x66\x69\x65\154\x64\x73"], true); goto w9dtC; MuP_l: $util = new Util(); goto ATHFt; fy00o: global $_W, $_GPC; goto JFhFK; w9dtC: $virtual_info = array(); goto lfQAH; lfQAH: $virtual_str = array(); goto MuP_l; ATHFt: foreach ($virtual_data as $vd) { goto UN6ij; UN6ij: $virtual_info[] = $vd["\146\x69\x65\x6c\x64\x73"]; goto AuqnU; GS2oR: $virtual_str[] = implode("\x20", $strs); goto FpOVq; v9AGD: $vddatas = iunserializer($vd["\x66\x69\145\x6c\x64\x73"]); goto Icfu3; zmQw2: j473D: goto GS2oR; iNIwj: VDQ_j: goto vT7UJ; FpOVq: pdo_update("\x6d\x69\150\165\141\137\x6d\x61\x6c\154\x5f\x76\x69\x72\164\x75\141\x6c\137\x64\x61\x74\x61", array("\157\x70\145\x6e\x69\x64" => $order["\x66\162\x6f\155\x5f\x75\x73\x65\162"], "\157\162\x64\145\x72\151\144" => $order["\x69\x64"], "\157\162\x64\145\162\163\156" => $order["\x6f\162\144\x65\162\x73\156"], "\x70\x72\151\x63\145" => round($goods["\x70\x72\x69\x63\x65"] / $goods["\x74\x6f\x74\x61\x6c"], 2), "\165\x73\x65\x74\151\155\x65" => time()), array("\x69\144" => $vd["\x69\x64"])); goto KAVTp; Icfu3: foreach ($vddatas as $vk => $vv) { $strs[] = $fields[$vk] . "\72\40" . $vv; wkgfq: } goto zmQw2; KAVTp: pdo_update("\155\x69\150\x75\x61\x5f\x6d\x61\154\x6c\137\x76\x69\162\164\165\x61\154\x5f\164\x79\x70\145", "\165\x73\x65\x64\x61\x74\x61\x3d\165\163\x65\x64\141\x74\141\x2b\x31", array("\x69\144" => $vd["\x74\171\x70\145\x69\x64"])); goto iNIwj; AuqnU: $strs = array(); goto v9AGD; vT7UJ: } goto EWSLd; zwYwY: $time = time(); goto X_q3p; EWSLd: uHh_U: goto ehIqV; JFhFK: $goods = pdo_fetch("\163\x65\154\145\x63\x74\40\x69\x64\54\x67\157\x6f\x64\163\151\x64\54\x74\x6f\x74\141\154\54\x70\x72\x69\143\145\40\146\x72\157\155\x20" . tablename("\x6d\x69\150\165\141\x5f\x6d\x61\154\x6c\137\157\162\x64\x65\x72\x5f\147\157\157\x64\163") . "\40\x77\150\145\x72\x65\x20\40\157\x72\x64\x65\162\x69\x64\75\72\x6f\162\x64\x65\x72\x69\144\x20\141\156\x64\x20\x75\x6e\x69\141\143\x69\x64\75\72\x75\x6e\x69\141\143\x69\144\x20\154\151\x6d\x69\164\x20\x31", array("\72\x75\x6e\151\x61\x63\x69\x64" => $_W["\x75\x6e\x69\141\143\151\144"], "\x3a\x6f\x72\144\x65\x72\x69\144" => $order["\151\144"])); goto CqwwP; X_q3p: pdo_update("\x6d\x69\150\165\141\137\x6d\x61\x6c\x6c\137\x6f\162\144\x65\162", array("\166\x69\162\x74\165\x61\x6c\137\x69\x6e\x66\157" => $util->array2string($virtual_info), "\166\151\x72\164\165\141\154\137\163\164\x72" => $virtual_str, "\x73\x74\141\164\165\x73" => "\x32", "\160\141\171\164\x69\x6d\145" => $time, "\163\145\156\x64\164\x69\155\x65" => $time, "\x66\x69\x6e\151\x73\150\x74\x69\x6d\145" => $time), array("\x69\x64" => $order["\151\x64"])); goto Sv_rS; FhpD7: } public function perms() { return array("\166\151\162\x74\x75\141\154" => array("\164\145\170\x74" => $this->getName(), "\151\163\x70\x6c\165\147\151\156" => true, "\x63\x68\x69\x6c\144" => array("\x74\x65\155\160" => array("\164\x65\x78\164" => "\346\xa8\xa1\xe6\235\xbf", "\x76\151\145\167" => "\346\265\217\xe8\xa7\x88", "\141\x64\144" => "\xe6\267\xbb\345\x8a\240\55\x6c\157\147", "\x65\144\x69\x74" => "\344\277\256\346\x94\xb9\55\154\x6f\147", "\144\145\x6c\x65\164\145" => "\345\x88\xa0\351\x99\244\55\154\x6f\147"), "\x64\141\164\141" => array("\164\x65\170\x74" => "\346\225\260\xe6\x8d\xae", "\166\x69\x65\167" => "\xe6\265\x8f\xe8\247\x88", "\x61\144\144" => "\xe6\xb7\273\345\212\xa0\55\154\x6f\x67", "\x65\x64\x69\x74" => "\344\xbf\xae\xe6\x94\xb9\x2d\x6c\x6f\147", "\x64\145\154\x65\x74\x65" => "\xe5\210\240\xe9\x99\244\55\x6c\x6f\x67", "\x69\155\160\x6f\162\164" => "\xe5\257\274\345\x85\xa5\55\154\x6f\147", "\145\x78\160\x6f\162\x74" => "\345\xaf\xbc\xe5\207\xba\xe5\267\xb2\xe4\275\xbf\347\224\250\346\225\xb0\346\215\xae\x2d\x6c\157\x67"), "\143\x61\x74\x65\147\x6f\x72\171" => array("\x74\x65\170\164" => "\345\210\x86\xe7\261\xbb", "\x76\x69\x65\167" => "\xe6\xb5\x8f\xe8\247\x88", "\141\x64\x64" => "\346\267\273\345\212\240\x2d\x6c\157\147", "\x65\x64\x69\164" => "\344\xbf\256\xe6\x94\xb9\55\154\x6f\147", "\x64\145\x6c\145\x74\x65" => "\345\210\xa0\xe9\231\244\x2d\154\157\x67")))); } } goto cQ7gE; caD_3: if (defined("\x49\116\x5f\111\x41")) { goto nEiKf; } goto kKQl2; kKQl2: exit("\101\143\143\x65\x73\163\40\x44\145\156\151\145\144"); goto GF9TH; GF9TH: nEiKf: goto wy9zH; wy9zH: if (class_exists("\x56\x69\x72\x74\x75\141\154\x4d\157\x64\x65\x6c")) { goto FerOp; } goto rKc0H; cQ7gE: FerOp: