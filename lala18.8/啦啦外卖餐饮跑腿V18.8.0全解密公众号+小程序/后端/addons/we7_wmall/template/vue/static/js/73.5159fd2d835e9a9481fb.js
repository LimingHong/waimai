webpackJsonp([73],{VZ3d:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("Dd8w"),n=o.n(a),s=o("Cz8s"),i=o("mzkE"),r=o("kEnp"),u=o("NYxO"),d=o("5ryX"),l={data:function(){return{showPreLoading:!0,is_grant:0,title:"",active:1,diydata:{diy:{data:{}}},gconfig:{mall:{}},store:{},menufooter:{},menu:{css:{},params:{},data:{},position:{left:"inherit",bottom:"80px",right:"15px"}},storeCouponTop:100,storeOnsaleTop:200,storeEvaluateTop:300}},components:{PublicHeader:s.a,PublicFooter:i.a,diy:r.a,navigator:d.a},methods:n()({},Object(u.b)(["setLocation","getLocation"]),{onLoad:function(){var t=this;this.util.request({url:"wmall/store/home/index",data:{sid:this.sid||3,gconfig:1,menufooter:1}}).then(function(e){t.showPreLoading=!1,t.gconfig=window.gconfig;var o=e.data.message;o.errno?t.$toast(o.message):(t.diydata.diy.data=o.message.homepage,t.title=t.diydata.diy.data.page.title||"门店首页",t.util.setWXTitle(t.title),t.menufooter=window.menufooter,t.store=o.message.store,t.store.menu&&t.store.menu.data&&(t.menu=t.util.extend(t.menu,t.store.menu.data)),t.onCalculateStoreNavHeight())})},onChangeTab:function(t){},getCoupon:function(){var t=this;this.util.request({url:"wmall/channel/coupon/get",data:{sid:this.sid}}).then(function(e){var o=e.data.message;0==o.errno?(t.util.$toast(o.message,"",1e3),t.is_grant=1):t.util.$toast("领取失败","",1e3)})},onCalculateStoreNavHeight:function(){this.storeCouponTop=document.getElementsByClassName("diy-store-coupon")[0].offsetTop,this.storeOnsaleTop=document.getElementsByClassName("diy-store-onsale")[0].offsetTop,this.storeEvaluateTop=document.getElementsByClassName("diy-store-evaluate")[0].offsetTop,console.log(this.storeCouponTop)}}),created:function(){this.query=this.$route.query,this.query&&(this.sid=this.query.sid)},mounted:function(){this.onLoad()}},c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"store-home"}},[o("public-header",{attrs:{title:t.title}}),t._v(" "),t.gconfig&&2==t.gconfig.mall.version?o("public-footer",{attrs:{preLoading:t.showPreLoading,menufooter:t.menufooter}}):t._e(),t._v(" "),o("div",{staticClass:"content"},[o("diy",{attrs:{diydata:t.diydata,active:t.active,is_grant:t.is_grant,preLoading:t.showPreLoading},on:{onChangeTab:t.onChangeTab,getCoupon:t.getCoupon}})],1),t._v(" "),t.store.menu&&t.store.menu.path&&1==t.store.menu.path.home?[o("navigator",{attrs:{menu:t.menu}})]:t._e()],2)},staticRenderFns:[]};var g=o("VU/8")(l,c,!1,function(t){o("iCfE")},null,null);e.default=g.exports},iCfE:function(t,e){}});