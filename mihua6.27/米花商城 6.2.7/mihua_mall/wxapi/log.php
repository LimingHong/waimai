<?php
 goto Qy4MD; elzg3: class CLogFileHandler implements ILogHandler { private $handle = null; public function __construct($file = '') { $this->handle = fopen($file, "\141"); } public function write($msg) { fwrite($this->handle, $msg, 4096); } public function __destruct() { fclose($this->handle); } } goto Rj9Ez; Qy4MD: interface ILogHandler { public function write($msg); } goto elzg3; Rj9Ez: class Log { private $handler = null; private $level = 15; private static $instance = null; private function __construct() { } private function __clone() { } public static function Init($handler = null, $level = 15) { goto q3IO1; Luz7m: self::$instance = new self(); goto h7c6w; h7c6w: self::$instance->__setHandle($handler); goto QztXm; JcYFK: GfAK6: goto OfUHZ; QztXm: self::$instance->__setLevel($level); goto JcYFK; q3IO1: if (self::$instance instanceof self) { goto GfAK6; } goto Luz7m; OfUHZ: return self::$instance; goto P2oYU; P2oYU: } private function __setHandle($handler) { $this->handler = $handler; } private function __setLevel($level) { $this->level = $level; } public static function DEBUG($msg) { self::$instance->write(1, $msg); } public static function WARN($msg) { self::$instance->write(4, $msg); } public static function ERROR($msg) { goto dQWP4; dtkaj: self::$instance->write(8, $stack . $msg); goto uZ2ma; dQWP4: $debugInfo = debug_backtrace(); goto SHslA; jd79S: foreach ($debugInfo as $key => $val) { goto dZM0a; rzQqH: S2j2d: goto HK8nK; dZM0a: if (!array_key_exists("\x66\151\154\x65", $val)) { goto Kr2VY; } goto huh0d; E1bAp: if (!array_key_exists("\146\x75\x6e\143\164\x69\157\x6e", $val)) { goto S2j2d; } goto uZQAM; dxcIv: Kr2VY: goto dIuLi; dIuLi: if (!array_key_exists("\154\151\156\x65", $val)) { goto yX5vn; } goto lwfX4; HK8nK: qEhYs: goto CS9Am; uZQAM: $stack .= "\x2c\x66\x75\x6e\143\x74\x69\157\x6e\x3a" . $val["\x66\x75\156\143\164\x69\x6f\x6e"]; goto rzQqH; F05aq: yX5vn: goto E1bAp; huh0d: $stack .= "\x2c\x66\x69\154\145\x3a" . $val["\x66\x69\x6c\145"]; goto dxcIv; lwfX4: $stack .= "\54\x6c\x69\156\x65\72" . $val["\x6c\x69\x6e\145"]; goto F05aq; CS9Am: } goto SxP3l; SxP3l: CLXe2: goto jbqCT; SHslA: $stack = "\x5b"; goto jd79S; jbqCT: $stack .= "\135"; goto dtkaj; uZ2ma: } public static function INFO($msg) { self::$instance->write(2, $msg); } private function getLevelStr($level) { goto Mhlm3; Mhlm3: switch ($level) { case 1: return "\144\145\x62\165\147"; goto mOImc; case 2: return "\x69\x6e\x66\157"; goto mOImc; case 4: return "\x77\141\162\x6e"; goto mOImc; case 8: return "\145\162\x72\x6f\162"; goto mOImc; default: } goto Zk1oj; yvj8Z: mOImc: goto Dpq1L; Zk1oj: ONM0i: goto yvj8Z; Dpq1L: } protected function write($level, $msg) { goto g5wST; tIShl: iezmB: goto Sx7T3; nci7G: $msg = "\x5b" . date("\131\x2d\155\x2d\144\x20\x48\72\151\72\x73") . "\135\133" . $this->getLevelStr($level) . "\135\x20" . $msg . "\xa"; goto T2nWj; T2nWj: $this->handler->write($msg); goto tIShl; g5wST: if (!(($level & $this->level) == $level)) { goto iezmB; } goto nci7G; Sx7T3: } }