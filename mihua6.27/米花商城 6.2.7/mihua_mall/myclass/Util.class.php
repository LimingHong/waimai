<?php
 class Util { static function getModuleConfig() { $modulelist = uni_modules(false); return $modulelist["\x6d\151\x68\165\x61\x5f\155\x61\154\154"]["\x63\x6f\156\x66\x69\x67"]; } static function register_jssdk($debug = false) { goto Np6SQ; ziXBP: if (empty($_W["\x61\143\x69\x64"])) { goto Woliw; } goto NTdxK; QFtf4: echo ''; goto wc7II; Np6SQ: global $_W; goto x6Ia3; fOaIR: $sysinfo["\x4d\x4f\x44\125\x4c\105\x5f\125\x52\x4c"] = MODULE_URL; goto vQbXO; MsnRM: echo $script; goto IiF3S; x6Ia3: if (!defined("\x48\x45\101\104\x45\x52")) { goto SFAmb; } goto QFtf4; D42jj: if (!defined("\x4d\117\104\x55\x4c\x45\137\125\x52\114")) { goto ZQLem; } goto fOaIR; t0IrE: $sysinfo = array("\x75\156\x69\x61\143\x69\144" => $_W["\x75\156\x69\x61\x63\151\144"], "\141\143\x69\x64" => $_W["\x61\x63\x69\144"], "\x73\151\x74\145\x72\x6f\x6f\164" => $_W["\163\151\x74\145\x72\x6f\x6f\164"], "\x73\x69\164\x65\x75\x72\154" => $_W["\x73\x69\164\145\165\162\x6c"], "\141\164\x74\141\x63\x68\165\x72\x6c" => $_W["\x61\x74\x74\x61\x63\x68\165\x72\x6c"], "\x63\157\157\153\x69\x65" => array("\160\x72\x65" => $_W["\x63\157\x6e\x66\151\x67"]["\x63\157\157\x6b\151\x65"]["\160\162\145"])); goto ziXBP; wc7II: return; goto y96if; wqDk7: ZxrL9: goto D42jj; NTdxK: $sysinfo["\x61\x63\x69\x64"] = $_W["\x61\x63\x69\144"]; goto z3AON; vQbXO: ZQLem: goto HUGsq; gL2nt: $jssdkconfig = json_encode($_W["\x61\143\x63\157\x75\156\x74"]["\152\163\163\x64\153\143\x6f\156\x66\x69\x67"]); goto xTmdG; HUGsq: $sysinfo = json_encode($sysinfo); goto gL2nt; C3WAh: if (empty($_W["\157\x70\145\x6e\151\x64"])) { goto ZxrL9; } goto cuziJ; iGnFa: $script = <<<EOF
\t<script src="https://res.wx.qq.com/open/js/jweixin-1.1.0.js"></script>
\t<script type="text/javascript">
\t\twindow.sysinfo = window.sysinfo || {$sysinfo} || {};
\t\t
\t\t// jssdk config 对象
\t\tjssdkconfig = {$jssdkconfig} || {};
\t\t
\t\t// 是否启用调试
\t\tjssdkconfig.debug = {$debug};
\t\t
\t\tjssdkconfig.jsApiList = [
\t\t\t'checkJsApi',
\t\t\t'onMenuShareTimeline',
\t\t\t'onMenuShareAppMessage',
\t\t\t'onMenuShareQQ',
\t\t\t'onMenuShareWeibo',
\t\t\t'hideMenuItems',
\t\t\t'showMenuItems',
\t\t\t'hideAllNonBaseMenuItem',
\t\t\t'showAllNonBaseMenuItem',
\t\t\t'translateVoice',
\t\t\t'startRecord',
\t\t\t'stopRecord',
\t\t\t'onRecordEnd',
\t\t\t'playVoice',
\t\t\t'pauseVoice',
\t\t\t'stopVoice',
\t\t\t'uploadVoice',
\t\t\t'downloadVoice',
\t\t\t'chooseImage',
\t\t\t'previewImage',
\t\t\t'uploadImage',
\t\t\t'downloadImage',
\t\t\t'getNetworkType',
\t\t\t'openLocation',
\t\t\t'getLocation',
\t\t\t'hideOptionMenu',
\t\t\t'showOptionMenu',
\t\t\t'closeWindow',
\t\t\t'scanQRCode',
\t\t\t'chooseWXPay',
\t\t\t'openProductSpecificView',
\t\t\t'addCard',
\t\t\t'chooseCard',
\t\t\t'openCard',
\t\t\t'openAddress'
\t\t];
\t\t
\t\twx.config(jssdkconfig);
\t\t
\t</script>
EOF;
goto MsnRM; y96if: SFAmb: goto t0IrE; z3AON: Woliw: goto C3WAh; xTmdG: $debug = $debug ? "\x74\x72\165\x65" : "\x66\x61\154\163\145"; goto iGnFa; cuziJ: $sysinfo["\157\160\x65\x6e\x69\144"] = $_W["\157\x70\145\156\151\x64"]; goto wqDk7; IiF3S: } static function uploadImageInWeixin($resp) { goto rJJ_w; Srb4t: switch ($resp["\x68\145\141\x64\145\162\x73"]["\x43\x6f\156\164\x65\156\164\x2d\124\171\160\x65"]) { case "\141\160\160\x6c\151\x63\141\164\x69\x6f\x6e\x2f\x78\55\152\160\x67": case "\151\155\141\147\x65\x2f\152\x70\145\147": $ext = "\152\x70\x67"; goto U8p9k; case "\x69\155\x61\147\145\57\x70\x6e\147": $ext = "\160\156\147"; goto U8p9k; case "\x69\x6d\x61\x67\145\x2f\147\x69\146": $ext = "\x67\x69\x66"; goto U8p9k; default: goto K3tVH; K3tVH: $result["\x6d\x65\163\x73\141\147\145"] = "\xe6\x8f\x90\345\x8f\226\350\265\204\346\xba\x90\345\244\xb1\xe8\264\245\54\x20\350\265\204\346\272\220\xe6\226\x87\xe4\xbb\xb6\xe7\261\273\345\236\x8b\xe9\224\231\xe8\xaf\xaf\56"; goto Rd52t; Kkry4: goto U8p9k; goto dVj8y; Rd52t: return json_encode($result); goto Kkry4; dVj8y: } goto JK9Zo; XL_Qj: $pathname = $setting["\x66\x6f\154\144\x65\x72"] . $filename; goto rp35q; y_wvS: J7tVF: goto pBEPC; rp35q: $fullname = ATTACHMENT_ROOT . "\x2f" . $pathname; goto lrWUb; JK9Zo: jkfK7: goto FwVji; zQaHS: if (!(intval($resp["\x68\x65\141\144\x65\x72\x73"]["\103\157\x6e\x74\x65\156\164\x2d\114\x65\x6e\147\x74\x68"]) > $setting["\154\151\155\151\164"] * 1024)) { goto J7tVF; } goto Xi89s; FwVji: U8p9k: goto zQaHS; jcfkQ: return json_encode($result); goto nWR5v; pBEPC: $originname = pathinfo($url, PATHINFO_BASENAME); goto f7OoR; yUH5J: m4dP8: goto htaEH; X3QgD: $setting = $_W["\x73\145\x74\164\x69\x6e\x67"]["\x75\x70\x6c\x6f\141\x64"]["\x69\x6d\x61\147\x65"]; goto AmIZ_; Xi89s: $result["\155\145\163\163\141\x67\x65"] = "\344\270\212\xe4\xbc\xa0\347\x9a\x84\345\xaa\222\344\275\x93\346\x96\x87\xe4\xbb\xb6\350\xbf\207\xe5\xa4\xa7\50" . sizecount($size) . "\x20\76\40" . sizecount($setting["\x6c\x69\155\151\164"] * 1024); goto UnDLu; GC2Ra: return json_encode($result); goto Rl5OO; iGhlR: load()->func("\x66\151\154\145"); goto Te3Xn; qsds5: $ext = ''; goto Srb4t; Rl5OO: BrGcW: goto qsds5; YmMDD: $info = array("\156\x61\155\x65" => $originname, "\x65\x78\164" => $ext, "\146\151\154\145\156\141\x6d\x65" => $pathname, "\141\164\x74\141\143\x68\155\x65\156\164" => $pathname, "\165\162\x6c" => tomedia($pathname), "\146\151\154\x65\163\x69\x7a\x65" => filesize($fullname)); goto YeZXs; UnDLu: return json_encode($result); goto y_wvS; lrWUb: if (!(file_put_contents($fullname, $resp["\x63\157\156\x74\145\x6e\164"]) == false)) { goto Hue9M; } goto W0ted; AmIZ_: $setting["\x66\157\x6c\144\145\162"] = "\151\x6d\x61\x67\x65\x73\x2f{$_W["\x75\x6e\151\x61\x63\x69\144"]}" . "\57" . date("\131\57\155\57"); goto iGhlR; nWR5v: Hue9M: goto YmMDD; rJJ_w: global $_W; goto X3QgD; WQPAM: $result["\155\145\x73\163\x61\147\x65"] = "\346\x8f\220\345\217\226\346\x96\207\xe4\273\266\xe5\xa4\xb1\xe8\264\245\x3a\x20\xe6\234\252\346\211\276\345\x88\xb0\xe8\257\xa5\xe8\xb5\x84\xe6\xba\220\xe6\x96\207\344\xbb\xb6\x2e"; goto GC2Ra; GLiVi: return json_encode($result); goto yUH5J; G9UWb: $result["\x6d\145\163\163\x61\147\145"] = "\xe6\x8f\220\345\x8f\226\xe6\x96\x87\xe4\xbb\xb6\345\244\xb1\350\264\xa5\x2c\40\xe9\224\x99\xe8\257\257\344\277\xa1\xe6\x81\xaf\x3a\40" . $resp["\155\145\x73\x73\141\x67\145"]; goto GLiVi; htaEH: if (!(intval($resp["\143\157\x64\145"]) != 200)) { goto BrGcW; } goto WQPAM; f7OoR: $filename = file_random_name(ATTACHMENT_ROOT . "\57" . $setting["\146\157\x6c\x64\145\x72"], $ext); goto XL_Qj; YeZXs: return json_encode($info); goto RytNn; Te3Xn: if (!is_error($resp)) { goto m4dP8; } goto G9UWb; W0ted: $result["\155\x65\x73\163\x61\x67\145"] = "\346\217\x90\345\217\226\345\xa4\261\350\264\xa5\56"; goto jcfkQ; RytNn: } static function formatTime($time) { goto w6JRw; w5itq: if (!($difftime < 3600 * 24 * 2)) { goto aAQqY; } goto DqmEZ; YRlGa: hM8to: goto XPewT; nQqyS: return intval($difftime / 60 / 60) . "\xe5\260\x8f\346\227\xb6\345\x89\215"; goto sx8Fl; w6JRw: $difftime = time() - $time; goto IXB9s; dMOi4: if (!($difftime < 3600)) { goto Y1ech; } goto esO8k; OT_Mj: Y1ech: goto Of9xI; K0lkJ: return "\x31\345\210\x86\xe9\222\237\345\x89\x8d"; goto H4Ftu; fBQ5p: return intval($difftime / 60 / 60 / 24) . "\345\xa4\xa9\345\211\x8d"; goto TWZYd; XPewT: if (!($difftime < 120)) { goto bwj95; } goto K0lkJ; Of9xI: if (!($difftime < 3600 * 24)) { goto MCkhh; } goto nQqyS; H4Ftu: bwj95: goto dMOi4; NO0oo: return $difftime . "\xe7\xa7\222\345\x89\215"; goto YRlGa; IXB9s: if (!($difftime < 60)) { goto hM8to; } goto NO0oo; esO8k: return intval($difftime / 60) . "\xe5\x88\206\xe9\x92\237\345\211\215"; goto OT_Mj; DqmEZ: return "\xe6\230\xa8\345\xa4\251"; goto lvffj; lvffj: aAQqY: goto fBQ5p; sx8Fl: MCkhh: goto w5itq; TWZYd: } static function lastTime($time, $secondflag = true) { goto dG520; rrNEq: $day = intval($diff / 24 / 3600); goto zyvKx; dG520: $diff = $time - time(); goto huk08; kgzi2: dmSa8: goto Q1jjK; XbBIb: $second = $diff % 60; goto DrpQ4; zyvKx: $hour = intval($diff % (24 * 3600) / 3600); goto QVjXb; k59ot: goto d9WS1; goto kgzi2; QVjXb: $minutes = intval($diff % (24 * 3600) % 3600 / 60); goto XbBIb; g3ZC_: return "\x30\xe5\244\251\x30\346\x97\266\x30\xe5\x88\x86"; goto DdlQ7; DdlQ7: fJrEq: goto rrNEq; huk08: if (!($diff <= 0)) { goto fJrEq; } goto g3ZC_; sf3s5: d9WS1: goto kyGck; ipmEq: return $day . "\xe5\xa4\251" . $hour . "\346\227\266" . $minutes . "\xe5\x88\x86"; goto k59ot; Q1jjK: return $day . "\345\xa4\xa9" . $hour . "\346\227\266" . $minutes . "\345\210\206" . $second . "\xe7\247\x92"; goto sf3s5; DrpQ4: if ($secondflag) { goto dmSa8; } goto ipmEq; kyGck: } static function diffTimeOftomorrow() { $tomo = date("\131\x2d\x6d\55\x64", strtotime("\53\x31\x20\x64\141\x79")); return strtotime($tomo) - time(); } static function deleteData($id, $tablename) { goto wITWB; yRCs2: if (!($id == '')) { goto ZEFIA; } goto MLRhY; wITWB: global $_W; goto yRCs2; E43jl: $id = intval($id); goto HD7fL; mQj_9: hqU2D: goto I3E8u; I3E8u: $res = pdo_delete($tablename, array("\151\144" => $id, "\165\156\x69\141\143\x69\144" => $_W["\x75\156\x69\x61\x63\151\x64"]), "\101\x4e\104"); goto pTafw; HD7fL: $datainfo = self::getSingelDataInSingleTable($tablename, array("\x69\144" => $id)); goto BE93j; MLRhY: return false; goto ktH5L; KuQAM: message("\346\x8a\261\xe6\xad\211\357\274\214\346\225\xb0\346\215\256\xe4\xb8\x8d\xe5\255\x98\345\234\xa8\346\x88\226\xe6\x98\257\345\xb7\262\347\273\x8f\350\242\253\345\210\240\351\x99\xa4\357\xbc\x81"); goto mQj_9; ktH5L: ZEFIA: goto E43jl; pTafw: return $res; goto hYvcG; BE93j: if (!empty($datainfo)) { goto hqU2D; } goto KuQAM; hYvcG: } static function inserData($tablename, $data) { goto UwXbV; RvXhZ: $res = pdo_insert($tablename, $data); goto EPp6H; m2uLq: if (!($data == '')) { goto qG_0Z; } goto XlFy8; EPp6H: return $res; goto SwBOW; d58Jm: $data = $data; goto VREVw; UwXbV: global $_W; goto m2uLq; iPDzJ: qG_0Z: goto d58Jm; XlFy8: return false; goto iPDzJ; VREVw: $data["\165\156\151\x61\143\151\144"] = $_W["\x75\156\151\141\x63\x69\x64"]; goto RvXhZ; SwBOW: } static function countDataNumber($tablename, $where, $str = '') { goto HhMH6; N1Vxn: return pdo_fetchcolumn("\40\123\105\114\105\103\x54\x20\103\x4f\x55\116\124\50\x2a\51\40\106\122\117\x4d\x20" . tablename($tablename) . "\x20\127\x48\105\122\105\40{$data[0]}\40" . $str, $data[1]); goto T79b2; D701L: $data = self::structWhereStringOfAnd($where); goto N1Vxn; HhMH6: global $_W; goto D701L; T79b2: } static function addOrMinusOrUpdateData($tablename, $countarray, $id, $type = "\x61\x64\144\x6f\162\x6d\x69\x6e\x75\x73") { goto AP2E2; RpEjU: if (!$res) { goto WrrjD; } goto VTmcw; AP2E2: global $_W; goto U7BUc; ljO21: WrrjD: goto Zqa6v; FmaqQ: kVlDX: goto apsU1; dq68C: if ($type == "\141\x64\x64\x6f\162\155\x69\x6e\165\x73") { goto EvsYx; } goto wQsum; O4s1L: return false; goto KeCpe; wP2FK: goto gNsua; goto e4R1E; pKSAZ: $count = trim($count, "\x2c"); goto XQE3R; XQE3R: $id = intval($id); goto hWgqS; U7BUc: if (!empty($countarray)) { goto I3oO5; } goto O4s1L; e4R1E: EvsYx: goto eCZb6; eCZb6: foreach ($countarray as $k => $v) { $count .= "\40\x60" . $k . "\140" . "\40\x3d\40" . "\x20\x60" . $k . "\140\x20" . "\40\53\x20" . $v . "\x2c"; kIHK4: } goto ORTW1; XGAmA: x2gnw: goto S3jJM; VTmcw: return true; goto ljO21; apsU1: gNsua: goto pKSAZ; wQsum: if ($type == "\x75\x70\144\141\164\145") { goto x2gnw; } goto wP2FK; lfgu2: goto gNsua; goto XGAmA; Zqa6v: return false; goto XByBW; ORTW1: lsJte: goto lfgu2; RhCfM: $count = ''; goto dq68C; hWgqS: $res = pdo_query("\x55\x50\x44\x41\124\105\40" . tablename($tablename) . "\40\123\105\124\40{$count}\x20\x57\110\105\x52\105\40\140\151\144\x60\40\x3d\x20\47{$id}\x27\x20\x41\x4e\104\x20\140\165\x6e\151\x61\143\x69\144\140\x20\x3d\40\47{$_W["\165\x6e\151\141\143\x69\144"]}\x27\x20"); goto RpEjU; KeCpe: I3oO5: goto RhCfM; S3jJM: foreach ($countarray as $k => $v) { $count .= "\x60" . $k . "\140\x20\75\40\47" . $v . "\x27\x2c"; B1Jkn: } goto FmaqQ; XByBW: } static function getSingelDataInSingleTable($tablename, $array, $select = "\52") { goto ZTm7m; Aq0m5: return pdo_fetch($sql, $data[1]); goto GXGFa; ZTm7m: $data = self::structWhereStringOfAnd($array); goto bJwx4; bJwx4: $sql = "\123\x45\x4c\x45\103\124\x20{$select}\40\x46\122\117\x4d\40" . tablename($tablename) . "\x20\127\x48\x45\x52\105\x20{$data[0]}\40"; goto Aq0m5; GXGFa: } static function getAllDataInSingleTable($tablename, $where, $page, $num, $order = "\151\144\x20\104\x45\123\x43", $isNeadPager = true, $select = "\x2a") { goto CZ6QM; hZnr4: $data = self::structWhereStringOfAnd($where); goto LyC_V; CZ6QM: global $_W; goto hZnr4; w3LZs: $res = self::fetchFunctionInCommon($countStr, $selectStr, $data[1], $page, $num, $order, $isNeadPager); goto P16YT; LyC_V: $countStr = "\123\x45\114\105\x43\x54\40\x43\117\x55\116\x54\50\x2a\51\x20\x46\122\117\x4d\x20" . tablename($tablename) . "\40\x57\110\105\122\105\x20{$data[0]}\x20"; goto n0Jmr; P16YT: return $res; goto Pcy50; n0Jmr: $selectStr = "\x53\x45\x4c\x45\103\x54\40{$select}\40\106\122\x4f\x4d\40" . tablename($tablename) . "\x20\127\x48\105\122\x45\x20{$data[0]}\40"; goto w3LZs; Pcy50: } static function getAllDataBySingleTable($tablename, $array, $orderby, $select = "\52", $type = "\x31", $group = "\x31") { goto kiL_r; iRBwy: if ($group == 2) { goto ZP9uf; } goto HKbmM; kRbTq: Lgb2H: goto dt3zr; FJLwy: goto Dqttz; goto kRbTq; dt3zr: $data = self::structWhereStringOfAnd($array, '', $type); goto tYcXX; kiL_r: if ($type == 2) { goto Lgb2H; } goto xR44x; H97Of: iq8Ba: goto sAosd; f5Ak5: goto iq8Ba; goto dJ_Ss; xR44x: $data = self::structWhereStringOfAnd($array); goto FJLwy; dJ_Ss: ZP9uf: goto nJdB6; HKbmM: $sql = "\123\x45\x4c\x45\103\124\x20{$select}\40\106\x52\117\115\x20" . tablename($tablename) . "\x20\x57\110\x45\122\x45\x20{$data[0]}\40" . "\40\x6f\162\144\x65\162\40\142\x79\40" . $orderby; goto f5Ak5; nJdB6: $sql = "\x53\105\114\105\103\x54\x20{$select}\40\x46\x52\x4f\x4d\40" . tablename($tablename) . "\x20\127\x48\x45\122\x45\40{$data[0]}\40" . $orderby; goto H97Of; sAosd: return pdo_fetchall($sql, $data[1]); goto WwPIg; tYcXX: Dqttz: goto iRBwy; WwPIg: } static function fetchFunctionInCommon($countStr, $selectStr, $params, $page, $num, $order = "\x60\x69\144\140\x20\x44\x45\x53\103", $isNeadPager = false) { goto fW8Ew; p1tlD: $psize = $num; goto s68P5; nFFaP: $data = pdo_fetchall($selectStr . "\40\117\x52\x44\105\122\40\x42\131\x20{$order}\40" . "\40\114\111\115\111\x54\x20" . ($pindex - 1) * $psize . "\x2c" . $psize, $params); goto k1_12; s68P5: $total = $isNeadPager ? pdo_fetchcolumn($countStr, $params) : ''; goto nFFaP; k1_12: $pager = $isNeadPager ? pagination($total, $pindex, $psize) : ''; goto tSOw1; tSOw1: return array($data, $pager, $total); goto FTegM; fW8Ew: $pindex = max(1, intval($page)); goto p1tlD; FTegM: } static function structWhereStringOfAnd($array, $head = '') { goto bjpKq; HJZtX: jOkZP: goto nnjmF; EIlDG: foreach ($array as $k => $v) { goto Ppths; MsR2_: goto JBHTQ; goto KmfR9; atQMv: $eq = "\x20\x3c\75\x20"; goto dKD_v; gzEA5: $k = trim(trim($k), "\x3c"); goto atQMv; lcqHC: $k = trim(trim($k), "\x40"); goto zgwhk; fN100: EauvD: goto oR1pI; vNS7g: $eq = "\40\111\x4e\x20"; goto Pp2Mr; aErdY: L7I1h: goto gzEA5; dKD_v: goto JBHTQ; goto lQ3zt; nwoYw: $eq = "\40\x3d\x20"; goto Jw0GD; Jw0GD: goto JBHTQ; goto fN100; MF9Zu: JBHTQ: goto XAQnE; oR1pI: $k = trim(trim($k), "\x3e"); goto jmSUh; qVAGO: message("\xe5\xad\230\xe5\x9c\250\xe5\xbc\x82\345\270\xb8\xe5\217\202\xe6\x95\xb0" . $k); goto mJipU; XeH8b: if (strpos($k, "\x40") !== false) { goto KjJGN; } goto r5t23; mJipU: jaFNv: goto m01c2; zgwhk: $v = "\45" . $v . "\45"; goto MsR2_; mfaZd: if (strpos($k, "\74") !== false) { goto L7I1h; } goto XeH8b; r5t23: if (strpos($k, "\43") !== false) { goto bJ11q; } goto nwoYw; osseS: x1qwn: goto vTRXJ; Pp2Mr: $k = trim(trim($k), "\x23"); goto MF9Zu; lQ3zt: KjJGN: goto UVlJi; XAQnE: $str .= empty($head) ? "\x41\x4e\x44\40\140" . $k . "\140" . $eq . "\72" . $k . "\x20" : "\101\x4e\104\x20" . $head . "\x2e\x60" . $k . "\140" . $eq . "\x3a" . $k . "\40"; goto bhlzA; jmSUh: $eq = "\40\x3e\x3d\40"; goto xRAIL; Ppths: if (!(isset($k) && $v === '')) { goto jaFNv; } goto qVAGO; bhlzA: $params["\x3a" . $k] = $v; goto osseS; m01c2: if (strpos($k, "\76") !== false) { goto EauvD; } goto mfaZd; xRAIL: goto JBHTQ; goto aErdY; UVlJi: $eq = "\x20\114\111\x4b\x45\40"; goto lcqHC; KmfR9: bJ11q: goto vNS7g; vTRXJ: } goto A84NM; wYRj2: $str = ''; goto EIlDG; nnjmF: $array["\165\x6e\151\x61\x63\x69\144"] = $_W["\165\x6e\151\141\x63\x69\x64"]; goto wYRj2; oWSb6: $str = trim($str, "\x41\116\x44"); goto mS1sY; mS1sY: return array($str, $params); goto WOV7D; yGqgW: return false; goto HJZtX; bjpKq: global $_W; goto tRyOb; A84NM: AFCAc: goto oWSb6; tRyOb: if (is_array($array)) { goto jOkZP; } goto yGqgW; WOV7D: } static function structUserStr($openid) { goto rvQxj; y7eEw: $rump = substr($openid, -20); goto GsKxa; rvQxj: global $_W; goto aQtak; KWddr: $openid = empty($openid) ? $_W["\x6f\160\x65\x6e\x69\144"] : $openid; goto y7eEw; WUXzH: return false; goto qFCYU; qFCYU: Z1TAD: goto KWddr; aQtak: if (!($openid == '')) { goto Z1TAD; } goto WUXzH; GsKxa: return "\x66\163\x68\x6f\x70\165\163\145\162" . $rump . $_W["\x75\x6e\151\141\143\151\144"]; goto blBlH; blBlH: } static function getCookie($str) { return urldecode($_COOKIE[$str]); } static function getDataByCacheFirst($key, $name, $funcname, $valuearray) { goto BJn4o; AQcbA: self::setCache($key, $name, $data); goto ceOM0; ceOM0: AOyaJ: goto j7ij5; l91fX: if (!empty($data)) { goto AOyaJ; } goto xQCJp; j7ij5: return $data; goto Jjtzw; BJn4o: $data = self::getCache($key, $name); goto l91fX; xQCJp: $data = call_user_func_array($funcname, $valuearray); goto AQcbA; Jjtzw: } static function getCache($key, $name) { goto jYBs3; nd3HE: if (!(empty($key) || empty($name))) { goto F0srn; } goto tOlv0; wy0LB: F0srn: goto OyYSQ; OyYSQ: return cache_read("\x6d\x69\x68\165\141\x5f\x6d\141\154\x6c\72" . $_W["\165\156\151\x61\x63\151\144"] . "\72" . $key . "\x3a" . $name); goto oRpPI; tOlv0: return false; goto wy0LB; jYBs3: global $_W; goto nd3HE; oRpPI: } static function setCache($key, $name, $value) { goto Z0sbw; frUuc: if (!(empty($key) || empty($name))) { goto KBr6q; } goto qxvT9; Ko7yJ: return $res; goto zdbfs; P3P9n: KBr6q: goto YkvjK; qxvT9: return false; goto P3P9n; Z0sbw: global $_W; goto frUuc; YkvjK: $res = cache_write("\155\x69\x68\x75\141\137\155\x61\x6c\x6c\72" . $_W["\x75\x6e\151\141\143\151\x64"] . "\x3a" . $key . "\72" . $name, $value); goto Ko7yJ; zdbfs: } static function deleteCache($key, $name) { goto wekLb; rMcnV: if (!(empty($key) || empty($name))) { goto wwGvk; } goto Aa001; wekLb: global $_W; goto rMcnV; tvSr6: return cache_delete("\155\151\x68\165\141\137\x6d\141\x6c\154\x3a" . $_W["\x75\156\151\x61\x63\x69\144"] . "\x3a" . $key . "\x3a" . $name); goto j8Fdw; Ibus4: wwGvk: goto tvSr6; Aa001: return false; goto Ibus4; j8Fdw: } static function deleteThisModuleCache() { goto wfZS6; I02Nm: return $res; goto CP2Dq; wfZS6: global $_W; goto MqEsK; MqEsK: $res = cache_clean("\155\x69\x68\x75\141\137\x6d\141\x6c\154"); goto I02Nm; CP2Dq: } static function mkdirs($path) { goto k76RL; b9oAO: gyjEb: goto saQk1; PmTWH: mkdir($path, 0777, true); goto b9oAO; k76RL: if (is_dir($path)) { goto gyjEb; } goto PmTWH; saQk1: return is_dir($path); goto Bb4b_; Bb4b_: } static function fileExists($name, $dir = '') { goto Ybm9_; jkdzw: $dir = MIHUA_MALL . "\x63\141\x63\x68\145\x2f" . $_W["\165\156\151\141\143\151\x64"] . "\x2f" . $dir; goto Nvrbe; YUDx2: mOMir: goto bnskm; AfSpn: return false; goto vZ6R3; iWNSg: return false; goto YUDx2; mmBHw: if (file_exists($file)) { goto yDHTR; } goto AfSpn; zuFoC: yDHTR: goto dEG7A; Nvrbe: $file = $dir . "\57" . $name . "\56\160\150\160"; goto mmBHw; f7ga5: if (!empty($name)) { goto mOMir; } goto iWNSg; vZ6R3: goto OIZjx; goto zuFoC; YIOPm: OIZjx: goto znkhB; Ybm9_: global $_W; goto f7ga5; bnskm: $name = MD5($name . $GLOBALS["\x5f\127"]["\143\157\156\146\x69\147"]["\163\x65\164\164\151\x6e\x67"]["\141\165\x74\150\x6b\145\171"]); goto jkdzw; dEG7A: return true; goto YIOPm; znkhB: } static function encrypt($str) { global $_W; return authcode($str, "\x45\x4e\103\x4f\104\x45", $_W["\x61\x63\143\x6f\165\x6e\x74"]["\153\x65\x79"], 600); } static function decode($str) { global $_W; return authcode($str, "\104\105\x43\x4f\x44\105", $_W["\x61\x63\x63\x6f\165\x6e\164"]["\x6b\x65\171"], 600); } static function createModuleUrl($do, $array) { goto KPnh9; Q7gVI: $str = "\46\144\157\x3d" . $do; goto yiz5N; O370Y: return $_W["\163\151\x74\145\x72\x6f\157\x74"] . "\x61\x70\160\57\x69\156\x64\x65\170\x2e\x70\x68\160\77\151\x3d" . $_W["\165\x6e\151\141\x63\151\144"] . "\x26\143\75\x65\156\164\162\x79" . $str . "\x26\x6d\x3d\155\151\150\x75\x61\x5f\x6d\x61\154\x6c"; goto mbKD2; UV8ow: n6Teq: goto O370Y; yiz5N: foreach ($array as $k => $v) { $str .= "\x26" . $k . "\x3d" . $v; NteUs: } goto UV8ow; KPnh9: global $_W; goto Q7gVI; mbKD2: } static function getCfg($str = '') { goto CqwTy; Vguyc: if ($str) { goto TkJxf; } goto Fkrgl; gXN28: TkJxf: goto Lwuzg; Fkrgl: return $cfg; goto NXEnm; FFxsZ: $cfg = unserialize($cfg); goto Vguyc; Lwuzg: return $cfg[$str]; goto yPnrj; yPnrj: VLVay: goto bMpZ8; Rcl_P: $cfg = pdo_fetchcolumn("\x53\x45\x4c\x45\103\124\40\163\x65\164\164\151\156\x67\x73\40\106\122\x4f\x4d\x20" . tablename("\x75\156\151\x5f\x61\x63\143\157\x75\x6e\x74\x5f\x6d\157\x64\165\x6c\145\x73") . "\x20\127\110\105\122\x45\x20\x6d\157\x64\x75\154\x65\x20\x3d\40\x3a\155\157\144\x75\x6c\145\40\101\116\104\x20\165\x6e\x69\141\x63\151\x64\40\75\x20\72\165\156\151\x61\143\151\x64", array("\x3a\155\157\x64\x75\x6c\145" => "\155\151\150\165\141\x5f\155\x61\154\x6c", "\x3a\x75\156\151\x61\143\151\144" => $_W["\x75\156\151\x61\143\151\x64"])); goto FFxsZ; NXEnm: goto VLVay; goto gXN28; CqwTy: global $_W; goto Rcl_P; bMpZ8: } static function trimWithArray($array) { goto wQwMf; IjD7f: return $res; goto O902C; sGHnf: return trim($array); goto cnyJY; cnyJY: n9f3e: goto yMRUF; ta3DN: WEKpD: goto IjD7f; yMRUF: foreach ($array as $k => $v) { $res[$k] = self::trimWithArray($v); JghVd: } goto ta3DN; wQwMf: if (is_array($array)) { goto n9f3e; } goto sGHnf; O902C: } public static function httpRequest($url, $post = '', $headers = array(), $forceIp = '', $timeout = 60, $options = array()) { load()->func("\x63\157\x6d\x6d\165\x6e\x69\x63\141\x74\x69\157\156"); return ihttp_request($url, $post, $options, $timeout); } public static function httpGet($url, $forceIp = '', $timeout = 60) { goto ULqXN; OurU7: LPlS1: goto dm3RP; dm3RP: return $res; goto HNqHC; jlZ25: if (is_error($res)) { goto LPlS1; } goto iDYFH; ULqXN: $res = self::httpRequest($url, '', array(), $forceIp, $timeout); goto jlZ25; iDYFH: return $res["\143\157\x6e\164\x65\x6e\164"]; goto OurU7; HNqHC: } public static function httpPost($url, $data, $forceIp = '', $timeout = 60) { goto Zc6Rj; tsJFt: $res = self::httpRequest($url, $data, $headers, $forceIp, $timeout); goto TRcKp; Zc6Rj: $headers = array("\x43\x6f\x6e\164\x65\x6e\164\x2d\x54\x79\x70\145" => "\141\x70\160\154\x69\143\141\x74\151\157\156\x2f\x78\55\x77\x77\x77\x2d\146\x6f\x72\x6d\55\165\x72\154\x65\156\143\157\144\145\x64"); goto tsJFt; W6oPY: return $res["\143\x6f\156\x74\145\x6e\164"]; goto JEYdA; JEYdA: VPCgW: goto mT8Q1; TRcKp: if (is_error($res)) { goto VPCgW; } goto W6oPY; mT8Q1: return $res; goto f9lLQ; f9lLQ: } function Array2String($Array) { goto f2b1o; rn3DL: $NullValue = "\x5e\136\x5e"; goto kC92F; f2b1o: $Return = ''; goto rn3DL; FFq3i: H8UYe: goto bKNz4; bKNz4: return urlencode(substr($Return, 0, -2)); goto jHxvn; kC92F: foreach ($Array as $Key => $Value) { goto boBDJ; boBDJ: if (is_array($Value)) { goto o68dk; } goto GjWBe; EIjYq: zbpkt: goto maKdR; Swsnj: $Return .= urlencode(base64_encode($Key)) . "\174" . urlencode(base64_encode($ReturnValue)) . "\x7c\174"; goto EIjYq; ym5Nr: slxy0: goto Swsnj; frfSJ: goto slxy0; goto Jk0Kk; GjWBe: $ReturnValue = strlen($Value) > 0 ? $Value : $NullValue; goto frfSJ; H9JYl: $ReturnValue = "\x5e\136\141\162\162\x61\171\136" . Array2String($Value); goto ym5Nr; Jk0Kk: o68dk: goto H9JYl; maKdR: } goto FFq3i; jHxvn: } function String2Array($String) { goto ZIvN8; dc9QR: $TempArray = explode("\x7c\x7c", $String); goto jOV8E; Tipkp: $String = urldecode($String); goto dc9QR; j9J2h: return $Return; goto U01mj; M3obL: foreach ($TempArray as $TempValue) { goto pE0Z1; wRCoA: $ReturnValue = String2Array(substr($ReturnValue, 8)); goto rpbdT; TwbwP: u6x1L: goto Rmrxa; J35xs: if ($Value != $NullValue) { goto xUU9j; } goto ul1a4; POat3: fnV5f: goto TwbwP; DpxrG: $ReturnValue = base64_decode(urldecode($Value)); goto veTxi; pE0Z1: list($Key, $Value) = explode("\174", $TempValue); goto k7k0n; ul1a4: $Return[$DecodedKey] = NULL; goto elsP0; rpbdT: iiXYD: goto VZCaa; veTxi: if (!(substr($ReturnValue, 0, 8) == "\x5e\x5e\141\x72\x72\x61\171\136")) { goto iiXYD; } goto wRCoA; gkyzw: xUU9j: goto DpxrG; VZCaa: $Return[$DecodedKey] = $ReturnValue; goto POat3; elsP0: goto fnV5f; goto gkyzw; k7k0n: $DecodedKey = base64_decode(urldecode($Key)); goto J35xs; Rmrxa: } goto L52Vh; L52Vh: CWVxg: goto j9J2h; jOV8E: $NullValue = urlencode(base64_encode("\136\x5e\x5e")); goto M3obL; ZIvN8: $Return = array(); goto Tipkp; U01mj: } static function web_register_jssdk($debug = false) { goto w3Hyq; LH22S: $sysinfo["\157\160\145\x6e\x69\x64"] = $_W["\x6f\160\145\156\x69\x64"]; goto DjiH3; fZEEV: if (!defined("\x4d\117\x44\x55\x4c\x45\137\125\122\x4c")) { goto RwTiR; } goto FRF95; HJ1gw: if (!defined("\x48\105\x41\104\x45\122")) { goto URAC1; } goto GjyNC; ztX1N: $script = <<<EOF
\t<script src="https://res.wx.qq.com/open/js/jweixin-1.1.0.js"></script>
\t<script type="text/javascript">
\t\twindow.sysinfo = window.sysinfo || {$sysinfo} || {};
\t\t
\t</script>
EOF;
goto arKIb; DjiH3: yu7h7: goto fZEEV; KffwO: if (empty($_W["\x6f\x70\x65\x6e\151\144"])) { goto yu7h7; } goto LH22S; xszA8: URAC1: goto Z8N2O; ywZi3: $sysinfo = json_encode($sysinfo); goto aZpQh; arKIb: echo $script; goto PJPE1; El6Xt: return; goto xszA8; AtWBt: RwTiR: goto ywZi3; GjyNC: echo ''; goto El6Xt; FRF95: $sysinfo["\115\117\x44\125\x4c\x45\137\125\x52\x4c"] = MODULE_URL; goto AtWBt; kU27D: $debug = $debug ? "\164\x72\165\x65" : "\x66\141\x6c\163\145"; goto ztX1N; MDcsH: xtyOE: goto KffwO; Z8N2O: $sysinfo = array("\165\156\151\141\x63\151\x64" => $_W["\x75\x6e\x69\141\x63\x69\144"], "\x61\143\151\x64" => $_W["\141\x63\x69\x64"], "\163\x69\x74\x65\x72\x6f\x6f\x74" => $_W["\x73\x69\x74\x65\x72\x6f\157\x74"], "\x73\x69\x74\145\165\x72\x6c" => $_W["\x73\151\x74\x65\165\162\x6c"], "\x61\x74\164\141\x63\150\x75\162\154" => $_W["\141\164\164\141\x63\x68\x75\x72\x6c"], "\x63\157\x6f\x6b\151\x65" => array("\160\162\x65" => $_W["\x63\157\156\x66\151\147"]["\143\157\x6f\x6b\x69\x65"]["\160\162\x65"])); goto czR3d; w3Hyq: global $_W; goto HJ1gw; P5GJG: $sysinfo["\x61\x63\x69\x64"] = $_W["\141\x63\151\144"]; goto MDcsH; czR3d: if (empty($_W["\141\x63\x69\x64"])) { goto xtyOE; } goto P5GJG; aZpQh: $jssdkconfig = json_encode($_W["\x61\x63\x63\x6f\x75\156\164"]["\152\x73\x73\144\153\143\x6f\x6e\x66\x69\x67"]); goto kU27D; PJPE1: } public static function sendtmpmsg_key3($openid, $template_id, $url, $goodstitle, $keyword1, $keyword2, $keyword3, $remark) { $data = "\x7b\xa\x20\40\40\x20\40\x20\40\x20\x20\x20\40\x20\40\40\x20\x20\42\164\x6f\165\163\x65\x72\42\72\x22" . $openid . "\x22\x2c\12\x20\40\x20\x20\40\40\x20\40\x20\40\x20\40\40\x20\x20\x20\42\164\145\x6d\x70\x6c\x61\164\145\x5f\x69\x64\x22\x3a\x22" . $template_id . "\42\54\12\x20\40\40\x20\40\40\x20\x20\x20\40\x20\x20\40\40\40\40\x22\165\162\154\x22\x3a\42" . $url . "\42\x2c\12\x20\40\x20\40\x20\x20\x20\40\x20\40\40\40\40\x20\40\40\42\x74\157\160\143\157\x6c\x6f\162\42\72\42\x23\60\x30\60\60\60\60\42\x2c\xa\x20\40\40\x20\40\40\40\x20\x20\x20\40\40\x20\x20\x20\x20\x22\x64\141\x74\x61\42\x3a\173\12\40\x20\x20\x20\40\40\40\40\x20\40\40\40\x20\40\x20\x20\x20\x20\x20\40\x22\146\x69\162\x73\164\42\72\x20\x7b\xa\40\x20\x20\x20\x20\40\40\40\x20\40\x20\x20\x20\40\40\x20\x20\40\40\40\40\x20\x20\40\x22\x76\x61\x6c\165\145\42\x3a\x22" . $goodstitle . "\42\54\12\x9\x9\x9\11\x9\11\42\x63\157\x6c\x6f\x72\42\x3a\42\43\x30\60\x30\x30\60\x30\x22\xa\40\x20\x20\40\40\x20\x20\x20\x20\x20\x20\x20\x20\40\40\40\x20\x20\x20\x20\175\x2c\xa\x20\40\40\40\40\x20\40\x20\40\x20\x20\x20\40\40\x20\x20\40\x20\40\x22\x6b\x65\171\x77\x6f\x72\x64\x31\x22\x3a\x7b\12\40\40\40\40\x20\x20\x20\x20\40\x20\40\x20\x20\x20\x20\x20\40\40\40\x20\40\x20\x20\40\x22\x76\x61\x6c\165\x65\42\x3a\42" . $keyword1 . "\x22\54\xa\11\11\11\x9\11\x9\x22\143\157\x6c\157\162\x22\72\x22\43\x30\x30\60\x30\60\60\x22\xa\40\40\x20\40\x20\40\x20\x20\40\40\40\40\x20\40\40\x20\40\40\x20\x20\x7d\54\40\xa\11\11\x9\11\11\42\153\145\x79\167\157\x72\x64\62\42\72\173\xa\40\40\40\x20\x20\40\x20\x20\x20\x20\x20\40\40\40\x20\x20\x20\x20\40\x20\x20\40\x20\40\42\x76\141\154\x75\145\42\x3a\42" . $keyword2 . "\x22\x2c\xa\11\11\x9\11\x9\11\x22\x63\157\154\157\x72\x22\72\x22\x23\60\x30\x30\60\60\x30\42\xa\x20\x20\40\40\40\40\x20\40\x20\40\40\x20\x20\x20\40\x20\x20\40\x20\x20\175\x2c\x20\12\x9\11\11\11\x9\x22\x6b\x65\x79\167\x6f\162\144\63\x22\x3a\x7b\12\x20\40\40\40\40\40\40\x20\x20\40\40\x20\x20\40\40\40\40\x20\x20\x20\x20\40\x20\40\x22\166\x61\x6c\x75\x65\x22\x3a\x22" . $keyword3 . "\x22\x2c\xa\x9\x9\x9\x9\x9\x9\x22\x63\157\154\x6f\162\x22\x3a\42\43\x30\x30\x30\x30\x30\60\x22\xa\40\40\x20\40\x20\40\x20\40\40\x20\x20\40\x20\40\40\40\x20\40\x20\x20\175\x2c\40\40\40\40\40\40\x20\x20\40\40\x20\12\40\40\x20\40\x20\40\x20\x20\40\x20\40\40\x20\40\x20\x20\40\40\40\40\x22\x72\145\155\x61\x72\x6b\42\x3a\173\xa\x20\x20\40\40\x20\40\x20\x20\40\40\40\x20\40\40\x20\x20\40\40\x20\x20\40\40\40\x20\x22\x76\141\x6c\x75\145\42\x3a\x22" . $remark . "\42\54\12\40\40\40\x20\40\40\40\x20\40\x20\x20\x20\x20\x20\40\x20\40\40\40\x20\40\x20\40\40\42\x63\x6f\x6c\157\162\42\x3a\42\43\60\60\x30\x30\60\x30\42\xa\x20\x20\40\40\40\x20\40\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\40\x20\175\12\x20\40\x20\x20\40\x20\40\x20\40\x20\x20\x20\x20\x20\x20\x20\x7d\xa\x20\x20\40\x20\40\40\40\40\x20\x20\40\40\x7d"; self::sendwxmsg($data); } public static function sendwxmsg($data) { goto uENPL; cWSwB: hoxzQ: goto Hej99; LQhAf: $curl = curl_init(); goto qIpnH; lFICg: curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); goto YBCG0; ZR445: message("\350\x8e\267\xe5\x8f\x96\141\x63\143\x65\x73\163\x20\x74\x6f\x6b\145\x6e\40\xe5\xa4\261\xe8\xb4\245"); goto d8uHe; uENPL: $account_api = WeAccount::create(); goto Iv3Km; W4Vif: $url = "\x68\x74\x74\160\163\72\x2f\x2f\141\x70\x69\x2e\x77\145\x69\x78\x69\156\56\161\x71\56\143\x6f\x6d\x2f\143\x67\x69\55\x62\151\156\x2f\x6d\x61\164\x65\162\x69\141\154\x2f\x61\x64\144\x5f\156\145\x77\163\x3f\x61\x63\x63\145\163\163\137\x74\157\153\145\156\75{$token}"; goto bhkm4; Fniye: curl_setopt($curl, CURLOPT_POSTFIELDS, $data); goto lFICg; ydfRP: message("\xe6\xb6\210\346\x81\257\345\x8f\x91\351\x80\x81\345\xa4\261\xe8\xb4\xa5\357\xbc\214\345\xa4\261\350\264\245\345\216\x9f\xe5\x9b\240\357\274\232" . $reply["\x65\x72\x72\x6d\x73\147"], "\145\162\162\157\x72"); goto cWSwB; Oa8Ni: $sendurl = "\x68\164\x74\160\163\72\x2f\57\141\x70\x69\x2e\167\x65\x69\x78\151\x6e\56\x71\161\x2e\x63\x6f\155\57\x63\147\x69\x2d\142\x69\x6e\57\x6d\145\x73\x73\141\x67\145\x2f\x74\x65\155\x70\x6c\141\x74\x65\x2f\x73\145\x6e\144\77\x61\x63\x63\x65\163\163\x5f\x74\157\153\145\x6e\x3d" . $access_token; goto LQhAf; GYixR: if (!is_error($token)) { goto lp7Nu; } goto ZR445; R80Ih: if (!is_error($response)) { goto A3FYe; } goto EHViq; rcGOt: curl_setopt($curl, CURLOPT_POST, 1); goto Fniye; a1cIU: A3FYe: goto byLvp; ephdp: if (!($reply["\145\x72\162\155\163\147"] != "\x6f\x6b")) { goto hoxzQ; } goto ydfRP; D_diN: $token = $account_api->getAccessToken(); goto a1cIU; tvbEb: curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); goto TB2O6; L4Qae: $reply = json_decode($output, true); goto ephdp; qIpnH: curl_setopt($curl, CURLOPT_URL, $sendurl); goto tvbEb; YBCG0: $output = curl_exec($curl); goto RAccV; bhkm4: $response = ihttp_request($url, urldecode(json_encode($data))); goto R80Ih; TB2O6: curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE); goto rcGOt; Iv3Km: $token = $account_api->getAccessToken(); goto GYixR; byLvp: $access_token = $token; goto Oa8Ni; RAccV: curl_close($curl); goto L4Qae; EHViq: $account_api->clearAccessToken(); goto D_diN; d8uHe: lp7Nu: goto W4Vif; Hej99: } public function adminMessage($msg, $url, $status = "\x77\x61\x72\156\151\x6e\147") { goto iL4lR; JD0jY: include $this->template($template); goto vZhoX; vZhoX: exit; goto mFgYM; r0O71: $template = "\x61\x64\155\151\156\x5f\x6d\x65\163\x73\141\147\145"; goto JD0jY; iL4lR: global $_GPC, $_W; goto r0O71; mFgYM: } protected function template($filename) { goto EKQLM; cOwu0: $source = IA_ROOT . "\x2f\x77\145\x62\57\x74\x68\x65\155\145\163\57\x64\x65\146\x61\x75\154\164\x2f{$name}\x2f{$filename}\56\x68\x74\155\x6c"; goto EhW0v; PgAOp: goto Vgr9H; goto MriSy; GQEp8: zxUiL: goto V_Oks; GNDCR: if (is_file($source)) { goto dTL3q; } goto td6U9; A5VCX: template_compile($source, $compile, true); goto GVMKx; V_Oks: $source = IA_ROOT . "\x2f\x77\x65\x62\x2f\164\150\x65\x6d\x65\x73\x2f{$_W["\x74\145\155\x70\x6c\141\164\x65"]}\57{$name}\57{$filename}\56\150\x74\x6d\x6c"; goto J9F3M; oPLDs: ET9iR: goto uFeN1; stsFK: $name = strtolower($this->modulename); goto ewY2c; HB_UJ: if (is_file($source)) { goto J0ZMz; } goto deYd3; Tf23s: exit($source); goto S33PG; hwnfO: Vgr9H: goto CRn74; EhW0v: GkQ2Q: goto H_miQ; H_miQ: if (is_file($source)) { goto aXkxx; } goto n3tWD; n3tWD: $source = IA_ROOT . "\x2f\x74\x65\155\x70\x6c\x61\164\x65\57{$filename}\x2e\150\164\x6d\x6c"; goto dj9tk; td6U9: $source = $defineDir . "\x2f\x74\145\x6d\x70\154\141\164\145\x2f\x6d\x6f\142\151\154\x65\57{$filename}\56\x68\164\x6d\154"; goto tPOxv; J9F3M: $compile = IA_ROOT . "\57\144\x61\164\141\x2f\x74\160\154\57\167\145\142\x2f{$_W["\164\145\x6d\x70\x6c\141\x74\x65"]}\57{$name}\x2f{$filename}\x2e\x74\160\154\56\160\150\160"; goto syxy_; Kytic: if (!(DEVELOPMENT || !is_file($compile) || filemtime($source) > filemtime($compile))) { goto mrths; } goto A5VCX; dEUTw: $source = IA_ROOT . "\57\x61\160\x70\x2f\x74\x68\145\x6d\x65\x73\57\x64\x65\146\x61\x75\154\x74\x2f{$filename}\56\150\164\155\154"; goto PgAOp; TEZwJ: if (is_file($source)) { goto C5NBy; } goto esGck; S33PG: exit("\105\162\162\x6f\x72\72\40\164\145\x6d\160\154\x61\164\145\x20\163\x6f\165\x72\143\145\40\x27{$filename}\47\40\x69\x73\x20\156\157\x74\x20\145\170\151\x73\164\x21"); goto oPLDs; ycF7Q: $source = IA_ROOT . "\x2f\141\160\160\57\164\x68\145\x6d\145\163\x2f{$_W["\164\x65\155\160\x6c\x61\x74\x65"]}\x2f{$name}\57{$filename}\x2e\150\164\x6d\154"; goto Yzunc; soIkk: if (in_array($filename, array("\x68\145\141\144\x65\x72", "\146\x6f\157\164\145\162", "\x73\154\151\x64\145", "\164\x6f\157\x6c\142\x61\x72", "\155\145\163\163\141\x67\145"))) { goto vVMBl; } goto dEUTw; EKQLM: global $_W; goto stsFK; YEu4T: $source = IA_ROOT . "\57\141\160\x70\x2f\x74\150\x65\x6d\x65\x73\57\144\x65\146\141\165\154\x74\x2f\x63\x6f\155\155\x6f\156\x2f{$filename}\x2e\x68\x74\x6d\x6c"; goto hwnfO; KTEbN: if (is_file($source)) { goto ET9iR; } goto Tf23s; kQ86C: goto pLQ1l; goto GQEp8; jA_Xf: $compile = str_replace($paths["\146\151\x6c\145\156\x61\155\x65"], $_W["\x75\156\x69\x61\x63\151\144"] . "\x5f" . $paths["\146\151\x6c\x65\156\141\155\x65"], $compile); goto Kytic; KVEig: return $compile; goto sAdM_; YJpD3: C5NBy: goto GNDCR; Yzunc: $compile = IA_ROOT . "\57\x64\141\164\x61\x2f\x74\160\154\x2f\141\x70\x70\57{$_W["\164\x65\155\160\x6c\141\164\x65"]}\57{$name}\x2f{$filename}\x2e\x74\x70\x6c\x2e\x70\150\x70"; goto TEZwJ; H4wf_: pLQ1l: goto KTEbN; CRn74: M6is_: goto kQ86C; MriSy: vVMBl: goto YEu4T; GVMKx: mrths: goto KVEig; uFeN1: $paths = pathinfo($compile); goto jA_Xf; deYd3: $source = IA_ROOT . "\x2f\141\160\x70\x2f\164\150\145\155\145\163\57{$_W["\x74\x65\155\x70\154\x61\164\145"]}\57{$filename}\56\150\164\155\154"; goto uKHSD; esGck: $source = IA_ROOT . "\57\x61\x70\160\x2f\x74\150\145\x6d\145\x73\57\x64\x65\146\x61\x75\x6c\164\x2f{$name}\57{$filename}\56\x68\x74\x6d\x6c"; goto YJpD3; tPOxv: dTL3q: goto HB_UJ; dj9tk: aXkxx: goto H4wf_; ewY2c: $defineDir = dirname($this->__define); goto iTY9R; iTY9R: if (defined("\111\x4e\137\123\x59\x53")) { goto zxUiL; } goto ycF7Q; JHiow: if (is_file($source)) { goto M6is_; } goto soIkk; syxy_: if (is_file($source)) { goto GkQ2Q; } goto cOwu0; uKHSD: J0ZMz: goto JHiow; sAdM_: } static function getordersn($tablename, $colname = "\x6f\x72\x64\145\x72\x73\156") { goto eDg_T; N4p77: if (!pdo_fetch("\x73\145\154\x65\143\164\x20\x2a\x20\146\x72\x6f\155\x20" . tablename($tablename) . "\40\167\x68\145\162\x65\x20{$colname}\75\x27{$ordersn}\47\x20\x61\x6e\x64\40\x20\x75\156\x69\141\143\x69\x64\75\47{$_W["\x75\x6e\151\x61\143\x69\144"]}\x27")) { goto IvrqJ; } goto RGQWX; RGQWX: $ordersn = date("\x6d\144\x48\x69\x73") . random(4, 1); goto Sn5t7; eDg_T: global $_W; goto HqXxl; Sbv3M: IvrqJ: goto JlJvL; HqXxl: $ordersn = date("\x6d\x64\110\x69\x73") . random(4, 1); goto W46DB; JlJvL: return $ordersn; goto h39Dd; Sn5t7: goto tiQLx; goto Sbv3M; W46DB: tiQLx: goto N4p77; h39Dd: } static function randombylength_num($length) { goto iy_19; Wnsn4: $i++; goto B6FYx; zw6Ao: $hash .= $chars[mt_rand(0, $max)]; goto VdTl9; iy_19: $hash = ''; goto dMJpc; dMJpc: $chars = "\141\142\x63\144\x65\146\147\x68\151\x6a\153\x6c\155\156\157\160\161\x72\x73\x74\x75\166\x77\170\x79\172\60\61\62\x33\64\x35\x36\67\x38\x39"; goto sliTA; JkhAX: zVAiP: goto XwZxG; VdTl9: Bfszp: goto Wnsn4; dWVFG: $i = 0; goto m5oLj; Ccz91: if (!($i < $length)) { goto zVAiP; } goto zw6Ao; LVi1O: mt_srand((double) microtime() * 1000000); goto dWVFG; sliTA: $max = strlen($chars) - 1; goto LVi1O; B6FYx: goto Ivic8; goto JkhAX; m5oLj: Ivic8: goto Ccz91; XwZxG: return $hash; goto qq985; qq985: } static function getrandomstr($tablename, $length, $colname) { goto aSIbQ; X7dtA: goto XwZ9u; goto OWEZ0; NGz2y: $ordersn = self::randombylength_num($length); goto w_8gJ; Ztr9c: $ordersn = self::randombylength_num($length); goto X7dtA; OWEZ0: OfiiN: goto JYS7p; w_8gJ: XwZ9u: goto vwauT; vwauT: if (!pdo_fetch("\x73\x65\154\145\x63\164\40\x2a\x20\146\162\x6f\155\x20" . tablename($tablename) . "\x20\167\150\145\x72\x65\x20{$colname}\x3d\x27{$ordersn}\47\40\141\156\x64\x20\40\165\156\x69\141\x63\151\144\75\x27{$_W["\x75\156\x69\141\143\151\144"]}\47")) { goto OfiiN; } goto Ztr9c; JYS7p: return $ordersn; goto oYvDz; aSIbQ: global $_W; goto NGz2y; oYvDz: } static function getVerify($oid) { global $_W; return $_W["\163\151\x74\x65\162\157\x6f\164"] . "\x61\x70\x70\x2f\151\156\144\x65\x78\x2e\x70\x68\160\x3f\151\75{$_W["\x75\x6e\x69\141\x63\151\x64"]}\x26\x63\x3d\x65\x6e\164\x72\x79\46\144\157\x3d\x76\145\x72\151\146\151\x63\141\x74\x69\157\156\46\x6d\75\155\151\x68\x75\x61\137\155\141\x6c\x6c\46\x6f\151\x64\x3d" . $oid; } public static function getURLQR($url, $imgname) { goto CuTqn; UXY5k: dmS3z: goto peP0x; peP0x: return $att_target_file; goto t2L5U; egRvc: $matrixPointSize = "\x34"; goto aMyn8; E2lQ1: QRcode::png($url, $target_file, $errorCorrectionLevel, $matrixPointSize); goto kU6PC; aMyn8: $imgdir = self::getAttImgdir(); goto F4ckM; irxyy: $target_file = ATTACHMENT_ROOT . $att_target_file; goto E2lQ1; CuTqn: global $_W; goto qL0Fg; kU6PC: if (empty($_W["\163\145\x74\x74\151\x6e\147"]["\x72\145\155\157\x74\145"]["\x74\x79\160\x65"])) { goto dmS3z; } goto Ws_1Q; Ws_1Q: $remotestatus = file_remote_upload($att_target_file); goto ctH45; F4ckM: $att_target_file = $imgdir . "\x2f\155\x69\x68\x75\x61\137\x6d\141\x6c\154\x5f" . $imgname . "\56\160\156\x67"; goto irxyy; ctH45: if (!is_error($remotestatus)) { goto gY3D0; } goto VApDJ; VApDJ: message("\xe8\277\x9c\xe7\250\213\351\231\x84\xe4\273\266\xe4\270\x8a\xe4\274\240\xe5\244\261\350\xb4\xa5\357\274\x8c\350\xaf\xb7\xe6\xa3\200\xe6\237\245\351\x85\x8d\xe7\xbd\256\xe5\xb9\xb6\351\207\215\xe6\226\xb0\344\270\x8a\xe4\xbc\xa0"); goto A8qKi; A8qKi: gY3D0: goto UXY5k; qL0Fg: $errorCorrectionLevel = "\114"; goto egRvc; t2L5U: } static function getAttImgdir() { goto GcuJf; OgiSQ: self::createDir(ATTACHMENT_ROOT . $dir); goto zIJgd; GcuJf: global $_W; goto jQCVF; zIJgd: return $dir; goto l1KkW; jQCVF: $dir = "\x69\x6d\x61\x67\x65\x73\57" . $_W["\x75\x6e\151\x61\x63\151\144"] . "\57" . date("\x59") . "\x2f" . date("\x6d"); goto OgiSQ; l1KkW: } static function createDir($dir, $mode = 0777) { goto wYbKD; AGFst: t8Jvy: goto SVXPx; SVXPx: if (mk_dir(dirname($dir), $mode)) { goto QcDA4; } goto NNabg; EL527: return true; goto AGFst; NNabg: return false; goto APcSv; wYbKD: if (!(is_dir($dir) || @mkdir($dir, $mode))) { goto t8Jvy; } goto EL527; APcSv: QcDA4: goto R40wS; R40wS: return @mkdir($dir, $mode); goto A6KkV; A6KkV: } public static function msg_tjrtzewm($agentname, $by_agentname, $tmp) { goto p2ChM; e8l72: $time = date("\131\55\155\55\x64\x20\110\72\151\72\163"); goto JL1_o; p2ChM: global $_W; goto e8l72; B9E9j: E_p2H: goto eoZSn; KmMrx: if (!(!empty($tmsgtemplate["\x69\x64"]) && !empty($tmsgtemplate["\x74\x65\155\160\154\x61\164\x65"]) && $tmsgtemplate["\164\145\x6e\141\x62\x6c\145"] == 1)) { goto E_p2H; } goto HiBm3; mYbFM: $message2 = str_replace("\173\142\x79\137\x61\147\145\156\164\x5f\x6e\141\x6d\145\175", $by_agentname, $message1); goto hC2AF; A8s1P: return $message; goto B9E9j; JL1_o: $tmsgtemplate = pdo_fetch("\123\105\114\105\103\x54\x20\52\x20\x46\122\x4f\x4d\x20" . tablename("\155\x69\150\165\141\x5f\x6d\x61\154\x6c\x5f\x6d\x73\147\x5f\164\145\155\160\154\x61\164\x65") . "\40\x57\x48\105\122\105\x20\x20\165\156\x69\141\143\x69\144\x20\x3d\x20\72\165\x6e\151\x61\x63\151\144\40\x61\x6e\x64\x20\x74\x6b\145\171\x20\75\x20\72\153\145\171", array("\x3a\165\x6e\151\141\143\x69\144" => $_W["\x75\x6e\151\141\143\x69\x64"], "\72\153\145\171" => $tmp)); goto KmMrx; HiBm3: $message1 = str_replace("\x7b\141\147\x65\156\x74\x5f\156\x61\155\x65\175", $agentname, $tmsgtemplate["\164\x65\155\x70\x6c\141\x74\x65"]); goto mYbFM; hC2AF: $message = str_replace("\x7b\164\x69\155\145\175", $time, $message2); goto A8s1P; eoZSn: } function is_HTTPS() { goto joU6O; e3nj3: goto uGzGD; goto RP6xv; m0bmn: return "\150\x74\x74\160\72\57\57"; goto o5nMn; B0b_s: if ($_SERVER["\x48\124\124\120\123"] === "\157\156") { goto gJwDg; } goto DM3uY; w8jex: return "\150\x74\164\160\x73\x3a\57\57"; goto uqc1M; CPjab: goto uGzGD; goto v6EFy; uqc1M: uGzGD: goto m0bmn; ttmCA: return "\x68\164\164\x70\163\x3a\x2f\57"; goto PQAH7; v6EFy: kUMFs: goto w8jex; vCtbb: paZkG: goto s5K_v; joU6O: if (isset($_SERVER["\x48\124\x54\120\x53"])) { goto paZkG; } goto CcXYC; suuQN: return "\x68\164\164\x70\163\72\57\x2f"; goto CPjab; DHPgd: gJwDg: goto suuQN; CcXYC: return "\x68\164\x74\x70\163\x3a\57\57"; goto vCtbb; PQAH7: goto uGzGD; goto DHPgd; DM3uY: if ($_SERVER["\x53\105\122\x56\x45\x52\x5f\x50\117\122\124"] == 443) { goto kUMFs; } goto e3nj3; s5K_v: if ($_SERVER["\110\124\124\120\x53"] === 1) { goto sJSwA; } goto B0b_s; RP6xv: sJSwA: goto ttmCA; o5nMn: } }