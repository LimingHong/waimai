<?php
 namespace GuzzleHttp; class UriTemplate { private $template; private $variables; private static $operatorHash = array('' => array("\x70\162\x65\146\x69\170" => '', "\152\157\x69\x6e\x65\x72" => "\54", "\x71\165\x65\162\x79" => false), "\x2b" => array("\160\x72\x65\x66\x69\x78" => '', "\x6a\157\151\156\x65\x72" => "\54", "\161\x75\145\x72\171" => false), "\43" => array("\x70\162\x65\x66\151\x78" => "\x23", "\152\157\x69\156\145\x72" => "\54", "\161\165\145\162\x79" => false), "\56" => array("\x70\162\x65\x66\151\170" => "\x2e", "\x6a\x6f\x69\x6e\x65\162" => "\56", "\161\165\x65\162\171" => false), "\x2f" => array("\x70\162\145\x66\x69\170" => "\x2f", "\x6a\x6f\x69\156\145\162" => "\57", "\x71\165\145\162\171" => false), "\73" => array("\x70\x72\x65\146\151\x78" => "\73", "\152\157\x69\x6e\145\x72" => "\73", "\x71\x75\x65\162\171" => true), "\x3f" => array("\160\162\x65\146\151\x78" => "\x3f", "\x6a\157\151\156\145\162" => "\46", "\161\x75\x65\x72\171" => true), "\46" => array("\x70\x72\145\x66\151\x78" => "\x26", "\x6a\157\x69\x6e\145\162" => "\x26", "\161\x75\145\x72\171" => true)); private static $delims = array("\72", "\x2f", "\77", "\43", "\x5b", "\x5d", "\x40", "\41", "\44", "\46", "\x27", "\50", "\x29", "\52", "\x2b", "\54", "\x3b", "\75"); private static $delimsPct = array("\x25\x33\101", "\45\62\x46", "\x25\63\106", "\45\62\x33", "\45\x35\x42", "\x25\65\x44", "\45\64\x30", "\x25\x32\x31", "\45\62\x34", "\45\62\x36", "\x25\62\x37", "\45\x32\70", "\45\62\x39", "\x25\x32\101", "\x25\x32\x42", "\45\x32\103", "\x25\63\x42", "\45\x33\x44"); public function expand($template, array $variables) { goto axnH6; SiFy5: return preg_replace_callback("\x2f\134\x7b\x28\x5b\136\134\175\135\53\x29\134\x7d\57", [$this, "\x65\x78\160\141\x6e\144\x4d\x61\164\143\x68"], $this->template); goto EYFWG; qcgnJ: $this->template = $template; goto Q_gOq; D2kkG: return $template; goto Z2IzX; Z2IzX: V7qft: goto qcgnJ; axnH6: if (!(false === strpos($template, "\173"))) { goto V7qft; } goto D2kkG; Q_gOq: $this->variables = $variables; goto SiFy5; EYFWG: } private function parseExpression($expression) { goto TNoOR; moEbu: $expression = substr($expression, 1); goto JY5rg; DGHpY: gonHs: goto jfGWd; jfGWd: return $result; goto V7EvL; H096F: XOamD: goto MfcEP; Sau7Q: foreach (explode("\54", $expression) as $value) { goto wd4sC; AkxKL: $varspec["\166\x61\154\165\x65"] = substr($value, 0, -1); goto SrQ6S; fCgCd: $varspec["\x76\141\154\165\x65"] = substr($value, 0, $colonPos); goto FS2vT; wd4sC: $value = trim($value); goto Jo06O; N9Z_i: if ($colonPos = strpos($value, "\x3a")) { goto t6w9D; } goto eH3v8; G6agJ: t6w9D: goto fCgCd; Jo06O: $varspec = []; goto N9Z_i; yeWvv: $varspec["\166\x61\154\165\x65"] = (string) $value; goto MCclo; eH3v8: if (substr($value, -1) === "\x2a") { goto VDh6p; } goto yeWvv; uet7r: sy1Xa: goto fps2S; zBCJa: $result["\166\x61\154\165\145\163"][] = $varspec; goto uet7r; saIc6: VDh6p: goto dZUvb; SrQ6S: RcBZQ: goto zBCJa; dZUvb: $varspec["\155\x6f\144\x69\146\151\145\162"] = "\x2a"; goto AkxKL; tJ0KK: goto RcBZQ; goto saIc6; MCclo: $varspec["\x6d\157\144\151\x66\x69\145\x72"] = ''; goto Kj41E; FS2vT: $varspec["\155\x6f\144\x69\146\151\145\x72"] = "\x3a"; goto A6BxX; A6BxX: $varspec["\x70\157\163\151\x74\x69\157\156"] = (int) substr($value, $colonPos + 1); goto tJ0KK; Kj41E: goto RcBZQ; goto G6agJ; fps2S: } goto DGHpY; MfcEP: $result["\x6f\160\145\x72\x61\164\x6f\x72"] = $expression[0]; goto moEbu; CE2av: $result["\x6f\160\145\162\141\164\157\x72"] = ''; goto It976; JY5rg: NhYQc: goto Sau7Q; It976: goto NhYQc; goto H096F; TNoOR: $result = []; goto SEGXZ; SEGXZ: if (isset(self::$operatorHash[$expression[0]])) { goto XOamD; } goto CE2av; V7EvL: } private function expandMatch(array $matches) { goto lrajZ; pqJi1: NjSB8: goto XYMmW; VREME: $ret = implode($joiner, $replacements); goto Rpkq3; XYMmW: return $ret; goto NvyaW; Rpkq3: if (!($ret && $prefix)) { goto NjSB8; } goto bW52k; O4D4x: MrG1P: goto VREME; lrajZ: static $rfc1738to3986 = array("\x2b" => "\x25\x32\60", "\45\x37\145" => "\176"); goto ZkTeg; ZkTeg: $replacements = []; goto Wkjb1; oz5e_: foreach ($parsed["\166\141\x6c\x75\x65\x73"] as $value) { goto WeoSS; TfH0x: $kvp = []; goto itwbB; DQ1sR: FWE69: goto MsDxe; s8msk: XMTKD: goto GSRx2; cUgEQ: goto c_m2k; goto vjAhz; mzhbS: le0ex: goto qDM8B; F_Hg1: if (!($value["\x6d\x6f\x64\151\146\x69\145\162"] === "\72")) { goto N76xa; } goto jHkKJ; xoEvb: if (!($parsed["\157\160\145\x72\x61\164\x6f\162"] === "\x2b" || $parsed["\157\160\x65\x72\x61\x74\157\162"] === "\x23")) { goto hWejE; } goto NPByq; jHkKJ: $variable = substr($variable, 0, $value["\x70\x6f\163\151\164\x69\x6f\x6e"]); goto X1Q3I; NL_Gn: goto XMTKD; goto njYRH; hc_8w: $expanded = $value["\x76\x61\x6c\x75\x65"]; goto s8msk; SPqxR: $expanded = $value["\166\x61\x6c\x75\145"] . "\x3d" . $expanded; goto NL_Gn; q8PO0: XZau4: goto eAwcx; WeoSS: if (isset($this->variables[$value["\x76\141\154\x75\x65"]])) { goto SoCTL; } goto rg0KF; itwbB: foreach ($variable as $key => $var) { goto f3KqV; RaDX3: $isNestedArray = is_array($var); goto EHbY5; kOdqk: C1okP: goto y8Zn9; h1t0Z: dggmv: goto kOdqk; UI4UO: goto lXQHr; goto l1F_x; Erfez: if ($isAssoc) { goto qs62s; } goto p1EvF; EHbY5: tALaZ: goto Hwq3j; aSW2i: $var = strtr(http_build_query([$key => $var]), $rfc1738to3986); goto sjvpb; l1F_x: UwBZu: goto aSW2i; DLEES: $var = $this->decodeReserved($var); goto FL3Vr; b6No5: if (!($value["\155\157\144\151\146\x69\145\x72"] === "\52")) { goto C1okP; } goto Erfez; zzyE3: $isNestedArray = false; goto fuvBy; sjvpb: lXQHr: goto yHaIW; fuvBy: goto tALaZ; goto fTkdq; yHaIW: goto dggmv; goto jpy2j; FL3Vr: xRDO_: goto iZSr_; fTkdq: yHSxP: goto GhuEk; CvwbF: $var = $key . "\x3d" . $var; goto UI4UO; Hwq3j: if ($isNestedArray) { goto xxaTr; } goto QeiJ1; jpy2j: wjwtw: goto uzQNJ; bE8dc: if (!($parsed["\x6f\x70\145\162\x61\164\157\162"] === "\53" || $parsed["\157\160\x65\x72\141\x74\x6f\x72"] === "\43")) { goto xRDO_; } goto DLEES; p1EvF: if ($key > 0 && $actuallyUseQuery) { goto wjwtw; } goto i4jZx; i4jZx: goto dggmv; goto gICOq; QeiJ1: $var = rawurlencode($var); goto bE8dc; y8Zn9: $kvp[$key] = $var; goto pfSrc; GhuEk: $key = rawurlencode($key); goto RaDX3; kIlNS: if ($isNestedArray) { goto UwBZu; } goto CvwbF; uzQNJ: $var = $value["\166\141\154\x75\145"] . "\x3d" . $var; goto h1t0Z; iZSr_: xxaTr: goto b6No5; gICOq: qs62s: goto kIlNS; f3KqV: if ($isAssoc) { goto yHSxP; } goto zzyE3; pfSrc: zBhAc: goto rAETA; rAETA: } goto tl2GM; trnZp: if (empty($variable)) { goto le0ex; } goto Ib3KK; njYRH: Sn2Z1: goto hc_8w; tl2GM: vdFGK: goto trnZp; vn6tR: $variable = $this->variables[$value["\x76\141\154\165\145"]]; goto wvmsT; NPByq: $expanded = $this->decodeReserved($expanded); goto Elara; McBCO: if (!$isAssoc) { goto QbgFK; } goto wQBUQ; o2DFP: if (!$isAssoc) { goto VYKrt; } goto gV01X; vjAhz: KzAI_: goto hWTZP; YbMeQ: $replacements[] = $expanded; goto q8PO0; X1Q3I: N76xa: goto prBdD; MsDxe: VYKrt: goto x8ZyO; CXZFs: if (!$actuallyUseQuery) { goto pgOKf; } goto LymXD; LymXD: if (!$expanded && $joiner !== "\46") { goto Sn2Z1; } goto SPqxR; Elara: hWejE: goto cUgEQ; et1lo: LcKQ1: goto Oddgc; rE8W9: if (is_array($variable)) { goto KzAI_; } goto F_Hg1; xiCY7: $expanded = implode($joiner, $kvp); goto McBCO; hWTZP: $isAssoc = $this->isAssoc($variable); goto TfH0x; gV01X: foreach ($kvp as $k => &$v) { $v = $k . "\x2c" . $v; Rndrc: } goto DQ1sR; x8ZyO: $expanded = implode("\54", $kvp); goto njznA; njznA: goto LcKQ1; goto mzhbS; prBdD: $expanded = rawurlencode($variable); goto xoEvb; wQBUQ: $actuallyUseQuery = false; goto O0EQA; O0EQA: QbgFK: goto et1lo; qDM8B: $actuallyUseQuery = false; goto MAM98; Ib3KK: if ($value["\155\157\x64\x69\146\x69\x65\x72"] === "\52") { goto wrlX2; } goto o2DFP; Oddgc: c_m2k: goto CXZFs; MAM98: goto LcKQ1; goto i1tK1; i1tK1: wrlX2: goto xiCY7; rg0KF: goto XZau4; goto D6bqf; scge4: $expanded = ''; goto rE8W9; GSRx2: pgOKf: goto YbMeQ; wvmsT: $actuallyUseQuery = $useQuery; goto scge4; D6bqf: SoCTL: goto vn6tR; eAwcx: } goto O4D4x; Wkjb1: $parsed = self::parseExpression($matches[1]); goto UxOrl; JooOi: $useQuery = self::$operatorHash[$parsed["\x6f\x70\x65\x72\x61\164\157\162"]]["\x71\x75\x65\162\x79"]; goto oz5e_; bW52k: return $prefix . $ret; goto pqJi1; UxOrl: $prefix = self::$operatorHash[$parsed["\157\160\x65\162\x61\x74\157\x72"]]["\160\x72\x65\x66\x69\170"]; goto VLw4L; VLw4L: $joiner = self::$operatorHash[$parsed["\x6f\160\145\x72\x61\164\157\x72"]]["\152\157\x69\x6e\145\162"]; goto JooOi; NvyaW: } private function isAssoc(array $array) { return $array && array_keys($array)[0] !== 0; } private function decodeReserved($string) { return str_replace(self::$delimsPct, self::$delims, $string); } }