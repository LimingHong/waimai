<?php
 goto ChnZG; J1iv0: class Prpcrypt { public $key; function __construct($k) { $this->key = base64_decode($k . "\75"); } function Prpcrypt($k) { $this->key = base64_decode($k . "\x3d"); } public function encrypt($text, $appid) { try { goto Q4QlY; Q4QlY: $random = $this->getRandomStr(); goto uHlLD; tEDLW: $size = mcrypt_get_block_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC); goto Fg9FZ; a2BXu: $text = $pkc_encoder->encode($text); goto qqfq4; f4551: $pkc_encoder = new PKCS7Encoder(); goto a2BXu; qqfq4: mcrypt_generic_init($module, $this->key, $iv); goto PUA8U; rny2N: mcrypt_generic_deinit($module); goto lDYKd; Fg9FZ: $module = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', MCRYPT_MODE_CBC, ''); goto Jalxt; Jalxt: $iv = substr($this->key, 0, 16); goto f4551; KSq3d: return array(ErrorCode::$OK, base64_encode($encrypted)); goto q4fWZ; lDYKd: mcrypt_module_close($module); goto KSq3d; PUA8U: $encrypted = mcrypt_generic($module, $text); goto rny2N; uHlLD: $text = $random . pack("\x4e", strlen($text)) . $text . $appid; goto tEDLW; q4fWZ: } catch (Exception $e) { return array(ErrorCode::$EncryptAESError, null); } } public function decrypt($encrypted, $appid) { goto tAGza; fpHsy: abd2T: goto i_UWu; tAGza: try { goto iT2Ay; H2gXG: mcrypt_module_close($module); goto UGIV_; O3fFA: $module = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', MCRYPT_MODE_CBC, ''); goto psuQ0; iT2Ay: $ciphertext_dec = base64_decode($encrypted); goto O3fFA; THLZ0: $decrypted = mdecrypt_generic($module, $ciphertext_dec); goto CakZQ; xI9Mn: mcrypt_generic_init($module, $this->key, $iv); goto THLZ0; psuQ0: $iv = substr($this->key, 0, 16); goto xI9Mn; CakZQ: mcrypt_generic_deinit($module); goto H2gXG; UGIV_: } catch (Exception $e) { return array(ErrorCode::$DecryptAESError, null); } goto LDdlQ; I_bL1: return array(ErrorCode::$ValidateAppidError, null); goto fpHsy; i_UWu: return array(0, $xml_content); goto IdNQg; U7QvU: if (!($from_appid != $appid)) { goto abd2T; } goto I_bL1; LDdlQ: try { goto W_Hhx; FY4db: LWl8C: goto cHku9; oQrz0: $len_list = unpack("\x4e", substr($content, 0, 4)); goto bJO1v; UkyXg: $result = $pkc_encoder->decode($decrypted); goto BhaZh; cHku9: $content = substr($result, 16, strlen($result)); goto oQrz0; lyBrz: $from_appid = substr($content, $xml_len + 4); goto VCBNT; BhaZh: if (!(strlen($result) < 16)) { goto LWl8C; } goto lb1dA; bJO1v: $xml_len = $len_list[1]; goto BOSe1; BOSe1: $xml_content = substr($content, 4, $xml_len); goto lyBrz; lb1dA: return ''; goto FY4db; W_Hhx: $pkc_encoder = new PKCS7Encoder(); goto UkyXg; VCBNT: } catch (Exception $e) { return array(ErrorCode::$IllegalBuffer, null); } goto U7QvU; IdNQg: } function getRandomStr() { goto c6NWY; I1n_W: if (!($i < 16)) { goto Qo9D0; } goto s0LRa; uQZN_: $max = strlen($str_pol) - 1; goto FMB1z; HSBni: TakzD: goto I1n_W; ZeM9x: $i++; goto loGdo; ZDpXv: Vc6jD: goto ZeM9x; uzRIO: Qo9D0: goto kaz63; s0LRa: $str .= $str_pol[mt_rand(0, $max)]; goto ZDpXv; loGdo: goto TakzD; goto uzRIO; c6NWY: $str = ''; goto RZv48; kaz63: return $str; goto iks8l; FMB1z: $i = 0; goto HSBni; RZv48: $str_pol = "\101\x42\x43\x44\x45\x46\107\110\111\x4a\113\x4c\115\116\x4f\120\x51\122\123\x54\x55\126\127\x58\x59\132\60\61\62\63\x34\x35\x36\67\70\x39\141\142\x63\144\145\x66\147\x68\x69\152\x6b\x6c\155\x6e\x6f\x70\x71\162\x73\x74\165\166\167\x78\171\172"; goto uQZN_; iks8l: } } goto iZ1YU; ENTjK: class PKCS7Encoder { public static $block_size = 32; function encode($text) { goto caUwY; aLDqA: $index = 0; goto oXeqw; Kl0W0: bElGs: goto O817b; DW1pk: $amount_to_pad = PKCS7Encoder::block_size; goto Kl0W0; oAMgI: if (!($index < $amount_to_pad)) { goto GGUpd; } goto JkQD7; O817b: $pad_chr = chr($amount_to_pad); goto FdgdU; zZ1Nx: $amount_to_pad = PKCS7Encoder::$block_size - $text_length % PKCS7Encoder::$block_size; goto S_8f1; N8d1h: $text_length = strlen($text); goto zZ1Nx; TLkMb: $index++; goto AScds; AScds: goto pmOr9; goto O9w1u; caUwY: $block_size = PKCS7Encoder::$block_size; goto N8d1h; FdgdU: $tmp = ''; goto aLDqA; YrA8r: return $text . $tmp; goto yCX5q; aGlxv: FEEWu: goto TLkMb; JkQD7: $tmp .= $pad_chr; goto aGlxv; S_8f1: if (!($amount_to_pad == 0)) { goto bElGs; } goto DW1pk; O9w1u: GGUpd: goto YrA8r; oXeqw: pmOr9: goto oAMgI; yCX5q: } function decode($text) { goto qJIj9; qJIj9: $pad = ord(substr($text, -1)); goto dFFqx; t2Oz9: $pad = 0; goto z9Rwi; z9Rwi: qCQ8K: goto PKMNN; PKMNN: return substr($text, 0, strlen($text) - $pad); goto bSxFr; dFFqx: if (!($pad < 1 || $pad > PKCS7Encoder::$block_size)) { goto qCQ8K; } goto t2Oz9; bSxFr: } } goto J1iv0; ChnZG: class Wechat { const MSGTYPE_TEXT = "\x74\145\x78\164"; const MSGTYPE_IMAGE = "\x69\155\x61\147\x65"; const MSGTYPE_LOCATION = "\154\157\143\x61\164\151\157\156"; const MSGTYPE_LINK = "\x6c\x69\x6e\153"; const MSGTYPE_EVENT = "\145\166\x65\x6e\164"; const MSGTYPE_MUSIC = "\155\x75\x73\151\x63"; const MSGTYPE_NEWS = "\156\x65\x77\163"; const MSGTYPE_VOICE = "\166\x6f\x69\143\x65"; const MSGTYPE_VIDEO = "\166\x69\x64\x65\x6f"; const EVENT_SUBSCRIBE = "\x73\165\x62\x73\143\x72\x69\142\145"; const EVENT_UNSUBSCRIBE = "\165\156\x73\x75\x62\163\x63\x72\x69\x62\145"; const EVENT_LOCATION = "\114\117\x43\x41\124\x49\117\116"; const EVENT_ENTER_AGENT = "\145\156\x74\145\162\137\141\x67\145\x6e\164"; const EVENT_MENU_VIEW = "\x56\x49\105\x57"; const EVENT_MENU_CLICK = "\103\114\x49\x43\x4b"; const EVENT_MENU_SCAN_PUSH = "\163\143\x61\x6e\x63\157\144\x65\137\x70\x75\x73\150"; const EVENT_MENU_SCAN_WAITMSG = "\x73\143\141\156\x63\157\x64\x65\137\167\x61\151\164\x6d\163\x67"; const EVENT_MENU_PIC_SYS = "\160\x69\x63\137\163\171\x73\160\x68\x6f\x74\x6f"; const EVENT_MENU_PIC_PHOTO = "\x70\151\x63\137\160\150\x6f\x74\157\x5f\157\162\137\x61\x6c\x62\165\x6d"; const EVENT_MENU_PIC_WEIXIN = "\x70\151\x63\137\167\x65\151\x78\x69\x6e"; const EVENT_MENU_LOCATION = "\x6c\x6f\x63\x61\x74\x69\157\156\137\x73\x65\154\x65\143\164"; const EVENT_SEND_MASS = "\x4d\101\x53\x53\123\x45\116\104\x4a\x4f\x42\x46\x49\116\111\x53\x48"; const EVENT_SEND_TEMPLATE = "\124\105\115\120\114\101\x54\x45\123\105\x4e\104\112\x4f\102\106\111\116\111\x53\x48"; const API_URL_PREFIX = "\150\x74\164\160\163\72\57\57\x71\x79\x61\160\151\56\167\x65\151\x78\151\x6e\56\161\x71\x2e\143\x6f\x6d\x2f\143\147\x69\55\x62\151\156"; const USER_CREATE_URL = "\x2f\x75\163\145\x72\57\x63\x72\145\141\164\x65\77"; const USER_UPDATE_URL = "\57\165\163\145\162\57\x75\160\144\141\x74\x65\77"; const USER_DELETE_URL = "\x2f\x75\x73\145\162\57\144\145\154\145\x74\x65\x3f"; const USER_BATCHDELETE_URL = "\x2f\165\163\x65\162\57\x62\141\x74\143\150\x64\145\x6c\x65\164\145\x3f"; const USER_GET_URL = "\x2f\x75\x73\x65\162\57\147\x65\164\77"; const USER_LIST_URL = "\57\x75\163\145\x72\x2f\x73\151\x6d\x70\x6c\x65\154\x69\163\x74\x3f"; const USER_LIST_INFO_URL = "\x2f\165\x73\x65\162\57\154\151\x73\164\77"; const USER_GETINFO_URL = "\x2f\165\163\x65\162\57\147\145\164\x75\x73\x65\x72\151\156\146\x6f\x3f"; const USER_INVITE_URL = "\x2f\x69\x6e\166\x69\x74\x65\x2f\163\x65\x6e\144\x3f"; const DEPARTMENT_CREATE_URL = "\x2f\x64\145\x70\x61\162\164\155\x65\x6e\164\x2f\x63\x72\x65\141\x74\145\77"; const DEPARTMENT_UPDATE_URL = "\57\144\x65\160\141\x72\164\x6d\x65\156\164\57\165\160\144\141\x74\x65\77"; const DEPARTMENT_DELETE_URL = "\57\x64\x65\x70\x61\162\164\x6d\x65\x6e\164\57\144\x65\x6c\x65\x74\145\x3f"; const DEPARTMENT_MOVE_URL = "\x2f\144\x65\160\141\162\164\x6d\x65\x6e\x74\57\x6d\x6f\166\x65\x3f"; const DEPARTMENT_LIST_URL = "\57\x64\145\x70\x61\162\164\155\x65\156\164\x2f\154\151\163\164\77"; const TAG_CREATE_URL = "\57\164\x61\147\57\x63\162\x65\x61\164\145\x3f"; const TAG_UPDATE_URL = "\57\164\x61\147\57\165\160\144\141\x74\145\77"; const TAG_DELETE_URL = "\x2f\x74\x61\147\x2f\144\x65\x6c\x65\x74\x65\77"; const TAG_GET_URL = "\57\x74\x61\x67\x2f\x67\x65\164\x3f"; const TAG_ADDUSER_URL = "\x2f\x74\x61\x67\57\x61\144\x64\x74\141\147\x75\163\x65\x72\x73\x3f"; const TAG_DELUSER_URL = "\x2f\164\141\147\57\144\145\x6c\x74\141\x67\x75\x73\x65\x72\x73\x3f"; const TAG_LIST_URL = "\x2f\164\141\147\57\154\x69\x73\164\x3f"; const MEDIA_UPLOAD_URL = "\x2f\x6d\x65\144\x69\x61\57\x75\x70\x6c\x6f\x61\x64\77"; const MEDIA_GET_URL = "\57\155\x65\144\x69\x61\x2f\x67\145\164\77"; const AUTHSUCC_URL = "\57\165\163\145\x72\x2f\x61\x75\164\150\163\165\143\x63\x3f"; const MASS_SEND_URL = "\x2f\155\145\163\x73\141\147\x65\x2f\x73\145\x6e\144\x3f"; const MENU_CREATE_URL = "\57\155\145\156\x75\57\x63\162\x65\x61\x74\x65\77"; const MENU_GET_URL = "\57\x6d\145\156\165\57\147\145\164\x3f"; const MENU_DELETE_URL = "\57\x6d\x65\x6e\165\57\x64\145\154\145\x74\x65\77"; const TOKEN_GET_URL = "\57\147\x65\x74\x74\157\x6b\145\156\77"; const TICKET_GET_URL = "\x2f\x67\x65\x74\137\x6a\163\141\x70\151\x5f\164\151\143\153\145\x74\x3f"; const CALLBACKSERVER_GET_URL = "\x2f\147\145\164\x63\141\x6c\154\142\141\143\x6b\x69\x70\x3f"; const OAUTH_PREFIX = "\150\164\164\x70\163\72\x2f\57\157\x70\145\x6e\x2e\167\x65\x69\170\151\156\x2e\161\161\x2e\x63\157\155\57\x63\157\156\156\145\x63\164\x2f\157\141\165\164\150\x32"; const OAUTH_AUTHORIZE_URL = "\57\141\x75\x74\150\x6f\x72\151\x7a\x65\77"; private $token; private $encodingAesKey; private $appid; private $appsecret; private $access_token; private $agentid; private $postxml; private $agentidxml; private $_msg; private $_receive; private $_sendmsg; private $_text_filter = true; public $debug = false; public $errCode = 40001; public $errMsg = "\x6e\x6f\x20\141\x63\143\x65\x73\x73"; public $logcallback; public function __construct($options) { goto vyMIq; KQTAf: $this->agentid = isset($options["\141\x67\x65\x6e\x74\x69\x64"]) ? $options["\141\147\145\x6e\164\x69\144"] : ''; goto rCqOG; vyMIq: $this->token = isset($options["\164\x6f\x6b\145\156"]) ? $options["\x74\x6f\153\145\156"] : ''; goto Mpccv; Mpccv: $this->encodingAesKey = isset($options["\x65\x6e\143\x6f\144\x69\x6e\147\x61\x65\x73\153\x65\x79"]) ? $options["\x65\156\x63\x6f\x64\x69\156\x67\x61\145\x73\x6b\x65\x79"] : ''; goto ltn5t; QcxVH: $this->logcallback = isset($options["\154\157\x67\x63\x61\x6c\154\142\x61\x63\153"]) ? $options["\x6c\x6f\x67\143\141\x6c\154\142\141\x63\153"] : false; goto hakeO; rCqOG: $this->debug = isset($options["\x64\145\x62\x75\x67"]) ? $options["\x64\145\142\165\x67"] : false; goto QcxVH; XlPUa: $this->appsecret = isset($options["\141\160\x70\163\145\143\162\145\x74"]) ? $options["\x61\160\160\163\145\143\x72\145\164"] : ''; goto KQTAf; ltn5t: $this->appid = isset($options["\x61\160\x70\151\x64"]) ? $options["\141\x70\160\x69\x64"] : ''; goto XlPUa; hakeO: } protected function log($log) { goto cOnd8; cOnd8: if (!($this->debug && function_exists($this->logcallback))) { goto mfch3; } goto arY0t; co4px: $log = print_r($log, true); goto Lh4fc; Lh4fc: RwH3h: goto iSd5P; arY0t: if (!is_array($log)) { goto RwH3h; } goto co4px; m5rmc: mfch3: goto jzcnF; iSd5P: return call_user_func($this->logcallback, $log); goto m5rmc; jzcnF: } public static function data_to_xml($data) { goto SVTXJ; xYHOg: bYMCv: goto a4NhZ; Mnhut: foreach ($data as $key => $val) { goto K4SfB; W72Zw: yR0qG: goto te7Nk; gGRQH: $xml .= is_array($val) || is_object($val) ? self::data_to_xml($val) : self::xmlSafeStr($val); goto vXqcj; K4SfB: is_numeric($key) && ($key = "\x69\x74\145\155\x20\151\x64\x3d\x22{$key}\x22"); goto sq0iK; r8KKd: $xml .= "\74\x2f{$key}\x3e"; goto W72Zw; sq0iK: $xml .= "\x3c{$key}\x3e"; goto gGRQH; vXqcj: list($key, ) = explode("\40", $key); goto r8KKd; te7Nk: } goto xYHOg; a4NhZ: return $xml; goto PZg52; SVTXJ: $xml = ''; goto Mnhut; PZg52: } public static function xmlSafeStr($str) { return "\x3c\x21\133\103\104\101\x54\x41\x5b" . preg_replace("\x2f\133\x5c\x78\60\60\55\x5c\170\60\70\134\x78\x30\142\55\134\x78\60\143\134\x78\60\x65\55\x5c\x78\x31\x66\135\x2f", '', $str) . "\135\135\76"; } public function xml_encode($data, $root = "\170\155\154", $item = "\x69\164\145\155", $attr = '', $id = "\151\x64", $encoding = "\165\164\x66\55\70") { goto chsHb; ly4gi: $attr = implode("\40", $_attr); goto YG7Cc; DThh9: $attr = empty($attr) ? '' : "\40{$attr}"; goto pktTq; YG7Cc: lkRyR: goto JJow6; chsHb: if (!is_array($attr)) { goto lkRyR; } goto l0nJ1; JJow6: $attr = trim($attr); goto DThh9; pktTq: $xml = "\74{$root}{$attr}\x3e"; goto zuG4O; q11Lw: $xml .= "\x3c\x2f{$root}\76"; goto Vi0zQ; JMSsl: ucG0G: goto ly4gi; f7IGQ: foreach ($attr as $key => $value) { $_attr[] = "{$key}\75\x22{$value}\42"; tdf0z: } goto JMSsl; Vi0zQ: return $xml; goto YzDeM; l0nJ1: $_attr = array(); goto f7IGQ; zuG4O: $xml .= self::data_to_xml($data, $item, $id); goto q11Lw; YzDeM: } static function json_encode($arr) { goto uRExX; dT7jt: return "\x5b" . $json . "\135"; goto s_v2r; VWxAB: oX1JM: goto XFHMO; s_v2r: LYzN7: goto Pv5Rg; DChm3: $i++; goto ngytV; zv2Or: $is_list = true; goto Ka4Ep; u0PlB: $keys = array_keys($arr); goto KvPpf; HzMLQ: dxW3Y: goto VWxAB; pODq1: goto dxW3Y; goto XsZS6; ngytV: goto P7EQK; goto HzMLQ; vx29e: $is_list = false; goto pODq1; uRExX: $parts = array(); goto YRc40; hKK2b: CFz0D: goto DChm3; m5J08: JE8Ds: goto S7vPq; mBlDs: P7EQK: goto C_hkU; Ka4Ep: $i = 0; goto mBlDs; KvPpf: $max_length = count($arr) - 1; goto g8vik; ZpRav: if (!($i != $keys[$i])) { goto QtOpn; } goto vx29e; Pv5Rg: return "\x7b" . $json . "\x7d"; goto alw_a; XFHMO: foreach ($arr as $key => $value) { goto MLnsB; ojYfF: goto jXMEh; goto hrtQS; EhuDX: FOt8L: goto S2u3g; yVL4C: if ($is_list) { goto HtOCZ; } goto spP1V; qoL58: goto acqHC; goto AWyjb; h4TKM: $str = ''; goto duUCY; zke48: $str .= "\164\x72\x75\x65"; goto a951q; fkxr6: $str .= "\42" . addslashes($value) . "\42"; goto GMFcJ; hrtQS: ziMRW: goto zke48; JvplZ: gO8Ml: goto lWcnz; VrEpc: goto jXMEh; goto EhuDX; lWcnz: $str .= $value; goto VrEpc; duUCY: if ($is_list) { goto xf9pe; } goto xuo3z; oejUc: if ($value === true) { goto ziMRW; } goto fkxr6; FV8Av: if (!is_string($value) && is_numeric($value) && $value < 2000000000) { goto gO8Ml; } goto RXhcW; qdwcr: xf9pe: goto FV8Av; L8GH4: $parts[] = self::json_encode($value); goto clEe9; spP1V: $parts[] = "\x22" . $key . "\x22\72" . self::json_encode($value); goto qoL58; a951q: jXMEh: goto QpjOd; GMFcJ: goto jXMEh; goto JvplZ; PAzhl: goto Mseb2; goto Pq8zu; MLnsB: if (is_array($value)) { goto u9L26; } goto h4TKM; AWyjb: HtOCZ: goto L8GH4; QpjOd: $parts[] = $str; goto PAzhl; xuo3z: $str = "\42" . $key . "\x22\72"; goto qdwcr; clEe9: acqHC: goto nlUej; Pq8zu: u9L26: goto yVL4C; nlUej: Mseb2: goto WrJ6V; WrJ6V: X2_8Y: goto nRc4P; RXhcW: if ($value === false) { goto FOt8L; } goto oejUc; S2u3g: $str .= "\146\141\154\x73\x65"; goto ojYfF; nRc4P: } goto m5J08; C_hkU: if (!($i < count($keys))) { goto dxW3Y; } goto ZpRav; g8vik: if (!($keys[0] === 0 && $keys[$max_length] === $max_length)) { goto oX1JM; } goto zv2Or; YRc40: $is_list = false; goto u0PlB; CqK83: if (!$is_list) { goto LYzN7; } goto dT7jt; XsZS6: QtOpn: goto hKK2b; S7vPq: $json = implode("\x2c", $parts); goto CqK83; alw_a: } private function _auto_text_filter($text) { goto tAApk; uklHd: xfnZZ: goto d6G4u; tAApk: if ($this->_text_filter) { goto xfnZZ; } goto ab__Z; ab__Z: return $text; goto uklHd; d6G4u: return str_replace("\15\xa", "\xa", $text); goto Tgjt7; Tgjt7: } private function http_get($url) { goto HN2fy; uProp: $sContent = curl_exec($oCurl); goto uImxp; lfRom: return $sContent; goto d2a4n; CZJQ1: FUBr7: goto lfRom; W_00b: curl_setopt($oCurl, CURLOPT_RETURNTRANSFER, 1); goto uProp; lUWIa: if (intval($aStatus["\150\x74\164\160\x5f\143\x6f\144\145"]) == 200) { goto FUBr7; } goto N7qep; jNAI6: goto kpIQZ; goto CZJQ1; gpz_7: curl_setopt($oCurl, CURLOPT_SSL_VERIFYHOST, FALSE); goto u5__X; HN2fy: $oCurl = curl_init(); goto KYEqh; rNFhb: curl_close($oCurl); goto lUWIa; u5__X: curl_setopt($oCurl, CURLOPT_SSLVERSION, 1); goto Bqo6F; Bqo6F: XMQgU: goto zYvP3; d2a4n: kpIQZ: goto Php2U; uImxp: $aStatus = curl_getinfo($oCurl); goto rNFhb; zYvP3: curl_setopt($oCurl, CURLOPT_URL, $url); goto W_00b; Fjthy: curl_setopt($oCurl, CURLOPT_SSL_VERIFYPEER, FALSE); goto gpz_7; KYEqh: if (!(stripos($url, "\150\164\x74\160\x73\72\57\x2f") !== FALSE)) { goto XMQgU; } goto Fjthy; N7qep: return false; goto jNAI6; Php2U: } private function http_post($url, $param, $post_file = false) { goto lJwn2; H3d47: curl_setopt($oCurl, CURLOPT_SSL_VERIFYPEER, FALSE); goto CqdOL; N_A_l: SWPmq: goto EPCw3; PXOb8: $aStatus = curl_getinfo($oCurl); goto zHSY7; lJwn2: $oCurl = curl_init(); goto tmgaX; HT1nP: Zbw1O: goto eprKE; n9NxR: curl_setopt($oCurl, CURLOPT_POST, true); goto jVBbH; Q3yR3: $sContent = curl_exec($oCurl); goto PXOb8; RlDII: CO7P6: goto Hyi2z; ycdT7: curl_setopt($oCurl, CURLOPT_URL, $url); goto kOlx7; SneEJ: $aPOST = array(); goto T3X6V; IWV8Y: $strPOST = join("\46", $aPOST); goto pEx6B; T3X6V: foreach ($param as $key => $val) { $aPOST[] = $key . "\75" . urlencode($val); qlZiw: } goto oOgrG; tmgaX: if (!(stripos($url, "\x68\x74\x74\x70\163\72\57\x2f") !== FALSE)) { goto Zbw1O; } goto H3d47; eprKE: if (is_string($param) || $post_file) { goto a_HqO; } goto SneEJ; kdrA8: goto CO7P6; goto N_A_l; VvG9F: a_HqO: goto piuTk; kOlx7: curl_setopt($oCurl, CURLOPT_RETURNTRANSFER, 1); goto n9NxR; pEx6B: goto DJKb0; goto VvG9F; voYV7: curl_setopt($oCurl, CURLOPT_SSLVERSION, 1); goto HT1nP; XR4_e: DJKb0: goto ycdT7; OEfth: return false; goto kdrA8; jVBbH: curl_setopt($oCurl, CURLOPT_POSTFIELDS, $strPOST); goto Q3yR3; oOgrG: odjVa: goto IWV8Y; piuTk: $strPOST = $param; goto XR4_e; CqdOL: curl_setopt($oCurl, CURLOPT_SSL_VERIFYHOST, false); goto voYV7; zHSY7: curl_close($oCurl); goto Q9V73; EPCw3: return $sContent; goto RlDII; Q9V73: if (intval($aStatus["\150\164\164\x70\x5f\x63\157\144\145"]) == 200) { goto SWPmq; } goto OEfth; Hyi2z: } private function checkSignature($str) { goto o7tqO; FWGfZ: if ($shaStr == $signature) { goto pAmJ7; } goto E43J1; hswjy: return true; goto Ok1Pu; y88IB: $timestamp = isset($_GET["\164\x69\x6d\145\x73\164\x61\x6d\160"]) ? $_GET["\164\x69\155\x65\163\164\141\155\x70"] : ''; goto NxzzW; QTMp3: pAmJ7: goto hswjy; A9ciN: $shaStr = sha1($tmpStr); goto FWGfZ; gaRX1: goto LX3n0; goto QTMp3; o7tqO: $signature = isset($_GET["\x6d\163\x67\137\x73\151\x67\x6e\141\164\x75\162\x65"]) ? $_GET["\x6d\x73\x67\x5f\163\x69\147\x6e\141\164\165\162\145"] : ''; goto y88IB; FvjTD: $tmpArr = array($str, $this->token, $timestamp, $nonce); goto CbiJ5; Ok1Pu: LX3n0: goto Hm2pn; CbiJ5: sort($tmpArr, SORT_STRING); goto d0pzv; d0pzv: $tmpStr = implode($tmpArr); goto A9ciN; NxzzW: $nonce = isset($_GET["\156\157\156\143\x65"]) ? $_GET["\156\157\156\143\x65"] : ''; goto FvjTD; E43J1: return false; goto gaRX1; Hm2pn: } public function valid($return = false) { goto Mn9lF; SYcGd: tFT2D: goto n3UFo; L6EJt: $encryptStr = $array["\x45\156\143\x72\x79\160\164"]; goto GJnSA; nSsqq: mS4Z1: goto e84HJ; y0JJF: if (!$return) { goto tFT2D; } goto XohKY; Mn9lF: $encryptStr = ''; goto vPtIX; ZdhFx: goto gtJ70; goto SYcGd; sKrBN: return false; goto UM2VY; e84HJ: aSdd9: goto lj4HR; cFItc: TanjC: goto Eosts; Hp0gD: gtJ70: goto PWr0Y; x3GYF: goto mS4Z1; goto PDA9h; Z1ehN: $pc = new Prpcrypt($this->encodingAesKey); goto jHz64; n3UFo: die("\x6e\157\40\141\x63\x63\x65\163\163"); goto Hp0gD; jHz64: $array = $pc->decrypt($encryptStr, $this->appid); goto eeO4a; uFtr6: $this->log($postStr); goto QBTUT; H9FWT: goto KWpc2; goto EBOMc; tipPI: $array = (array) simplexml_load_string($postStr, "\x53\x69\155\x70\x6c\145\x58\x4d\114\105\154\x65\155\x65\156\x74", LIBXML_NOCDATA); goto uFtr6; QBTUT: if (!isset($array["\105\x6e\x63\x72\x79\160\x74"])) { goto Oqers; } goto L6EJt; EBOMc: LEWFb: goto QW3qs; ZVQIM: goto ia_Vz; goto cFItc; Eosts: $postStr = file_get_contents("\160\150\160\72\57\57\x69\156\160\165\164"); goto tipPI; DlDbQ: if (!(!isset($ret) || !$ret)) { goto q68Eg; } goto y0JJF; TL7Mc: return false; goto x3GYF; XohKY: return false; goto ZdhFx; G83yk: goto XZRUJ; goto jvaeL; Ltjov: return $this->postxml != ''; goto UTVtL; GJnSA: $this->agentidxml = isset($array["\101\x67\x65\156\164\x49\x44"]) ? $array["\101\x67\145\156\x74\x49\x44"] : ''; goto O_lGT; Vu7_9: KWpc2: goto G83yk; LlLKu: $this->postxml = $array[1]; goto Ltjov; t46ef: if (!$encryptStr) { goto j6_Ht; } goto RbDCK; RbDCK: $ret = $this->checkSignature($encryptStr); goto zk7sP; EXQnb: $echoStr = $array[1]; goto ehiGI; DFLlg: if (!$return) { goto MBSaG; } goto TL7Mc; QW3qs: return $echoStr; goto Vu7_9; PgfLm: $encryptStr = isset($_GET["\145\x63\150\157\x73\164\162"]) ? $_GET["\145\x63\x68\157\x73\164\162"] : ''; goto ZVQIM; PWr0Y: q68Eg: goto Z1ehN; hI3eq: die($echoStr); goto H9FWT; eeO4a: if (!(!isset($array[0]) || $array[0] != 0)) { goto aSdd9; } goto DFLlg; lj4HR: if ($_SERVER["\122\105\121\125\x45\x53\x54\137\115\x45\x54\x48\x4f\x44"] == "\x50\x4f\123\x54") { goto MgpVz; } goto EXQnb; jvaeL: MgpVz: goto LlLKu; rF_Xl: ia_Vz: goto t46ef; PDA9h: MBSaG: goto lClci; lClci: die("\xe8\xa7\xa3\xe5\257\206\345\244\261\xe8\xb4\245\357\274\201"); goto nSsqq; ehiGI: if ($return) { goto LEWFb; } goto hI3eq; O_lGT: Oqers: goto rF_Xl; UTVtL: XZRUJ: goto sKrBN; zk7sP: j6_Ht: goto DlDbQ; vPtIX: if ($_SERVER["\122\x45\121\125\105\x53\x54\137\x4d\x45\124\x48\x4f\x44"] == "\120\117\123\x54") { goto TanjC; } goto PgfLm; UM2VY: } public function getRev() { goto OA5sD; tM1Qv: $this->log($postStr); goto nS4el; eMevj: return $this; goto p1X1u; Tph8Z: return $this; goto LnX6Y; p1X1u: lIofq: goto Zxp2X; gcFGZ: if (isset($this->_receive["\101\147\145\x6e\164\111\104"])) { goto OdzjF; } goto fMFxF; OA5sD: if (!$this->_receive) { goto lIofq; } goto eMevj; fMFxF: $this->_receive["\101\147\x65\156\164\x49\x44"] = $this->agentidxml; goto wqiAP; jUfh6: $this->_receive = (array) simplexml_load_string($postStr, "\x53\x69\155\x70\x6c\145\130\x4d\114\105\154\145\x6d\x65\x6e\164", LIBXML_NOCDATA); goto gcFGZ; wqiAP: OdzjF: goto MFHVF; MFHVF: YKuS1: goto Tph8Z; nS4el: if (empty($postStr)) { goto YKuS1; } goto jUfh6; Zxp2X: $postStr = $this->postxml; goto tM1Qv; LnX6Y: } public function getRevData() { return $this->_receive; } public function getRevPostXml() { return $this->postxml; } public function getRevFrom() { goto kqJ9R; GdbeX: goto LpwVn; goto Nl1fj; Nl1fj: zwRiH: goto mejdq; bwfB0: return false; goto GdbeX; mejdq: return $this->_receive["\x46\x72\157\x6d\x55\163\145\x72\x4e\x61\155\x65"]; goto PL6eO; kqJ9R: if (isset($this->_receive["\106\x72\157\155\x55\163\145\162\x4e\141\x6d\145"])) { goto zwRiH; } goto bwfB0; PL6eO: LpwVn: goto WLzJG; WLzJG: } public function getRevTo() { goto B19Yk; GaNez: P_Lfe: goto YmDmv; ERbzc: return $this->_receive["\124\x6f\x55\x73\145\x72\116\x61\155\x65"]; goto GaNez; V96Cd: goto P_Lfe; goto mVdMo; mVdMo: wkaB4: goto ERbzc; dPns4: return false; goto V96Cd; B19Yk: if (isset($this->_receive["\x54\x6f\x55\163\x65\x72\116\141\x6d\145"])) { goto wkaB4; } goto dPns4; YmDmv: } public function getRevAgentID() { goto ZIIHi; m3Zne: goto Eoj3Q; goto i9QJh; i9QJh: NUIG6: goto mVTH7; ZIIHi: if (isset($this->_receive["\x41\147\145\x6e\164\111\x44"])) { goto NUIG6; } goto wyIxp; wyIxp: return false; goto m3Zne; mVTH7: return $this->_receive["\101\x67\x65\x6e\164\x49\104"]; goto r1Lv5; r1Lv5: Eoj3Q: goto xW4oQ; xW4oQ: } public function getRevType() { goto wWKfU; gm0m0: goto AJSa_; goto JC4SV; h1RrJ: AJSa_: goto HIqBK; JC4SV: b_37V: goto eb_6q; wWKfU: if (isset($this->_receive["\x4d\163\x67\124\x79\x70\x65"])) { goto b_37V; } goto lsEAj; lsEAj: return false; goto gm0m0; eb_6q: return $this->_receive["\115\x73\x67\124\171\160\x65"]; goto h1RrJ; HIqBK: } public function getRevID() { goto fh5Up; fh5Up: if (isset($this->_receive["\115\163\147\111\x64"])) { goto tav0b; } goto Z07wS; bwMBL: return $this->_receive["\115\163\147\111\144"]; goto z5336; DCdOb: goto p_zyF; goto XAPa5; XAPa5: tav0b: goto bwMBL; z5336: p_zyF: goto Ovo3Q; Z07wS: return false; goto DCdOb; Ovo3Q: } public function getRevCtime() { goto QMAey; J33Ax: R2O0C: goto BW7MZ; gR1ch: cO0K5: goto LDGtc; u2lbm: return false; goto H0kYa; QMAey: if (isset($this->_receive["\x43\x72\x65\141\x74\x65\x54\151\155\145"])) { goto R2O0C; } goto u2lbm; H0kYa: goto cO0K5; goto J33Ax; BW7MZ: return $this->_receive["\103\162\145\141\164\145\124\151\155\x65"]; goto gR1ch; LDGtc: } public function getRevContent() { goto K3BA1; qyTZK: return $this->_receive["\x43\x6f\x6e\x74\x65\156\x74"]; goto k1_w4; K3BA1: if (isset($this->_receive["\103\x6f\x6e\x74\145\x6e\x74"])) { goto CrKxf; } goto OOcZo; AnlqV: CrKxf: goto qyTZK; OOcZo: return false; goto dNMy7; k1_w4: gXaJ3: goto Vpbft; dNMy7: goto gXaJ3; goto AnlqV; Vpbft: } public function getRevPic() { goto tnVOY; tnVOY: if (isset($this->_receive["\x50\151\143\125\x72\154"])) { goto v5aYD; } goto YdLKL; YdLKL: return false; goto cI7HF; cI7HF: goto bcURJ; goto er8s2; ELFFK: bcURJ: goto x03Ja; er8s2: v5aYD: goto NF3BY; NF3BY: return array("\155\x65\144\x69\141\x69\144" => $this->_receive["\115\x65\144\x69\141\x49\x64"], "\160\151\143\x75\x72\154" => (string) $this->_receive["\x50\151\143\x55\162\x6c"]); goto ELFFK; x03Ja: } public function getRevGeo() { goto OvmxJ; B22Xr: goto BMVlY; goto Zjsoj; PU22A: return false; goto B22Xr; y4eG2: BMVlY: goto gNgz_; OvmxJ: if (isset($this->_receive["\x4c\x6f\143\x61\x74\151\157\156\x5f\130"])) { goto uepKm; } goto PU22A; jfEz0: return array("\170" => $this->_receive["\x4c\157\143\141\164\151\x6f\x6e\137\x58"], "\x79" => $this->_receive["\x4c\157\x63\141\x74\x69\x6f\156\x5f\x59"], "\163\x63\141\154\145" => (string) $this->_receive["\123\x63\x61\x6c\x65"], "\x6c\141\142\x65\154" => (string) $this->_receive["\114\x61\x62\145\154"]); goto y4eG2; Zjsoj: uepKm: goto jfEz0; gNgz_: } public function getRevEventGeo() { goto vBXlI; NsVsE: goto a5Hf1; goto bLJuW; NAEah: return false; goto NsVsE; Uqtvq: return array("\170" => $this->_receive["\x4c\141\164\x69\x74\165\x64\145"], "\x79" => $this->_receive["\x4c\157\156\x67\151\164\165\144\x65"], "\160\x72\x65\143\x69\163\151\x6f\156" => $this->_receive["\120\162\145\143\151\x73\151\157\156"]); goto Egt4L; vBXlI: if (isset($this->_receive["\114\x61\164\x69\164\x75\x64\145"])) { goto Cd6Rd; } goto NAEah; bLJuW: Cd6Rd: goto Uqtvq; Egt4L: a5Hf1: goto IX5kR; IX5kR: } public function getRevEvent() { goto Fxq90; rgMj5: RGz4x: goto j5pMW; QhNxH: aYgCG: goto UExjo; Fxq90: if (!isset($this->_receive["\105\166\x65\156\164"])) { goto RGz4x; } goto p7wuC; GCfdE: if (isset($array) && count($array) > 0) { goto sU8Ya; } goto oiRJ9; oiRJ9: return false; goto Yc2Qw; lfIYI: $array["\153\145\x79"] = $this->_receive["\x45\x76\x65\x6e\164\x4b\145\171"]; goto HLRxm; Yc2Qw: goto aYgCG; goto x0A7I; x0A7I: sU8Ya: goto rM_8R; j5pMW: if (!(isset($this->_receive["\105\x76\145\156\x74\113\x65\x79"]) && !empty($this->_receive["\105\x76\145\156\x74\113\x65\171"]))) { goto cs2Pd; } goto lfIYI; rM_8R: return $array; goto QhNxH; HLRxm: cs2Pd: goto GCfdE; p7wuC: $array["\145\x76\145\x6e\164"] = $this->_receive["\x45\x76\145\x6e\164"]; goto rgMj5; UExjo: } public function getRevScanInfo() { goto Be0hS; wSWLk: goto aOu3D; goto KWH2C; DdpI3: return false; goto w7f68; KWH2C: Xuhxm: goto ptT8j; f4UyA: if (isset($array) && count($array) > 0) { goto eJl26; } goto DdpI3; H2ABt: if (!is_array($this->_receive["\x53\145\x6e\144\x50\151\x63\163\111\156\x66\x6f"])) { goto Xuhxm; } goto T0GUp; ptT8j: $array = (array) $this->_receive["\x53\143\x61\x6e\103\157\x64\x65\x49\x6e\146\x6f"]; goto k_xLw; XPSYv: return $array; goto P76Ut; yVcu6: aOu3D: goto znmV2; P76Ut: ye2X7: goto d_4eB; k_xLw: $this->_receive["\123\x63\x61\x6e\x43\157\x64\145\111\x6e\146\157"] = $array; goto yVcu6; AXRGy: eJl26: goto XPSYv; znmV2: c87_m: goto f4UyA; Be0hS: if (!isset($this->_receive["\123\143\141\156\103\x6f\x64\x65\x49\x6e\146\x6f"])) { goto c87_m; } goto H2ABt; w7f68: goto ye2X7; goto AXRGy; T0GUp: $array = $this->_receive["\123\x63\141\156\x43\x6f\x64\145\x49\x6e\x66\x6f"]; goto wSWLk; d_4eB: } public function getRevSendPicsInfo() { goto FOYvo; e9575: d42Eg: goto mjRJy; WhKpx: foreach ($item as $key => $value) { $array["\x50\x69\143\x4c\151\x73\x74"]["\151\x74\x65\x6d"][$key] = (array) $value; JU7eU: } goto IS71V; PrjNK: $array["\120\151\x63\x4c\151\163\x74"] = (array) $array["\120\151\143\114\x69\163\164"]; goto SkEs6; YZHMh: if (isset($array) && count($array) > 0) { goto zAeuJ; } goto sWbhh; vguue: return $array; goto V2u5t; lNF5O: ZhQfz: goto pn9L6; sWbhh: return false; goto aUpt4; mjRJy: EiOsJ: goto YZHMh; IS71V: ujivI: goto lNF5O; SkEs6: $item = $array["\x50\x69\143\x4c\151\163\164"]["\151\x74\145\x6d"]; goto YZABm; AtgEf: goto d42Eg; goto U3H0T; V2u5t: cJlYT: goto K6BPw; XQU1c: if (!isset($array["\x50\x69\143\114\151\163\164"])) { goto ZhQfz; } goto PrjNK; YfkJE: zAeuJ: goto vguue; pn9L6: $this->_receive["\123\145\156\x64\x50\x69\143\163\111\x6e\146\x6f"] = $array; goto e9575; YZABm: $array["\120\x69\x63\114\151\163\x74"]["\x69\x74\x65\155"] = array(); goto WhKpx; aUpt4: goto cJlYT; goto YfkJE; U3H0T: KdQs2: goto VGRim; C519m: if (!is_array($this->_receive["\123\145\x6e\144\x50\x69\x63\x73\x49\156\x66\157"])) { goto KdQs2; } goto N3Wh4; FOYvo: if (!isset($this->_receive["\123\145\x6e\144\x50\151\x63\x73\x49\156\146\157"])) { goto EiOsJ; } goto C519m; VGRim: $array = (array) $this->_receive["\x53\x65\156\x64\x50\x69\x63\163\x49\x6e\x66\157"]; goto XQU1c; N3Wh4: $array = $this->_receive["\x53\145\156\x64\x50\x69\143\x73\x49\156\146\157"]; goto AtgEf; K6BPw: } public function getRevSendGeoInfo() { goto pNfo5; dlHxE: goto SoUZ9; goto ic8wb; Wo1dy: $array = $this->_receive["\x53\145\x6e\144\x4c\x6f\x63\141\164\151\157\156\x49\x6e\x66\x6f"]; goto dlHxE; fYu5Z: TeaUE: goto wTQz1; M_hjD: return false; goto FBdZX; hGsLA: if (isset($array) && count($array) > 0) { goto B4MMk; } goto M_hjD; wTQz1: if (!empty($array["\x4c\141\x62\x65\x6c"])) { goto nQZqr; } goto TXIPI; FBdZX: goto Jo1i2; goto qf81F; qf81F: B4MMk: goto l3urV; O7xbL: Q5tsC: goto hGsLA; IkfmC: SoUZ9: goto O7xbL; ZMPKy: $array = (array) $this->_receive["\123\145\156\144\114\157\x63\141\x74\x69\x6f\x6e\111\x6e\146\x6f"]; goto vkSkb; SZbHm: if (!is_array($this->_receive["\123\145\156\x64\x4c\x6f\x63\141\164\x69\x6f\156\111\x6e\146\157"])) { goto ZgCXS; } goto Wo1dy; vkSkb: if (!empty($array["\x50\157\x69\156\141\x6d\145"])) { goto TeaUE; } goto pJOpA; L4OPV: nQZqr: goto h1d0N; pNfo5: if (!isset($this->_receive["\x53\145\x6e\144\114\x6f\143\141\164\x69\x6f\x6e\111\x6e\146\x6f"])) { goto Q5tsC; } goto SZbHm; l3urV: return $array; goto M7_SO; TXIPI: $array["\x4c\x61\142\x65\154"] = ''; goto L4OPV; ic8wb: ZgCXS: goto ZMPKy; M7_SO: Jo1i2: goto izhra; h1d0N: $this->_receive["\x53\x65\156\144\x4c\157\143\x61\164\151\x6f\x6e\111\156\x66\x6f"] = $array; goto IkfmC; pJOpA: $array["\120\157\x69\x6e\x61\155\145"] = ''; goto fYu5Z; izhra: } public function getRevVoice() { goto LNzJa; rnJu_: return array("\x6d\x65\144\x69\141\x69\144" => $this->_receive["\x4d\145\144\x69\141\x49\x64"], "\x66\157\x72\x6d\141\164" => $this->_receive["\106\157\162\x6d\141\164"]); goto k_d5Z; RILWV: goto i3FIY; goto PoMaw; hC154: return false; goto RILWV; LNzJa: if (isset($this->_receive["\115\x65\x64\151\141\111\x64"])) { goto ZNv65; } goto hC154; k_d5Z: i3FIY: goto fPNNg; PoMaw: ZNv65: goto rnJu_; fPNNg: } public function getRevVideo() { goto XepGd; Z9U8a: URinS: goto PhS6N; OWIWz: J6OH9: goto FUmOQ; PhS6N: return array("\x6d\x65\x64\x69\141\151\144" => $this->_receive["\115\x65\144\x69\141\x49\144"], "\164\x68\x75\155\x62\155\x65\144\x69\x61\151\x64" => $this->_receive["\124\150\165\x6d\142\115\145\x64\151\x61\111\x64"]); goto OWIWz; b3vfi: goto J6OH9; goto Z9U8a; BqUGb: return false; goto b3vfi; XepGd: if (isset($this->_receive["\x4d\145\x64\x69\x61\x49\144"])) { goto URinS; } goto BqUGb; FUmOQ: } public function text($text = '') { goto fdmGM; fdmGM: $msg = array("\124\x6f\x55\163\145\x72\116\141\x6d\x65" => $this->getRevFrom(), "\x46\162\157\155\x55\163\x65\x72\x4e\x61\155\145" => $this->getRevTo(), "\x4d\163\147\x54\171\160\145" => self::MSGTYPE_TEXT, "\x43\157\x6e\164\145\x6e\x74" => $this->_auto_text_filter($text), "\103\x72\145\141\164\x65\124\x69\155\145" => time()); goto r12Lu; r12Lu: $this->Message($msg); goto uyfjp; uyfjp: return $this; goto zUdSH; zUdSH: } public function image($mediaid = '') { goto m1X90; m1X90: $msg = array("\124\157\x55\x73\145\162\x4e\x61\155\x65" => $this->getRevFrom(), "\x46\162\x6f\x6d\x55\x73\145\x72\x4e\141\155\145" => $this->getRevTo(), "\115\x73\x67\124\x79\160\145" => self::MSGTYPE_IMAGE, "\x49\155\141\147\x65" => array("\115\x65\x64\151\141\x49\144" => $mediaid), "\103\x72\x65\x61\x74\x65\124\151\x6d\x65" => time()); goto jqckz; duTxd: return $this; goto jQIkE; jqckz: $this->Message($msg); goto duTxd; jQIkE: } public function voice($mediaid = '') { goto SNnHS; SNnHS: $msg = array("\x54\157\125\x73\x65\162\116\x61\155\x65" => $this->getRevFrom(), "\x46\162\157\155\125\163\145\162\x4e\x61\155\x65" => $this->getRevTo(), "\115\x73\x67\x54\171\x70\x65" => self::MSGTYPE_IMAGE, "\x56\157\151\x63\145" => array("\x4d\145\144\x69\141\x49\144" => $mediaid), "\103\162\x65\x61\164\x65\124\151\x6d\145" => time()); goto Tn3QZ; GQPCQ: return $this; goto sr2nR; Tn3QZ: $this->Message($msg); goto GQPCQ; sr2nR: } public function video($mediaid = '', $title = '', $description = '') { goto PFAGJ; Ha7Un: $this->Message($msg); goto OqmhI; OqmhI: return $this; goto c79AH; PFAGJ: $msg = array("\x54\x6f\x55\x73\145\x72\x4e\x61\x6d\145" => $this->getRevFrom(), "\106\x72\x6f\x6d\125\x73\145\x72\x4e\141\x6d\x65" => $this->getRevTo(), "\x4d\x73\x67\124\x79\x70\x65" => self::MSGTYPE_IMAGE, "\126\151\x64\x65\157" => array("\x4d\x65\x64\x69\141\111\144" => $mediaid, "\x54\x69\x74\x6c\x65" => $title, "\104\145\x73\x63\x72\x69\160\x74\x69\x6f\x6e" => $description), "\103\162\x65\141\x74\145\124\x69\155\x65" => time()); goto Ha7Un; c79AH: } public function news($newsData = array()) { goto fAP4m; Xxp5P: $this->Message($msg); goto v3llT; fAP4m: $count = count($newsData); goto AxHtN; v3llT: return $this; goto l9oyr; AxHtN: $msg = array("\124\157\125\163\145\162\116\141\x6d\x65" => $this->getRevFrom(), "\106\162\x6f\155\125\x73\x65\x72\116\141\155\145" => $this->getRevTo(), "\115\163\x67\x54\x79\x70\145" => self::MSGTYPE_NEWS, "\103\x72\145\141\164\145\124\151\x6d\x65" => time(), "\x41\x72\x74\x69\143\154\x65\103\x6f\165\156\164" => $count, "\101\162\x74\151\x63\154\145\163" => $newsData); goto Xxp5P; l9oyr: } public function Message($msg = '', $append = false) { goto OH4mi; iRalm: goto FT1_K; goto jhujB; Ljrwc: Q5M1g: goto cUqyo; gJdot: $this->_msg = $msg; goto qowR8; jQIbw: return $this->_msg; goto iRalm; YfPRL: goto FT1_K; goto Ljrwc; qowR8: goto U90lt; goto WbQ20; tSjdR: $this->_msg = array(); goto YfPRL; P8sAe: return $this->_msg; goto dEXLm; jhujB: o0IyV: goto tSjdR; OH4mi: if (is_null($msg)) { goto o0IyV; } goto BB8_q; cJTkN: $this->_msg = array_merge($this->_msg, $msg); goto tHob6; BB8_q: if (is_array($msg)) { goto Q5M1g; } goto jQIbw; cUqyo: if ($append) { goto LpqWp; } goto gJdot; tHob6: U90lt: goto P8sAe; WbQ20: LpqWp: goto cJTkN; dEXLm: FT1_K: goto WWm30; WWm30: } public function reply($msg = array(), $return = false) { goto UZRnB; iOpE4: WIflS: goto ewNz5; kt0UI: $xmldata = $this->xml_encode($msg); goto yjNJs; JA2u8: sort($tmpArr, SORT_STRING); goto qP8QV; I3JBA: YVxRV: goto kMHM9; mfxYO: $signature = sha1($signature); goto yf_fc; W88sg: $array = $pc->encrypt($xmldata, $this->appid); goto jISCc; IGCsE: $nonce = rand(77, 999) * rand(605, 888) * rand(11, 99); goto QXUak; n6UWe: echo $smsg; goto mDqNG; vN733: $msg = $this->_msg; goto FBHUd; QXUak: $encrypt = $array[1]; goto d5DGG; qP8QV: $signature = implode($tmpArr); goto mfxYO; FBHUd: tWfXz: goto kt0UI; Z3g03: $pc = new Prpcrypt($this->encodingAesKey); goto W88sg; mDqNG: return true; goto iOpE4; Dqlrh: goto WIflS; goto hd0Dh; o4ib0: O_Nkj: goto n6UWe; flg0d: $this->log($smsg); goto JDKsF; jISCc: $ret = $array[0]; goto Ug1XB; pufFc: return false; goto I3JBA; r2OR5: if ($smsg) { goto O_Nkj; } goto mY7NL; mY7NL: return false; goto Dqlrh; UZRnB: if (!empty($msg)) { goto tWfXz; } goto vN733; JDKsF: if ($return) { goto oC9GB; } goto r2OR5; gAqSr: goto WIflS; goto o4ib0; d5DGG: $tmpArr = array($this->token, $timestamp, $nonce, $encrypt); goto JA2u8; yf_fc: $smsg = $this->generate($encrypt, $signature, $timestamp, $nonce); goto flg0d; kMHM9: $timestamp = time(); goto IGCsE; ySNkC: return $smsg; goto gAqSr; ByCxG: $this->log("\x65\156\x63\x72\x79\x70\x74\x20\x65\162\162\41"); goto pufFc; hd0Dh: oC9GB: goto ySNkC; Ug1XB: if (!($ret != 0)) { goto YVxRV; } goto ByCxG; yjNJs: $this->log($xmldata); goto Z3g03; ewNz5: } private function generate($encrypt, $signature, $timestamp, $nonce) { $format = "\74\x78\x6d\x6c\x3e\12\74\105\x6e\143\x72\171\x70\164\x3e\x3c\41\x5b\103\x44\101\124\x41\x5b\45\163\x5d\135\x3e\74\57\105\156\x63\162\x79\x70\164\x3e\xa\74\x4d\163\x67\123\x69\x67\x6e\141\x74\x75\162\145\x3e\74\x21\x5b\x43\104\101\124\x41\133\45\x73\135\x5d\x3e\x3c\57\115\x73\147\x53\x69\147\x6e\x61\x74\x75\162\145\x3e\xa\x3c\124\x69\x6d\145\123\164\141\x6d\160\76\45\163\x3c\57\124\151\x6d\145\x53\x74\141\155\160\x3e\12\74\x4e\157\156\143\x65\76\x3c\41\133\103\104\x41\x54\101\133\x25\163\135\135\76\74\x2f\x4e\x6f\156\143\145\76\12\74\57\170\x6d\x6c\x3e"; return sprintf($format, $encrypt, $signature, $timestamp, $nonce); } protected function setCache($cachename, $value, $expired) { return false; } protected function getCache($cachename) { return false; } protected function removeCache($cachename) { return false; } public function checkAuth($appid = '', $appsecret = '', $token = '') { goto gaLAF; ExY2R: if (!(!$json || isset($json["\145\x72\x72\x63\157\x64\x65"]))) { goto Dg3cO; } goto dpLha; xjBxN: y_nO8: goto ngvJ2; v8jXA: $appsecret = $this->appsecret; goto fAjGS; qOjcv: $json = json_decode($result, true); goto ExY2R; gaLAF: if (!(!$appid || !$appsecret)) { goto WGUaA; } goto HzSaC; LBVCI: hQj2H: goto Td53I; LSHP8: if (!$token) { goto HrJdW; } goto o95m9; Td53I: return false; goto a1KqO; ngvJ2: $result = $this->http_get(self::API_URL_PREFIX . self::TOKEN_GET_URL . "\143\x6f\162\160\x69\144\x3d" . $appid . "\46\143\x6f\x72\x70\x73\145\143\x72\145\x74\75" . $appsecret); goto F9Lr0; JCowF: $this->access_token = $json["\x61\x63\143\145\163\x73\x5f\164\157\153\145\156"]; goto fyb50; dpLha: $this->errCode = $json["\145\162\162\x63\157\x64\145"]; goto BLNmE; QPZKD: return false; goto Hx5jG; S1Ysc: $this->access_token = $rs; goto du55c; Csri9: return $this->access_token; goto tAdG9; fyb50: $expire = $json["\x65\170\x70\x69\162\x65\163\137\x69\156"] ? intval($json["\145\x78\160\151\162\x65\163\x5f\151\x6e"]) - 100 : 3600; goto UYxY6; du55c: return $rs; goto xjBxN; MfP_b: if (!($rs = $this->getCache($authname))) { goto y_nO8; } goto S1Ysc; fAjGS: WGUaA: goto LSHP8; tAdG9: HrJdW: goto KzMSZ; F9Lr0: if (!$result) { goto hQj2H; } goto qOjcv; BLNmE: $this->errMsg = $json["\x65\162\x72\155\163\x67"]; goto QPZKD; J3ABI: return $this->access_token; goto LBVCI; Hx5jG: Dg3cO: goto JCowF; HzSaC: $appid = $this->appid; goto v8jXA; o95m9: $this->access_token = $token; goto Csri9; UYxY6: $this->setCache($authname, $this->access_token, $expire); goto J3ABI; KzMSZ: $authname = "\161\x79\x77\x65\143\150\141\164\x5f\x61\x63\x63\145\163\x73\137\x74\157\153\x65\x6e" . $appid; goto MfP_b; a1KqO: } public function resetAuth($appid = '') { goto B1ChM; CFIc3: return true; goto Zkr__; gUfoX: $authname = "\161\171\x77\x65\143\150\x61\x74\x5f\141\x63\143\145\163\x73\137\x74\x6f\153\145\156" . $appid; goto DGFdV; DGFdV: $this->removeCache($authname); goto CFIc3; B1HBq: $appid = $this->appid; goto g6hjj; g6hjj: Px5FH: goto iwFK0; B1ChM: if ($appid) { goto Px5FH; } goto B1HBq; iwFK0: $this->access_token = ''; goto gUfoX; Zkr__: } public function resetJsTicket($appid = '') { goto g45I3; KZeEh: $authname = "\x71\x79\167\x65\143\x68\141\164\x5f\152\163\x61\160\x69\137\x74\151\143\153\145\x74" . $appid; goto KMubj; wwtxL: $appid = $this->appid; goto OBIr5; CKn7r: $this->jsapi_ticket = ''; goto KZeEh; Fc3Ib: return true; goto DzvaR; g45I3: if ($appid) { goto AE3Le; } goto wwtxL; OBIr5: AE3Le: goto CKn7r; KMubj: $this->removeCache($authname); goto Fc3Ib; DzvaR: } public function getJsTicket($appid = '', $jsapi_ticket = '') { goto uiAmQ; VNuFa: u7O0G: goto u29dD; LR0gD: $json = json_decode($result, true); goto PMQnL; iT4Op: $this->errCode = $json["\x65\x72\x72\x63\157\x64\145"]; goto Tt80W; PMQnL: if (!(!$json || !empty($json["\145\162\x72\x63\x6f\x64\145"]))) { goto pzDmv; } goto iT4Op; CD7rG: $this->jsapi_ticket = $rs; goto QX8E5; V2YSF: r9d3d: goto DgeKE; QX8E5: return $rs; goto FdiY_; u29dD: if (!$jsapi_ticket) { goto h4fuz; } goto Q2uiO; R3ann: return false; goto vhJ_B; cRrV0: QUW6e: goto d7KTl; OoWlF: h4fuz: goto r04oK; UGSnt: return $this->jsapi_ticket; goto OoWlF; nsaa7: $result = $this->http_get(self::API_URL_PREFIX . self::TICKET_GET_URL . "\141\x63\143\145\163\x73\x5f\164\157\x6b\x65\x6e\x3d" . $this->access_token); goto SCWiE; FdiY_: Jb5IJ: goto nsaa7; nKNOK: if (!($rs = $this->getCache($authname))) { goto Jb5IJ; } goto CD7rG; niK94: return $this->jsapi_ticket; goto cRrV0; uiAmQ: if (!(!$this->access_token && !$this->checkAuth())) { goto r9d3d; } goto ewRWU; o_4vj: $this->setCache($authname, $this->jsapi_ticket, $expire); goto niK94; vhJ_B: pzDmv: goto pgpIr; d7KTl: return false; goto SrWIJ; pgpIr: $this->jsapi_ticket = $json["\x74\151\x63\x6b\145\x74"]; goto fdvkm; Q2uiO: $this->jsapi_ticket = $jsapi_ticket; goto UGSnt; Tt80W: $this->errMsg = $json["\145\x72\x72\x6d\x73\147"]; goto R3ann; ewRWU: return false; goto V2YSF; SCWiE: if (!$result) { goto QUW6e; } goto LR0gD; r04oK: $authname = "\x71\171\x77\145\143\x68\x61\164\x5f\152\163\141\x70\151\137\164\x69\x63\153\x65\x74" . $appid; goto nKNOK; QXwt5: $appid = $this->appid; goto VNuFa; fdvkm: $expire = $json["\x65\170\x70\x69\x72\x65\163\137\151\156"] ? intval($json["\x65\170\x70\x69\x72\x65\163\x5f\x69\x6e"]) - 100 : 3600; goto o_4vj; DgeKE: if ($appid) { goto u7O0G; } goto QXwt5; SrWIJ: } public function getJsSign($url, $timestamp = 0, $noncestr = '', $appid = '') { goto WvkY7; ELSyc: $noncestr = $this->generateNonceStr(); goto dhZao; XcBON: GFgJm: goto KHZfI; LMAE3: return false; goto U0xAp; b6_iN: iRfd4: goto lm2w2; dhZao: s3Ds7: goto obdgm; Y0jYy: $timestamp = time(); goto b6_iN; OliL_: if ($timestamp) { goto iRfd4; } goto Y0jYy; PNbWJ: xY_fx: goto yo56w; KHZfI: $signPackage = array("\141\x70\x70\151\x64" => $this->appid, "\156\x6f\156\x63\145\x73\164\162" => $noncestr, "\164\151\x6d\x65\163\x74\141\x6d\160" => $timestamp, "\x75\x72\x6c" => $url, "\163\x69\x67\x6e\x61\x74\x75\x72\145" => $sign); goto AP5x1; m65O0: IwgoT: goto ZZQeS; o61eX: $url = substr($url, 0, $ret); goto m65O0; obdgm: $ret = strpos($url, "\43"); goto efRD5; Pt1EE: return false; goto PNbWJ; WvkY7: if (!(!$this->jsapi_ticket && !$this->getJsTicket($appid) || !$url)) { goto ZUZQY; } goto LMAE3; lm2w2: if ($noncestr) { goto s3Ds7; } goto ELSyc; yJIC1: return false; goto XcBON; efRD5: if (!$ret) { goto IwgoT; } goto o61eX; U0xAp: ZUZQY: goto OliL_; yo56w: $arrdata = array("\x74\x69\x6d\145\x73\164\x61\x6d\x70" => $timestamp, "\x6e\157\156\143\x65\163\x74\162" => $noncestr, "\165\x72\154" => $url, "\152\163\x61\x70\x69\x5f\164\x69\143\153\x65\164" => $this->jsapi_ticket); goto jIOyb; ZZQeS: $url = trim($url); goto FY1Lu; FY1Lu: if (!empty($url)) { goto xY_fx; } goto Pt1EE; kcFU7: if ($sign) { goto GFgJm; } goto yJIC1; AP5x1: return $signPackage; goto WNixa; jIOyb: $sign = $this->getSignature($arrdata); goto kcFU7; WNixa: } public function getSignature($arrdata, $method = "\163\x68\141\61") { goto C05Wy; C05Wy: if (!function_exists($method)) { return false; } goto bkvmk; yOcAF: return $Sign; goto spqJ7; NkhhJ: $Sign = $method($paramstring); goto yOcAF; P31lV: $paramstring = ''; goto iBfQE; HxStq: Ods1_: goto NkhhJ; iBfQE: foreach ($arrdata as $key => $value) { goto nzXwP; tuT7T: qg7k5: goto get2S; get2S: phd3C: goto JF2ex; Pu3oc: qPWS0: goto k5Wwz; tBBBG: goto qg7k5; goto Pu3oc; k5Wwz: $paramstring .= $key . "\75" . $value; goto tuT7T; ULAHQ: $paramstring .= "\x26" . $key . "\x3d" . $value; goto tBBBG; nzXwP: if (strlen($paramstring) == 0) { goto qPWS0; } goto ULAHQ; JF2ex: } goto HxStq; bkvmk: ksort($arrdata); goto P31lV; spqJ7: } public function generateNonceStr($length = 16) { goto zlqeo; wXgw2: goto NykKX; goto NKpuy; IKAU0: NykKX: goto GIzv4; StiPU: $str .= $chars[mt_rand(0, strlen($chars) - 1)]; goto n75Vb; dZt00: return $str; goto CDvzw; GIzv4: if (!($i < $length)) { goto HgacV; } goto StiPU; zlqeo: $chars = "\141\142\143\144\145\x66\x67\150\x69\x6a\153\x6c\155\x6e\x6f\x70\x71\x72\163\x74\x75\x76\167\x78\171\172\101\x42\103\104\x45\x46\107\x48\x49\x4a\x4b\x4c\115\116\117\x50\121\x52\x53\124\x55\x56\x57\130\131\x5a\x30\x31\x32\63\x34\65\66\67\x38\71"; goto Rqw1t; NBZF1: $i++; goto wXgw2; n75Vb: Jh2uk: goto NBZF1; p9_Ed: $i = 0; goto IKAU0; Rqw1t: $str = ''; goto p9_Ed; NKpuy: HgacV: goto dZt00; CDvzw: } public function createMenu($data, $agentid = '') { goto F4AC5; ysTdZ: aE6tS: goto GRvYY; LBA1C: $this->errMsg = $json["\145\162\x72\155\163\147"]; goto bhgNc; bhgNc: return false; goto h1lm0; b60YV: if (!$result) { goto g_myc; } goto ZA_iv; WCfay: $result = $this->http_post(self::API_URL_PREFIX . self::MENU_CREATE_URL . "\x61\143\x63\145\x73\x73\137\164\x6f\x6b\x65\x6e\75" . $this->access_token . "\46\x61\x67\x65\x6e\x74\x69\x64\x3d" . $agentid, self::json_encode($data)); goto b60YV; KU7xy: if (!(!$json || !empty($json["\x65\x72\x72\143\157\144\x65"]) || $json["\145\162\x72\x63\157\144\145"] != 0)) { goto Vsdpl; } goto ECo38; GRvYY: if (!(!$this->access_token && !$this->checkAuth())) { goto LMRBx; } goto nwvBz; j7u_u: return false; goto tpuj4; ECo38: $this->errCode = $json["\x65\x72\x72\143\157\144\x65"]; goto LBA1C; lXfFX: LMRBx: goto WCfay; F4AC5: if (!($agentid == '')) { goto aE6tS; } goto OcNKV; OcNKV: $agentid = $this->agentid; goto ysTdZ; LiClN: return true; goto ROCob; ROCob: g_myc: goto j7u_u; ZA_iv: $json = json_decode($result, true); goto KU7xy; nwvBz: return false; goto lXfFX; h1lm0: Vsdpl: goto LiClN; tpuj4: } public function getMenu($agentid = '') { goto vTgvu; bksBH: NlWw2: goto T6l6j; IPIkk: return $json; goto wcGbs; ZoOCA: return false; goto RemXa; l3t49: rGkOR: goto IPIkk; AMrWt: $this->errMsg = $json["\x65\162\x72\x6d\163\x67"]; goto LNUf5; s6d7p: $agentid = $this->agentid; goto npcM_; vTgvu: if (!($agentid == '')) { goto jiJEW; } goto s6d7p; Y6Pwo: $json = json_decode($result, true); goto IoOCI; wcGbs: ElP2H: goto ZoOCA; npcM_: jiJEW: goto EI2mC; fMdXf: return false; goto bksBH; EI2mC: if (!(!$this->access_token && !$this->checkAuth())) { goto NlWw2; } goto fMdXf; duTTq: $this->errCode = $json["\145\x72\162\143\x6f\x64\145"]; goto AMrWt; IoOCI: if (!(!$json || isset($json["\x65\162\x72\143\157\144\x65"]) || $json["\145\x72\x72\143\x6f\144\145"] != 0)) { goto rGkOR; } goto duTTq; T6l6j: $result = $this->http_get(self::API_URL_PREFIX . self::MENU_GET_URL . "\x61\x63\143\x65\x73\163\137\164\x6f\153\x65\156\x3d" . $this->access_token . "\x26\x61\147\145\156\164\x69\x64\x3d" . $agentid); goto tGEEd; LNUf5: return false; goto l3t49; tGEEd: if (!$result) { goto ElP2H; } goto Y6Pwo; RemXa: } public function deleteMenu($agentid = '') { goto V6Bf8; n7HLT: return true; goto DFv0o; DFv0o: lGd6q: goto xFIRS; vEOCF: if (!(!$this->access_token && !$this->checkAuth())) { goto a8otA; } goto MmIVr; faIRO: $result = $this->http_get(self::API_URL_PREFIX . self::MENU_DELETE_URL . "\x61\143\x63\x65\163\163\137\164\157\153\145\156\75" . $this->access_token . "\46\x61\x67\x65\x6e\x74\151\144\x3d" . $agentid); goto sQ1Qc; V6Bf8: if (!($agentid == '')) { goto N6hyH; } goto xO6Pi; XN4g3: return false; goto q9qXE; xFIRS: return false; goto P5HkM; wFm9j: $this->errCode = $json["\145\x72\x72\x63\157\x64\x65"]; goto kEVJ4; q9qXE: Ijg0D: goto n7HLT; FsRrd: if (!(!$json || !empty($json["\x65\x72\x72\143\157\144\145"]))) { goto Ijg0D; } goto wFm9j; kEVJ4: $this->errMsg = $json["\x65\162\162\x6d\x73\147"]; goto XN4g3; JqQXM: $json = json_decode($result, true); goto FsRrd; xO6Pi: $agentid = $this->agentid; goto umjr2; C6xzB: a8otA: goto faIRO; umjr2: N6hyH: goto vEOCF; sQ1Qc: if (!$result) { goto lGd6q; } goto JqQXM; MmIVr: return false; goto C6xzB; P5HkM: } public function uploadMedia($data, $type) { goto E58JC; xSRr1: etSoX: goto KzRTo; E58JC: if (!(!$this->access_token && !$this->checkAuth())) { goto etSoX; } goto pbFEK; CTOVz: $this->errCode = $json["\x65\162\x72\143\x6f\x64\145"]; goto HP190; R3ekf: return $json; goto oXvUL; HP190: $this->errMsg = $json["\x65\162\x72\155\163\x67"]; goto X28Ht; KzRTo: $result = $this->http_post(self::API_URL_PREFIX . self::MEDIA_UPLOAD_URL . "\141\x63\x63\145\x73\x73\x5f\164\157\153\x65\x6e\x3d" . $this->access_token . "\x26\164\171\160\145\75" . $type, $data, true); goto SmpyQ; ABwEC: return false; goto KD7rc; Ehr5I: UWohx: goto R3ekf; JEZ_J: if (!(!$json || !empty($json["\x65\162\162\143\x6f\x64\x65"]))) { goto UWohx; } goto CTOVz; zTJjF: $json = json_decode($result, true); goto JEZ_J; X28Ht: return false; goto Ehr5I; pbFEK: return false; goto xSRr1; oXvUL: C8rEl: goto ABwEC; SmpyQ: if (!$result) { goto C8rEl; } goto zTJjF; KD7rc: } public function getMedia($media_id) { goto XlTXW; f31lc: return false; goto OF04n; VDJO0: $json = json_decode($result, true); goto jEl4s; XlTXW: if (!(!$this->access_token && !$this->checkAuth())) { goto Apcko; } goto IC3Qf; VrC24: hzBW2: goto f31lc; qy46C: Wnvwm: goto WieFF; QgXhN: return false; goto qy46C; XbCX1: $this->errMsg = $json["\145\x72\162\x6d\x73\x67"]; goto QgXhN; E6cZz: Apcko: goto C6n9u; YVF3j: $this->errCode = $json["\145\162\162\143\x6f\x64\x65"]; goto XbCX1; IC3Qf: return false; goto E6cZz; C6n9u: $result = $this->http_get(self::API_URL_PREFIX . self::MEDIA_GET_URL . "\x61\x63\143\145\163\x73\137\164\x6f\153\145\x6e\x3d" . $this->access_token . "\x26\155\145\x64\151\x61\x5f\x69\144\x3d" . $media_id); goto KVOIR; jEl4s: if (!isset($json["\145\x72\162\143\x6f\144\x65"])) { goto Wnvwm; } goto YVF3j; KVOIR: if (!$result) { goto hzBW2; } goto VDJO0; WieFF: return $result; goto VrC24; OF04n: } public function getServerIp() { goto SDaMO; f93JH: return false; goto nKjco; eZdM4: $result = $this->http_get(self::API_URL_PREFIX . self::CALLBACKSERVER_GET_URL . "\x61\x63\143\x65\x73\x73\x5f\x74\157\x6b\145\156\x3d" . $this->access_token); goto BdNQW; d4lQT: return false; goto ByWdH; w_Vms: return false; goto HKrMB; EKm7I: $this->errMsg = $json["\x65\x72\x72\155\163\x67"]; goto f93JH; csu2P: return $json["\x69\x70\x5f\x6c\x69\163\x74"]; goto vPYu2; nKjco: zXJt4: goto csu2P; SDaMO: if (!(!$this->access_token && !$this->checkAuth())) { goto SPOWu; } goto d4lQT; WySjn: $json = json_decode($result, true); goto KJ27H; ByWdH: SPOWu: goto eZdM4; XSLXs: $this->errCode = $json["\x65\162\162\x63\157\x64\145"]; goto EKm7I; vPYu2: FyUWV: goto w_Vms; BdNQW: if (!$result) { goto FyUWV; } goto WySjn; KJ27H: if (!(!$json || isset($json["\145\162\x72\x63\157\x64\x65"]))) { goto zXJt4; } goto XSLXs; HKrMB: } public function createDepartment($data) { goto GBFxM; UE2QF: $json = json_decode($result, true); goto PNsfT; qbyao: $this->errCode = $json["\x65\x72\162\143\157\x64\x65"]; goto sQtN5; m5NbD: sn5_z: goto zL3iu; BcxdM: $result = $this->http_post(self::API_URL_PREFIX . self::DEPARTMENT_CREATE_URL . "\141\x63\143\x65\x73\163\x5f\x74\157\x6b\145\x6e\x3d" . $this->access_token, self::json_encode($data)); goto Y680p; ULUEC: return false; goto Bl7Za; J2pT5: return false; goto VYKVx; GBFxM: if (!(!$this->access_token && !$this->checkAuth())) { goto T8Hp2; } goto J2pT5; PNsfT: if (!(!$json || !empty($json["\x65\x72\x72\143\157\x64\x65"]) || $json["\145\x72\162\143\x6f\x64\x65"] != 0)) { goto sn5_z; } goto qbyao; Y680p: if (!$result) { goto gxi0t; } goto UE2QF; VYKVx: T8Hp2: goto BcxdM; Pul1C: gxi0t: goto ULUEC; CqkYS: return false; goto m5NbD; sQtN5: $this->errMsg = $json["\x65\162\x72\x6d\x73\x67"]; goto CqkYS; zL3iu: return $json; goto Pul1C; Bl7Za: } public function updateDepartment($data) { goto SnBb5; vrfbo: I2lcJ: goto Wv2UB; lej9c: $json = json_decode($result, true); goto uWVft; EBpV9: $result = $this->http_post(self::API_URL_PREFIX . self::DEPARTMENT_UPDATE_URL . "\141\x63\x63\145\x73\163\137\164\x6f\x6b\145\x6e\x3d" . $this->access_token, self::json_encode($data)); goto jRYcT; d2s9y: return false; goto GSoFT; GSoFT: Hf1u7: goto EBpV9; kkDCb: return false; goto glbYt; SnBb5: if (!(!$this->access_token && !$this->checkAuth())) { goto Hf1u7; } goto d2s9y; uWVft: if (!(!$json || !empty($json["\x65\162\x72\x63\x6f\144\145"]) || $json["\145\162\x72\x63\157\144\x65"] != 0)) { goto L3psb; } goto BKyb2; jRYcT: if (!$result) { goto I2lcJ; } goto lej9c; NUDxJ: $this->errMsg = $json["\x65\x72\x72\155\163\x67"]; goto kkDCb; BKyb2: $this->errCode = $json["\145\x72\x72\x63\x6f\144\x65"]; goto NUDxJ; glbYt: L3psb: goto En2Kh; En2Kh: return $json; goto vrfbo; Wv2UB: return false; goto ICzsH; ICzsH: } public function deleteDepartment($id) { goto okVtY; kSMFb: BJ1n8: goto P4Cbv; GygT8: $this->errCode = $json["\145\162\162\143\x6f\144\145"]; goto RZclN; P4Cbv: return $json; goto owjFP; Xiw0a: if (!$result) { goto ehdDf; } goto HP4AS; EFzZW: if (!(!$json || !empty($json["\x65\162\x72\143\x6f\x64\x65"]) || $json["\x65\x72\x72\143\x6f\x64\145"] != 0)) { goto BJ1n8; } goto GygT8; EkBE9: return false; goto BHjAg; okVtY: if (!(!$this->access_token && !$this->checkAuth())) { goto jer92; } goto EkBE9; ill9B: $result = $this->http_get(self::API_URL_PREFIX . self::DEPARTMENT_DELETE_URL . "\141\143\x63\145\x73\x73\x5f\164\157\x6b\x65\156\75" . $this->access_token . "\x26\x69\x64\x3d" . $id); goto Xiw0a; NxYmg: return false; goto kjJJC; bxNwB: return false; goto kSMFb; RZclN: $this->errMsg = $json["\145\x72\x72\155\163\x67"]; goto bxNwB; HP4AS: $json = json_decode($result, true); goto EFzZW; owjFP: ehdDf: goto NxYmg; BHjAg: jer92: goto ill9B; kjJJC: } public function moveDepartment($data) { goto tq2oN; T7U2e: VDdhJ: goto dE3Yi; q1hXs: return $json; goto uV2mJ; k0PVJ: IWbaN: goto q1hXs; f5yTh: $this->errMsg = $json["\x65\x72\162\x6d\x73\147"]; goto gM3BD; Fg2i9: return false; goto GGx3n; cYaBk: if (!(!$json || !empty($json["\x65\162\162\143\157\x64\x65"]) || $json["\145\162\x72\x63\x6f\144\145"] != 0)) { goto IWbaN; } goto lAUeS; uV2mJ: BLYzf: goto Fg2i9; tq2oN: if (!(!$this->access_token && !$this->checkAuth())) { goto VDdhJ; } goto HpvJl; Jh53r: $json = json_decode($result, true); goto cYaBk; gM3BD: return false; goto k0PVJ; FeH_a: if (!$result) { goto BLYzf; } goto Jh53r; HpvJl: return false; goto T7U2e; lAUeS: $this->errCode = $json["\145\162\x72\x63\157\x64\x65"]; goto f5yTh; dE3Yi: $result = $this->http_post(self::API_URL_PREFIX . self::DEPARTMENT_MOVE_URL . "\141\x63\143\x65\163\163\137\164\x6f\153\145\156\x3d" . $this->access_token, self::json_encode($data)); goto FeH_a; GGx3n: } public function getDepartment() { goto q4a9v; nUupX: fg3gW: goto vL3qY; q4Ksq: return false; goto PCXr0; Fh3fw: return false; goto nUupX; RwhJV: return $json; goto c74u5; Gjuxv: $json = json_decode($result, true); goto sGlKI; O3cQI: $this->errCode = $json["\145\x72\162\x63\x6f\144\145"]; goto YIT76; vL3qY: $result = $this->http_get(self::API_URL_PREFIX . self::DEPARTMENT_LIST_URL . "\x61\143\143\x65\163\163\137\164\157\153\x65\x6e\x3d" . $this->access_token); goto eqbQe; YIT76: $this->errMsg = $json["\x65\x72\162\x6d\x73\x67"]; goto UewBc; sGlKI: if (!(!$json || !empty($json["\x65\x72\162\x63\x6f\144\145"]))) { goto dzc0H; } goto O3cQI; q4a9v: if (!(!$this->access_token && !$this->checkAuth())) { goto fg3gW; } goto Fh3fw; jYN_k: dzc0H: goto RwhJV; eqbQe: if (!$result) { goto vU_Um; } goto Gjuxv; UewBc: return false; goto jYN_k; c74u5: vU_Um: goto q4Ksq; PCXr0: } public function createUser($data) { goto cmZFv; xliDN: $result = $this->http_post(self::API_URL_PREFIX . self::USER_CREATE_URL . "\141\143\143\145\163\x73\137\164\157\x6b\x65\156\75" . $this->access_token, self::json_encode($data)); goto jgvEr; qbnl3: return false; goto mHYKq; cmZFv: if (!(!$this->access_token && !$this->checkAuth())) { goto ruTg5; } goto WdIfT; jgvEr: if (!$result) { goto Fei9E; } goto gUKkW; JdsGF: Fei9E: goto qbnl3; gUKkW: $json = json_decode($result, true); goto LU07M; Kk4zZ: ruTg5: goto xliDN; CD9RJ: kk5AT: goto IDJ9c; LU07M: if (!(!$json || !empty($json["\145\162\x72\x63\x6f\144\x65"]) || $json["\145\x72\162\x63\157\144\x65"] != 0)) { goto kk5AT; } goto XXM3d; WdIfT: return false; goto Kk4zZ; pX53R: $this->errMsg = $json["\x65\x72\x72\x6d\163\x67"]; goto jkQEv; jkQEv: return false; goto CD9RJ; XXM3d: $this->errCode = $json["\x65\162\162\x63\157\x64\x65"]; goto pX53R; IDJ9c: return $json; goto JdsGF; mHYKq: } public function updateUser($data) { goto UVRI0; XMaHH: $json = json_decode($result, true); goto hQUwy; R8lby: return false; goto KwY2q; tKxfo: RFb_s: goto xdSp2; JKVu2: $this->errCode = $json["\x65\x72\162\143\x6f\144\145"]; goto dLRKz; xdSp2: return $json; goto kJQgF; kJQgF: bbonK: goto R8lby; dLRKz: $this->errMsg = $json["\x65\x72\162\155\x73\147"]; goto bnPgp; wJAEi: if (!$result) { goto bbonK; } goto XMaHH; bC8HD: OcVaY: goto N8Yhc; N8Yhc: $result = $this->http_post(self::API_URL_PREFIX . self::USER_UPDATE_URL . "\x61\x63\x63\145\x73\163\137\164\157\x6b\x65\x6e\x3d" . $this->access_token, self::json_encode($data)); goto wJAEi; bnPgp: return false; goto tKxfo; hQUwy: if (!(!$json || !empty($json["\145\162\x72\143\157\144\x65"]) || $json["\145\162\x72\x63\157\144\x65"] != 0)) { goto RFb_s; } goto JKVu2; UVRI0: if (!(!$this->access_token && !$this->checkAuth())) { goto OcVaY; } goto hyXOx; hyXOx: return false; goto bC8HD; KwY2q: } public function deleteUser($userid) { goto ot8WS; Z05GM: return $json; goto U43bF; YAEdU: if (!(!$json || !empty($json["\x65\x72\162\x63\x6f\x64\x65"]) || $json["\x65\162\x72\x63\157\x64\145"] != 0)) { goto Yhk6A; } goto EOiJy; ot8WS: if (!(!$this->access_token && !$this->checkAuth())) { goto L2NqX; } goto OlMRH; cRPCZ: if (!$result) { goto nHNye; } goto j4hCq; j4hCq: $json = json_decode($result, true); goto YAEdU; tE2xk: $this->errMsg = $json["\145\162\162\155\163\x67"]; goto UB4MW; UB4MW: return false; goto RDzBT; EOiJy: $this->errCode = $json["\145\162\x72\143\157\144\x65"]; goto tE2xk; ysBz_: return false; goto eFoUp; mufbP: L2NqX: goto ngzpM; ngzpM: $result = $this->http_get(self::API_URL_PREFIX . self::USER_DELETE_URL . "\x61\x63\143\145\x73\x73\x5f\164\x6f\x6b\145\156\x3d" . $this->access_token . "\46\165\163\145\x72\151\144\x3d" . $userid); goto cRPCZ; U43bF: nHNye: goto ysBz_; RDzBT: Yhk6A: goto Z05GM; OlMRH: return false; goto mufbP; eFoUp: } public function deleteUsers($userids) { goto W0ew6; uf6mv: return false; goto gd5Ro; U6TTn: if (!$result) { goto ZJATr; } goto R6kFK; mvgpy: SysVC: goto Ov_Za; qRQ2o: return false; goto mvgpy; rB3ro: $result = $this->http_post(self::API_URL_PREFIX . self::USER_BATCHDELETE_URL . "\141\143\143\145\x73\x73\x5f\164\x6f\153\x65\156\75" . $this->access_token, self::json_encode($data)); goto U6TTn; VK6Hk: ZJATr: goto uf6mv; Fg6Wl: return false; goto M3BE2; vvSCw: if (!(!$json || !empty($json["\145\162\x72\x63\x6f\144\145"]) || $json["\145\x72\162\x63\157\144\x65"] != 0)) { goto SysVC; } goto c2NdS; Yg2fZ: return false; goto MtZMp; R6kFK: $json = json_decode($result, true); goto vvSCw; W0ew6: if ($userids) { goto xnJaK; } goto Yg2fZ; M3BE2: yakkX: goto rB3ro; c2NdS: $this->errCode = $json["\145\x72\x72\143\157\144\x65"]; goto Rb91K; MtZMp: xnJaK: goto gHZgT; Ov_Za: return $json; goto VK6Hk; gHZgT: $data = array("\165\163\x65\x72\151\144\154\x69\163\x74" => $userids); goto KvS0y; Rb91K: $this->errMsg = $json["\145\x72\162\155\x73\x67"]; goto qRQ2o; KvS0y: if (!(!$this->access_token && !$this->checkAuth())) { goto yakkX; } goto Fg6Wl; gd5Ro: } public function getUserInfo($userid) { goto uCzMC; yawov: $this->errCode = $json["\145\x72\x72\143\157\x64\145"]; goto vxlup; DoZvp: return false; goto uBwMe; vxlup: $this->errMsg = $json["\145\162\162\x6d\163\147"]; goto OXx8H; AUnuH: $json = json_decode($result, true); goto jUMpS; K0fmE: return false; goto S3bcA; jUMpS: if (!(!$json || !empty($json["\x65\x72\x72\x63\157\x64\x65"]) || $json["\x65\162\162\x63\x6f\144\145"] != 0)) { goto fB3ZA; } goto yawov; vbtss: $result = $this->http_get(self::API_URL_PREFIX . self::USER_GET_URL . "\x61\x63\143\145\163\x73\137\164\157\x6b\x65\156\75" . $this->access_token . "\x26\165\163\x65\162\151\144\x3d" . $userid); goto z1qY3; Mute0: fB3ZA: goto tZZ8J; S3bcA: E5OJX: goto vbtss; w2QIP: Hb08m: goto DoZvp; tZZ8J: return $json; goto w2QIP; z1qY3: if (!$result) { goto Hb08m; } goto AUnuH; uCzMC: if (!(!$this->access_token && !$this->checkAuth())) { goto E5OJX; } goto K0fmE; OXx8H: return false; goto Mute0; uBwMe: } public function getUserList($department_id, $fetch_child = 0, $status = 0) { goto IJKFk; yTCu0: y1Wjk: goto jUodc; OATnp: $json = json_decode($result, true); goto DWoJ6; p9D26: $this->errCode = $json["\x65\162\162\143\x6f\144\145"]; goto XliTl; MkN3V: return false; goto yTCu0; IJKFk: if (!(!$this->access_token && !$this->checkAuth())) { goto y1Wjk; } goto MkN3V; XliTl: $this->errMsg = $json["\145\162\x72\x6d\163\x67"]; goto WPb1k; RS6LR: return false; goto yW1Yg; WPb1k: return false; goto qk6Mx; qk6Mx: Egeru: goto mXpcA; jUodc: $result = $this->http_get(self::API_URL_PREFIX . self::USER_LIST_URL . "\141\x63\143\145\163\x73\x5f\164\157\153\145\156\x3d" . $this->access_token . "\46\x64\x65\x70\x61\162\x74\155\145\x6e\x74\137\x69\x64\75" . $department_id . "\46\x66\145\164\x63\x68\x5f\x63\150\151\x6c\x64\75" . $fetch_child . "\x26\163\164\141\x74\165\x73\x3d" . $status); goto dGt1a; DWoJ6: if (!(!$json || !empty($json["\x65\162\x72\x63\x6f\x64\x65"]) || $json["\145\x72\162\x63\157\x64\145"] != 0)) { goto Egeru; } goto p9D26; mXpcA: return $json; goto I0EAG; I0EAG: ztw03: goto RS6LR; dGt1a: if (!$result) { goto ztw03; } goto OATnp; yW1Yg: } public function getUserListInfo($department_id, $fetch_child = 0, $status = 0) { goto nM8pV; nAUSI: if (!(!$json || !empty($json["\x65\162\x72\143\157\x64\x65"]) || $json["\145\162\162\x63\157\x64\x65"] != 0)) { goto BxpQR; } goto lEDuN; ZkzFM: WPkrV: goto e58a_; e58a_: return false; goto miYjl; k1CSt: Pb1_7: goto gnuAi; X7cdk: $json = json_decode($result, true); goto nAUSI; KB1Yv: return false; goto QdhYD; QdhYD: BxpQR: goto EhWmK; nM8pV: if (!(!$this->access_token && !$this->checkAuth())) { goto Pb1_7; } goto h_BhQ; VeHQt: if (!$result) { goto WPkrV; } goto X7cdk; EhWmK: return $json; goto ZkzFM; h_BhQ: return false; goto k1CSt; hh9RF: $this->errMsg = $json["\x65\162\x72\x6d\x73\x67"]; goto KB1Yv; lEDuN: $this->errCode = $json["\x65\x72\162\143\157\144\145"]; goto hh9RF; gnuAi: $result = $this->http_get(self::API_URL_PREFIX . self::USER_LIST_INFO_URL . "\141\x63\143\145\x73\163\x5f\x74\x6f\153\145\156\x3d" . $this->access_token . "\x26\144\145\x70\141\x72\164\x6d\x65\156\x74\137\151\x64\x3d" . $department_id . "\46\x66\145\x74\x63\150\x5f\x63\150\151\154\x64\x3d" . $fetch_child . "\46\163\x74\141\164\165\163\75" . $status); goto VeHQt; miYjl: } public function getUserId($code, $agentid = 0) { goto armjf; armjf: if ($agentid) { goto BGLjG; } goto gfOK5; wq9zs: return $json; goto Dy_zO; PJEpW: mLc0M: goto BVfPc; bWmSK: $this->errMsg = $json["\x65\162\162\x6d\163\147"]; goto ZlVvA; gfOK5: $agentid = $this->agentid; goto CW9EV; uYFDl: if (!(!$json || !empty($json["\145\x72\x72\x63\157\144\145"]) || $json["\145\162\x72\x63\157\144\x65"] != 0)) { goto HgxpS; } goto K4u7c; UKTTq: return false; goto PJEpW; Dy_zO: p727y: goto sAl9a; K4u7c: $this->errCode = $json["\145\162\162\143\x6f\144\145"]; goto bWmSK; MP8T7: if (!(!$this->access_token && !$this->checkAuth())) { goto mLc0M; } goto UKTTq; BVfPc: $result = $this->http_get(self::API_URL_PREFIX . self::USER_GETINFO_URL . "\x61\x63\143\x65\163\x73\137\164\x6f\x6b\145\x6e\x3d" . $this->access_token . "\x26\x63\x6f\144\x65\x3d" . $code . "\46\x61\147\145\156\x74\x69\144" . $agentid); goto omFOM; sAl9a: return false; goto eHHSD; CW9EV: BGLjG: goto MP8T7; YEXhg: HgxpS: goto wq9zs; omFOM: if (!$result) { goto p727y; } goto PxNR6; ZlVvA: return false; goto YEXhg; PxNR6: $json = json_decode($result, true); goto uYFDl; eHHSD: } public function sendInvite($userid, $invite_tips = '') { goto dU7Hy; A5GWO: return false; goto pVr6E; XNtxH: if ($invite_tips) { goto hjNMK; } goto pM57j; ZwEsq: $json = json_decode($result, true); goto v694w; dU7Hy: $data = array("\165\x73\145\162\151\x64" => $userid); goto XNtxH; MZj7z: Yjg5K: goto qroou; qroou: return $json; goto Ts91Z; EynoC: $this->errMsg = $json["\x65\x72\x72\155\x73\147"]; goto HhyRP; ab1rx: r8fzG: goto dWMjJ; gy0BV: if (!$result) { goto Urla3; } goto ZwEsq; Ts91Z: Urla3: goto A5GWO; dWMjJ: $result = $this->http_post(self::API_URL_PREFIX . self::USER_INVITE_URL . "\141\x63\143\x65\x73\163\137\x74\x6f\153\x65\x6e\75" . $this->access_token, self::json_encode($data)); goto gy0BV; OVQNU: hjNMK: goto dN4Id; pM57j: $data["\151\x6e\x76\151\x74\x65\x5f\x74\151\160\163"] = $invite_tips; goto OVQNU; HhyRP: return false; goto MZj7z; dN4Id: if (!(!$this->access_token && !$this->checkAuth())) { goto r8fzG; } goto JoSrM; v694w: if (!(!$json || !empty($json["\x65\162\x72\143\x6f\x64\145"]))) { goto Yjg5K; } goto cnOgZ; cnOgZ: $this->errCode = $json["\145\x72\162\143\x6f\144\x65"]; goto EynoC; JoSrM: return false; goto ab1rx; pVr6E: } public function createTag($data) { goto FrDUa; bq5eI: return false; goto nThdf; wkx2A: dttlQ: goto oFb3U; n7rjZ: if (!$result) { goto tzQWt; } goto zhWZD; FrDUa: if (!(!$this->access_token && !$this->checkAuth())) { goto dttlQ; } goto qwNcc; mys2I: return false; goto HL0DZ; qwNcc: return false; goto wkx2A; zhWZD: $json = json_decode($result, true); goto sN6K4; oFb3U: $result = $this->http_post(self::API_URL_PREFIX . self::TAG_CREATE_URL . "\141\x63\x63\x65\163\x73\x5f\164\157\x6b\x65\x6e\x3d" . $this->access_token, self::json_encode($data)); goto n7rjZ; sN6K4: if (!(!$json || !empty($json["\x65\162\x72\x63\x6f\x64\145"]) || $json["\x65\x72\x72\143\x6f\144\145"] != 0)) { goto MV6Zq; } goto lTfgL; lTfgL: $this->errCode = $json["\145\x72\162\x63\157\144\x65"]; goto tWXBp; tWXBp: $this->errMsg = $json["\x65\x72\162\155\163\x67"]; goto bq5eI; CcUi0: tzQWt: goto mys2I; EI5F5: return $json; goto CcUi0; nThdf: MV6Zq: goto EI5F5; HL0DZ: } public function updateTag($data) { goto wYO1c; W8yUv: return $json; goto gkQ4w; FQKRM: $this->errMsg = $json["\145\162\x72\155\x73\147"]; goto fpzE2; P521Q: return false; goto wobb6; u3TRD: $result = $this->http_post(self::API_URL_PREFIX . self::TAG_UPDATE_URL . "\x61\x63\x63\145\163\x73\137\164\157\x6b\145\x6e\75" . $this->access_token, self::json_encode($data)); goto aHQl_; J8KBu: return false; goto vBEq4; BIkkD: if (!(!$json || !empty($json["\145\162\162\143\157\x64\145"]) || $json["\x65\x72\x72\x63\x6f\144\145"] != 0)) { goto FsN9W; } goto kC7p7; gkQ4w: TLDmT: goto J8KBu; wobb6: wH1vX: goto u3TRD; RYCTL: $json = json_decode($result, true); goto BIkkD; aHQl_: if (!$result) { goto TLDmT; } goto RYCTL; wYO1c: if (!(!$this->access_token && !$this->checkAuth())) { goto wH1vX; } goto P521Q; Caekp: FsN9W: goto W8yUv; fpzE2: return false; goto Caekp; kC7p7: $this->errCode = $json["\x65\x72\x72\x63\x6f\144\145"]; goto FQKRM; vBEq4: } public function deleteTag($tagid) { goto l97bi; oZKkt: return $json; goto jXW00; xBd6A: $result = $this->http_get(self::API_URL_PREFIX . self::TAG_DELETE_URL . "\141\143\x63\x65\163\x73\137\x74\x6f\153\x65\156\x3d" . $this->access_token . "\46\164\141\147\x69\144\x3d" . $tagid); goto O9_B6; X2JkF: return false; goto URjcG; H4lRl: $json = json_decode($result, true); goto AgOX1; pedGM: MwmxM: goto oZKkt; URjcG: ymgOJ: goto xBd6A; FVgme: $this->errCode = $json["\x65\x72\162\143\157\144\x65"]; goto XQBu8; l2y5f: return false; goto o0qLN; WsfC3: return false; goto pedGM; XQBu8: $this->errMsg = $json["\145\x72\x72\x6d\x73\147"]; goto WsfC3; AgOX1: if (!(!$json || !empty($json["\x65\x72\x72\x63\157\144\145"]) || $json["\x65\162\162\x63\157\x64\145"] != 0)) { goto MwmxM; } goto FVgme; O9_B6: if (!$result) { goto CtWc1; } goto H4lRl; jXW00: CtWc1: goto l2y5f; l97bi: if (!(!$this->access_token && !$this->checkAuth())) { goto ymgOJ; } goto X2JkF; o0qLN: } public function getTag($tagid) { goto C5MO0; eUu7P: $json = json_decode($result, true); goto orJ74; J00xi: SxWSc: goto DiMej; dDbs7: return false; goto foTze; vRsoU: if (!$result) { goto SxWSc; } goto eUu7P; fKAf_: Kz2rn: goto GQrOw; foTze: ZFxWN: goto WFb66; WFb66: return $json; goto J00xi; C5MO0: if (!(!$this->access_token && !$this->checkAuth())) { goto Kz2rn; } goto kaBdD; oLVK9: $this->errCode = $json["\145\162\x72\143\x6f\x64\x65"]; goto vlbov; orJ74: if (!(!$json || !empty($json["\x65\162\162\x63\x6f\144\x65"]) || $json["\x65\162\162\x63\x6f\144\145"] != 0)) { goto ZFxWN; } goto oLVK9; kaBdD: return false; goto fKAf_; vlbov: $this->errMsg = $json["\145\x72\162\155\x73\x67"]; goto dDbs7; GQrOw: $result = $this->http_get(self::API_URL_PREFIX . self::TAG_GET_URL . "\x61\143\143\x65\x73\x73\137\164\157\153\x65\156\75" . $this->access_token . "\46\x74\x61\x67\x69\144\x3d" . $tagid); goto vRsoU; DiMej: return false; goto whh88; whh88: } public function addTagUser($data) { goto keveo; MFww5: $this->errMsg = $json["\145\162\x72\x6d\x73\147"]; goto eFSFI; eFSFI: return false; goto opvVc; Qh2hZ: ySLfm: goto MhqVu; YPEEQ: $this->errCode = $json["\145\162\162\x63\x6f\144\x65"]; goto MFww5; keveo: if (!(!$this->access_token && !$this->checkAuth())) { goto ySLfm; } goto yLswq; Ja11k: if (!(!$json || !empty($json["\145\x72\162\143\157\x64\145"]) || $json["\x65\x72\x72\x63\157\x64\x65"] != 0)) { goto HledW; } goto YPEEQ; iWH1r: $json = json_decode($result, true); goto Ja11k; opvVc: HledW: goto Hvf8x; ITOav: if (!$result) { goto RJ9ZV; } goto iWH1r; yLswq: return false; goto Qh2hZ; Hvf8x: return $json; goto N5WMq; MhqVu: $result = $this->http_post(self::API_URL_PREFIX . self::TAG_ADDUSER_URL . "\141\x63\x63\145\x73\163\137\x74\x6f\153\x65\x6e\75" . $this->access_token, self::json_encode($data)); goto ITOav; GrRPO: return false; goto Ik2rW; N5WMq: RJ9ZV: goto GrRPO; Ik2rW: } public function delTagUser($data) { goto hsWg8; sGSDx: if (!$result) { goto XFnBm; } goto KXWOs; Fryum: return false; goto EP1fB; Rhtpn: return false; goto kuDWr; KXWOs: $json = json_decode($result, true); goto jbEBc; edbhe: MgqUQ: goto fVwh1; ujRtx: return $json; goto qVDEs; kuDWr: ZDk82: goto ujRtx; cmIyo: return false; goto edbhe; c51pj: $this->errMsg = $json["\x65\162\x72\155\163\147"]; goto Rhtpn; jbEBc: if (!(!$json || !empty($json["\x65\162\162\143\x6f\144\x65"]) || $json["\x65\162\162\x63\157\x64\145"] != 0)) { goto ZDk82; } goto AAHiU; fVwh1: $result = $this->http_post(self::API_URL_PREFIX . self::TAG_DELUSER_URL . "\141\143\143\x65\163\x73\137\x74\x6f\153\145\x6e\75" . $this->access_token, self::json_encode($data)); goto sGSDx; qVDEs: XFnBm: goto Fryum; hsWg8: if (!(!$this->access_token && !$this->checkAuth())) { goto MgqUQ; } goto cmIyo; AAHiU: $this->errCode = $json["\145\x72\162\143\x6f\x64\x65"]; goto c51pj; EP1fB: } public function getTagList() { goto D6J6Q; L2lpD: if (!$result) { goto oQqhW; } goto LWZmR; xIn27: return false; goto sWfQL; rSKPf: oQqhW: goto xIn27; R_RJC: return $json; goto rSKPf; Wcr2l: $this->errMsg = $json["\x65\x72\162\x6d\163\x67"]; goto n82PG; D6J6Q: if (!(!$this->access_token && !$this->checkAuth())) { goto bQEWo; } goto RZVge; E7ZDW: $result = $this->http_get(self::API_URL_PREFIX . self::TAG_LIST_URL . "\x61\143\x63\x65\163\163\137\164\157\153\x65\156\75" . $this->access_token); goto L2lpD; p0hBg: if (!(!$json || !empty($json["\145\162\162\143\x6f\144\x65"]))) { goto Zcf4y; } goto u6vxi; LWZmR: $json = json_decode($result, true); goto p0hBg; RZVge: return false; goto iMbHj; YVRI5: Zcf4y: goto R_RJC; n82PG: return false; goto YVRI5; iMbHj: bQEWo: goto E7ZDW; u6vxi: $this->errCode = $json["\145\x72\x72\x63\157\144\x65"]; goto Wcr2l; sWfQL: } public function sendMessage($data) { goto Wpj1B; L6njD: if (!(!$json || !empty($json["\145\x72\x72\143\x6f\x64\145"]) || $json["\x65\x72\x72\x63\157\x64\x65"] != 0)) { goto pV55e; } goto GshrI; SJpwd: if (!$result) { goto fAhw0; } goto hGhFK; TCfTl: IGp1Z: goto DdT9a; EmBPd: return $json; goto tAgM2; XMdXv: return false; goto TCfTl; DdT9a: $result = $this->http_post(self::API_URL_PREFIX . self::MASS_SEND_URL . "\x61\x63\143\x65\x73\x73\137\164\157\153\x65\156\x3d" . $this->access_token, self::json_encode($data)); goto SJpwd; hGhFK: $json = json_decode($result, true); goto L6njD; XvX89: return false; goto WpV5S; tAgM2: fAhw0: goto XvX89; GshrI: $this->errCode = $json["\145\x72\162\143\x6f\144\x65"]; goto MvKtd; U_Njz: pV55e: goto EmBPd; MvKtd: $this->errMsg = $json["\x65\162\162\155\x73\x67"]; goto MTC6f; MTC6f: return false; goto U_Njz; Wpj1B: if (!(!$this->access_token && !$this->checkAuth())) { goto IGp1Z; } goto XMdXv; WpV5S: } public function authSucc($userid) { goto z8TdX; QzvKM: $json = json_decode($result, true); goto AhO2F; NG959: return $json; goto Qmq4C; Ttrtu: if (!$result) { goto KwDxH; } goto QzvKM; osoS1: $this->errMsg = $json["\145\x72\x72\155\163\147"]; goto LoeHi; LoeHi: return false; goto ps1Hf; jh1f6: $this->errCode = $json["\145\162\162\x63\x6f\x64\145"]; goto osoS1; Qmq4C: KwDxH: goto ISUoZ; ps1Hf: LJypP: goto NG959; SW7IA: jUL6M: goto HVEVC; z8TdX: if (!(!$this->access_token && !$this->checkAuth())) { goto jUL6M; } goto Vz7VM; HVEVC: $result = $this->http_get(self::API_URL_PREFIX . self::AUTHSUCC_URL . "\141\143\143\x65\163\x73\x5f\164\157\153\145\x6e\75" . $this->access_token . "\46\165\x73\145\162\x69\144\75" . $userid); goto Ttrtu; ISUoZ: return false; goto UPoq_; Vz7VM: return false; goto SW7IA; AhO2F: if (!(!$json || !empty($json["\145\x72\x72\143\x6f\144\x65"]) || $json["\145\162\x72\143\x6f\x64\145"] != 0)) { goto LJypP; } goto jh1f6; UPoq_: } public function getOauthRedirect($callback, $state = "\x53\x54\x41\124\x45", $scope = "\x73\x6e\x73\x61\160\x69\x5f\142\141\x73\x65") { return self::OAUTH_PREFIX . self::OAUTH_AUTHORIZE_URL . "\x61\x70\x70\151\x64\75" . $this->appid . "\46\162\x65\x64\x69\162\x65\143\x74\137\x75\162\151\75" . urlencode($callback) . "\46\x72\145\163\160\157\156\x73\145\137\164\x79\160\x65\x3d\143\157\x64\145\x26\163\x63\157\x70\x65\x3d" . $scope . "\x26\163\x74\x61\x74\x65\75" . $state . "\43\x77\x65\143\x68\141\164\x5f\x72\x65\144\151\x72\x65\x63\164"; } } goto ENTjK; iZ1YU: class ErrorCode { public static $OK = 0; public static $ValidateSignatureError = 40001; public static $ParseXmlError = 40002; public static $ComputeSignatureError = 40003; public static $IllegalAesKey = 40004; public static $ValidateAppidError = 40005; public static $EncryptAESError = 40006; public static $DecryptAESError = 40007; public static $IllegalBuffer = 40008; public static $EncodeBase64Error = 40009; public static $DecodeBase64Error = 40010; public static $GenReturnXmlError = 40011; public static $errCode = array("\x30" => "\xe6\x97\240\351\x97\256\xe9\242\230", "\x34\x30\60\60\x31" => "\347\xad\276\345\220\x8d\351\xaa\214\xe8\xaf\x81\351\224\231\350\xaf\xaf", "\64\x30\60\x30\62" => "\x78\x6d\x6c\xe8\xa7\xa3\xe6\236\x90\345\244\261\350\xb4\xa5", "\x34\x30\60\x30\63" => "\163\150\141\345\x8a\240\xe5\257\x86\xe7\x94\x9f\xe6\210\220\347\255\xbe\xe5\220\215\xe5\xa4\261\350\xb4\245", "\x34\60\x30\x30\64" => "\x65\x6e\143\x6f\x64\x69\x6e\147\101\145\x73\113\x65\x79\40\351\x9d\x9e\xe6\263\225", "\64\x30\x30\x30\65" => "\141\160\x70\151\144\x20\xe6\xa0\241\351\252\x8c\351\224\231\xe8\xaf\xaf", "\64\x30\60\x30\x36" => "\x61\x65\163\x20\345\x8a\xa0\xe5\xaf\x86\345\244\xb1\xe8\xb4\xa5", "\64\x30\x30\x30\x37" => "\141\x65\x73\40\xe8\xa7\243\345\257\x86\345\244\261\350\264\245", "\64\60\60\x30\70" => "\xe8\247\243\xe5\257\206\345\x90\216\345\276\227\345\x88\xb0\347\232\204\x62\x75\x66\146\x65\162\xe9\x9d\x9e\346\xb3\225", "\64\x30\x30\x30\71" => "\x62\x61\163\145\66\64\345\212\240\xe5\257\x86\345\xa4\261\xe8\264\xa5", "\x34\60\60\61\x30" => "\x62\x61\x73\x65\66\x34\350\xa7\xa3\345\xaf\206\xe5\xa4\261\xe8\264\245", "\64\x30\60\61\x31" => "\xe7\224\x9f\xe6\x88\x90\x78\155\x6c\xe5\xa4\261\350\264\xa5"); public static function getErrText($err) { goto q6S5r; hl9d0: return false; goto mP3mm; RFX2Q: kFogO: goto HDzf8; xB9kO: return self::$errCode[$err]; goto RFX2Q; q6S5r: if (isset(self::$errCode[$err])) { goto tAOzq; } goto hl9d0; mP3mm: goto kFogO; goto HU_Go; HU_Go: tAOzq: goto xB9kO; HDzf8: } }