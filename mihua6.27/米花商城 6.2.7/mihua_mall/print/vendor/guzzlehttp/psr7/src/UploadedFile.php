<?php
 namespace GuzzleHttp\Psr7; use InvalidArgumentException; use Psr\Http\Message\StreamInterface; use Psr\Http\Message\UploadedFileInterface; use RuntimeException; class UploadedFile implements UploadedFileInterface { private static $errors = array(UPLOAD_ERR_OK, UPLOAD_ERR_INI_SIZE, UPLOAD_ERR_FORM_SIZE, UPLOAD_ERR_PARTIAL, UPLOAD_ERR_NO_FILE, UPLOAD_ERR_NO_TMP_DIR, UPLOAD_ERR_CANT_WRITE, UPLOAD_ERR_EXTENSION); private $clientFilename; private $clientMediaType; private $error; private $file; private $moved = false; private $size; private $stream; public function __construct($streamOrFile, $size, $errorStatus, $clientFilename = null, $clientMediaType = null) { goto yMMuR; GAcJL: $this->setClientMediaType($clientMediaType); goto f3Og0; wvV7q: j6LZb: goto TwsF3; FrX4h: $this->setSize($size); goto ZoAR_; yMMuR: $this->setError($errorStatus); goto FrX4h; f3Og0: if (!$this->isOk()) { goto j6LZb; } goto O1O1y; O1O1y: $this->setStreamOrFile($streamOrFile); goto wvV7q; ZoAR_: $this->setClientFilename($clientFilename); goto GAcJL; TwsF3: } private function setStreamOrFile($streamOrFile) { goto Sl_BD; XsmQv: if ($streamOrFile instanceof StreamInterface) { goto Tg2sP; } goto az3vp; O6zYp: goto T_Exu; goto qAbNP; wRKmm: goto T_Exu; goto G9JRR; qAbNP: rbjfa: goto Af8Om; Jz17D: $this->stream = new Stream($streamOrFile); goto NGLAY; iYhiL: Tg2sP: goto DCyyG; NGLAY: goto T_Exu; goto iYhiL; G9JRR: GGHLU: goto Jz17D; eBk2Q: T_Exu: goto jV6FM; mFlwl: if (is_resource($streamOrFile)) { goto GGHLU; } goto XsmQv; Af8Om: $this->file = $streamOrFile; goto wRKmm; Sl_BD: if (is_string($streamOrFile)) { goto rbjfa; } goto mFlwl; az3vp: throw new InvalidArgumentException("\111\156\x76\x61\154\151\x64\40\163\x74\x72\145\141\155\x20\157\162\40\146\151\154\145\x20\x70\x72\x6f\166\151\144\145\144\40\146\x6f\162\40\125\160\x6c\x6f\141\x64\145\x64\x46\x69\154\x65"); goto O6zYp; DCyyG: $this->stream = $streamOrFile; goto eBk2Q; jV6FM: } private function setError($error) { goto IwTId; Q3PDj: $this->error = $error; goto M43zD; IwTId: if (!(false === is_int($error))) { goto rG8Qc; } goto kbehG; QroL1: rG8Qc: goto xxfh7; nV1zo: PCs5m: goto Q3PDj; TXUKe: throw new InvalidArgumentException("\x49\156\166\141\x6c\x69\144\40\x65\162\162\x6f\162\x20\163\164\141\x74\165\163\x20\x66\157\x72\x20\x55\160\x6c\157\141\144\145\x64\x46\151\x6c\145"); goto nV1zo; xxfh7: if (!(false === in_array($error, UploadedFile::$errors))) { goto PCs5m; } goto TXUKe; kbehG: throw new InvalidArgumentException("\x55\x70\x6c\x6f\141\x64\40\x66\151\154\x65\x20\145\162\162\157\x72\x20\163\164\x61\x74\165\163\40\155\165\x73\164\40\142\145\40\141\x6e\x20\151\x6e\x74\145\x67\x65\162"); goto QroL1; M43zD: } private function setSize($size) { goto lUReu; d3vBt: $this->size = $size; goto VvCnP; lUReu: if (!(false === is_int($size))) { goto s9Uxr; } goto lLhGg; yjeeK: s9Uxr: goto d3vBt; lLhGg: throw new InvalidArgumentException("\125\x70\x6c\x6f\x61\144\40\x66\151\x6c\x65\40\x73\151\172\145\x20\155\165\x73\164\x20\142\145\40\141\x6e\x20\x69\156\x74\x65\147\145\x72"); goto yjeeK; VvCnP: } private function isStringOrNull($param) { return in_array(gettype($param), ["\x73\x74\x72\x69\156\147", "\116\x55\114\x4c"]); } private function isStringNotEmpty($param) { return is_string($param) && false === empty($param); } private function setClientFilename($clientFilename) { goto jVS5I; VwGi5: MmM7X: goto zXI86; jVS5I: if (!(false === $this->isStringOrNull($clientFilename))) { goto MmM7X; } goto v_aXB; v_aXB: throw new InvalidArgumentException("\x55\160\154\x6f\x61\x64\x20\146\x69\x6c\x65\40\x63\x6c\151\145\156\164\40\146\151\x6c\145\156\x61\x6d\x65\x20\x6d\x75\x73\164\x20\142\x65\40\x61\40\163\x74\x72\151\x6e\147\40\157\x72\40\x6e\165\154\x6c"); goto VwGi5; zXI86: $this->clientFilename = $clientFilename; goto N6SK6; N6SK6: } private function setClientMediaType($clientMediaType) { goto IIC0y; oob26: throw new InvalidArgumentException("\x55\x70\x6c\157\141\144\40\146\151\x6c\145\40\x63\154\151\145\x6e\x74\40\x6d\x65\144\x69\141\40\164\x79\x70\x65\40\155\165\x73\x74\x20\142\145\x20\141\40\x73\x74\162\x69\x6e\x67\40\157\162\x20\156\165\x6c\x6c"); goto V8ip7; u9EK3: $this->clientMediaType = $clientMediaType; goto HIpMg; IIC0y: if (!(false === $this->isStringOrNull($clientMediaType))) { goto uJYA8; } goto oob26; V8ip7: uJYA8: goto u9EK3; HIpMg: } private function isOk() { return $this->error === UPLOAD_ERR_OK; } public function isMoved() { return $this->moved; } private function validateActive() { goto LrMk3; KvXhm: throw new RuntimeException("\x43\x61\156\156\x6f\164\40\x72\145\164\162\x69\145\166\x65\40\163\164\162\x65\x61\x6d\x20\x64\x75\x65\40\x74\x6f\40\x75\160\x6c\x6f\141\x64\40\145\162\x72\x6f\162"); goto keRtG; Oytzi: qNXkx: goto rqef8; keRtG: TH1uk: goto mLtQ8; mx613: throw new RuntimeException("\103\141\x6e\x6e\157\164\40\x72\x65\164\x72\x69\x65\166\145\40\x73\x74\x72\145\141\x6d\40\141\x66\x74\x65\162\x20\151\164\40\150\x61\x73\40\x61\154\162\x65\141\x64\171\x20\x62\145\x65\x6e\40\x6d\157\x76\145\144"); goto Oytzi; LrMk3: if (!(false === $this->isOk())) { goto TH1uk; } goto KvXhm; mLtQ8: if (!$this->isMoved()) { goto qNXkx; } goto mx613; rqef8: } public function getStream() { goto f7pDl; f7pDl: $this->validateActive(); goto z0GNR; vzzCh: return $this->stream; goto J5qW8; J5qW8: uAOhu: goto vd5Zk; vd5Zk: return new LazyOpenStream($this->file, "\x72\x2b"); goto SfrmC; z0GNR: if (!$this->stream instanceof StreamInterface) { goto uAOhu; } goto vzzCh; SfrmC: } public function moveTo($targetPath) { goto WMHVp; VLoCm: QDfGE: goto FO4DN; JQJGK: nMZRN: goto Hg02c; nfJy_: if (!(false === $this->moved)) { goto nMZRN; } goto Wgpda; WMHVp: $this->validateActive(); goto WOPFD; FO4DN: if ($this->file) { goto gef4W; } goto UvGGr; e2ysN: gef4W: goto G3RVS; WOPFD: if (!(false === $this->isStringNotEmpty($targetPath))) { goto QDfGE; } goto XfoZF; FgoEM: goto YTwzD; goto e2ysN; Wgpda: throw new RuntimeException(sprintf("\x55\160\154\157\141\144\145\x64\40\146\x69\154\x65\40\143\x6f\x75\154\x64\x20\156\x6f\164\x20\x62\x65\40\155\157\166\x65\144\40\x74\x6f\x20\45\163", $targetPath)); goto JQJGK; XfoZF: throw new InvalidArgumentException("\111\x6e\166\x61\154\151\144\40\160\141\x74\x68\x20\160\162\x6f\x76\151\144\x65\x64\x20\x66\157\x72\40\x6d\157\x76\145\40\157\x70\145\162\x61\x74\x69\157\156\x3b\40\155\165\x73\x74\40\142\x65\40\141\40\156\x6f\156\x2d\x65\x6d\160\x74\171\x20\x73\x74\162\151\156\147"); goto VLoCm; V8wiW: YTwzD: goto nfJy_; G3RVS: $this->moved = php_sapi_name() == "\143\154\151" ? rename($this->file, $targetPath) : move_uploaded_file($this->file, $targetPath); goto V8wiW; ks75Y: $this->moved = true; goto FgoEM; UvGGr: copy_to_stream($this->getStream(), new LazyOpenStream($targetPath, "\167")); goto ks75Y; Hg02c: } public function getSize() { return $this->size; } public function getError() { return $this->error; } public function getClientFilename() { return $this->clientFilename; } public function getClientMediaType() { return $this->clientMediaType; } }