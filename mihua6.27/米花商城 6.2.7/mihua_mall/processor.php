<?php
 goto sF5Yw; l4XJI: require IA_ROOT . "\x2f\141\144\144\157\156\163\57\155\151\x68\x75\141\137\x6d\141\x6c\x6c\x2f\x6d\171\x63\x6c\x61\x73\x73\x2f\x4d\145\163\163\x61\147\x65\56\x63\154\x61\163\x73\56\x70\150\x70"; goto UlV7k; UlV7k: require IA_ROOT . "\57\141\x64\x64\157\x6e\163\57\155\151\x68\165\141\137\155\141\x6c\x6c\x2f\155\x79\143\x6c\x61\163\x73\57\x51\x72\x5f\143\157\144\145\x2e\x63\x6c\141\163\163\x2e\x70\150\x70"; goto F2UF_; F2UF_: require IA_ROOT . "\x2f\141\x64\x64\x6f\x6e\163\x2f\x6d\151\150\x75\141\137\x6d\x61\154\154\x2f\x6d\x6f\x64\x65\x6c\x2f\x6d\157\144\x65\154\x5f\165\163\x65\x72\56\x63\x6c\141\163\x73\56\x70\150\x70"; goto hDLwa; hDLwa: require IA_ROOT . "\57\141\144\144\157\156\163\57\155\151\x68\x75\x61\137\x6d\141\154\x6c\57\155\x79\143\154\141\163\x73\57\x55\164\x69\154\56\143\x6c\x61\x73\163\x2e\160\x68\160"; goto B2bTE; tfEO1: require IA_ROOT . "\57\x61\144\144\157\x6e\x73\57\155\x69\150\165\x61\137\x6d\141\x6c\x6c\57\x6d\171\143\x6c\x61\163\x73\57\146\165\x6e\143\x2e\160\x68\160"; goto l4XJI; XwgGG: require IA_ROOT . "\x2f\141\144\x64\157\x6e\163\x2f\155\x69\x68\165\x61\x5f\155\x61\x6c\154\57\155\171\x63\x6c\141\163\x73\x2f\141\x75\x74\x6f\x4c\157\141\144\x2e\160\150\160"; goto tfEO1; sF5Yw: defined("\111\116\137\x49\x41") or exit("\x41\143\143\145\x73\x73\40\x44\145\156\151\x65\144"); goto XwgGG; B2bTE: class mihua_mallModuleProcessor extends WeModuleProcessor { public function respond() { goto jUXW7; kA03O: D("\155\145\155\142\x65\162")->dataAdd($data); goto wz9aZ; H6QMB: $creidit1 = $this->procredit($profile_share2["\x66\162\157\x6d\137\165\163\145\162"]); goto xPxLA; wz9aZ: $have_or_not = pdo_fetch("\123\x45\x4c\105\103\x54\40\x2a\x20\106\122\x4f\115\40" . tablename("\155\x69\x68\165\x61\137\155\x61\x6c\154\137\155\x65\x6d\x62\145\x72") . "\x20\127\x48\105\x52\105\x20\x20\x66\162\157\155\x5f\165\163\x65\162\75\72\146\162\x6f\155\137\165\x73\145\x72\40\141\x6e\144\x20\165\x6e\x69\141\143\151\x64\75\x3a\165\x6e\x69\141\x63\x69\144", array("\x3a\146\x72\157\x6d\x5f\x75\163\145\162" => $from_user, "\72\x75\x6e\151\x61\143\151\x64" => $uniacid)); goto vLR0b; OSymZ: $notice = Util::msg_tjrtzewm($nickname, $profile_share["\162\x65\141\154\156\x61\155\x65"], "\164\x6a\162\164\x7a\145\167\x6d"); goto ddSUv; CG8BR: $rule = pdo_fetch("\x73\145\x6c\x65\x63\164\x20\52\x20\x66\162\x6f\155\x20" . tablename("\x72\x75\154\145") . "\x20\x77\x68\145\x72\145\40\x69\x64\x3d\72\162\x69\x64", array("\162\x69\x64" => $keysword["\x72\x69\x64"])); goto HVOL1; FMxih: Lwxwd: goto hnCc2; xh3bc: $creidit1 = $this->procredit($profile_share3["\x66\162\157\155\137\x75\163\145\x72"]); goto OSymZ; QgW_W: $this->message["\145\x76\x65\156\164\153\x65\x79"] = $this->message["\x73\143\x65\156\x65"]; goto rkRVC; oujoA: $notice = Util::msg_tjrtzewm($nickname, $profile_share["\x72\145\x61\154\156\x61\155\145"], "\x74\x6a\162\164\172\144\154"); goto pYcOk; JScbO: return $this->loadImg_QR($account, 10, "\167\x65\151\x78\151\x6e\x5f\x71\x72"); goto GZ098; hnCc2: $fansx = mc_fetch($uid, array("\156\x69\143\153\156\x61\155\145", "\141\166\141\x74\x61\x72")); goto A2fZ_; Xxwtg: $uid = mc_openid2uid($from_user); goto irhJV; moKR0: if (!($this->message["\x63\157\x6e\x74\145\x6e\x74"] == "\x66\x72\x6f\155\137\165\x73\x65\162\137\161\x72")) { goto eLWjU; } goto QgW_W; ibU0v: return $this->loadImg_QR($account, 11, "\160\x72\x6f\x64\x75\x63\x74\137\x71\162"); goto rtyCp; QGAqq: $seid = $profile_share["\x69\x64"]; goto bOGU4; e6GJN: load()->model("\155\x63"); goto Lsym6; N_PhI: $notice = Util::msg_tjrtzewm($nickname, $profile_share["\x72\x65\141\154\x6e\x61\155\145"], "\x74\152\162\164\x7a\x65\x77\155"); goto yguEI; LC4HN: $account_api = WeAccount::create(); goto fx1Wb; bOGU4: YzVPl: goto JxsZh; e7QJa: $profile_share2 = D("\155\x65\x6d\x62\x65\162")->dataEdit($profile_share["\163\x68\x61\x72\x65\151\x64"], false); goto H6QMB; Rsd9x: $this->autoRegedit($from_user); goto gDTKI; r44I0: goto fKrC2; goto OB2YH; irhJV: if (!empty($uid)) { goto OkYJd; } goto Rsd9x; suT1H: Wjc61: goto wHxbY; RB2Lj: global $_W; goto p9c0q; LvvQC: $this->sendcustomMsg($account, $profile_share["\x66\162\x6f\155\137\165\163\145\162"], "\345\276\210\xe6\212\261\xe6\255\x89\357\xbc\x8c\344\270\x8d\xe8\x83\xbd\xe6\210\220\344\270\272\xe8\x87\252\xe5\xb7\xb1\xe7\x9a\204\344\xb8\x8b\347\xba\xa7\345\x93\xa6"); goto WLSa8; Crz7p: $keysword = pdo_fetch("\163\x65\154\145\x63\x74\40\x2a\40\146\162\x6f\155\x20" . tablename("\162\x75\154\145\137\153\145\x79\167\x6f\162\144") . "\x20\167\x68\145\x72\x65\40\x63\157\x6e\164\x65\x6e\164\75\72\143\157\156\x74\145\x6e\164\40\141\x6e\x64\x20\x6d\x6f\144\x75\x6c\x65\x3d\x27\x6d\151\150\x75\141\137\x6d\x61\154\x6c\x27\x20\x61\156\x64\x20\x73\164\141\164\x75\x73\x3d\x31\x20", array("\x63\x6f\156\x74\x65\x6e\164" => $this->message["\x63\157\156\x74\145\x6e\164"])); goto UWcpz; A2fZ_: $profile = D("\x6d\145\x6d\x62\x65\x72")->edit($params, false); goto GViIg; t4BJx: efVyT: goto yNIBF; MeDBc: $creidit1 = $this->procredit($profile_share["\146\x72\x6f\x6d\137\165\163\145\162"]); goto N_PhI; J67eB: if (empty($profile["\151\x64"])) { goto P3snt; } goto oujoA; vqZg3: if (!($profile_share["\146\x72\x6f\155\137\x75\x73\x65\162"] == $from_user)) { goto IxJye; } goto LvvQC; S2OZT: $notice = Util::msg_tjrtzewm($nickname, $profile_share["\x72\145\141\154\156\141\x6d\x65"], "\164\152\x72\164\172"); goto Do7Eu; UWcpz: if (!$keysword) { goto Z9ueH; } goto CG8BR; gDTKI: $uid = mc_openid2uid($from_user); goto zkloi; wHxbY: if (!($profile_share2["\163\x68\x61\162\145\151\x64"] > 0)) { goto efVyT; } goto t1DtY; JxsZh: $from_user = $this->message["\x66\162\x6f\155"]; goto P6kIj; OB2YH: P3snt: goto L17LF; ddSUv: $this->sendcustomMsg($account, $profile_share3["\x66\162\x6f\x6d\137\x75\163\x65\x72"], $notice); goto t4BJx; yBSGl: yf5Xc: goto cAxJJ; w_xAj: $this->sendcustomMsg($account, $profile_share2["\146\162\x6f\155\137\x75\163\145\162"], $notice); goto suT1H; zkloi: OkYJd: goto bzci9; p9c0q: $config = $this->module["\x63\x6f\x6e\146\x69\x67"]; goto e6GJN; mnODl: if (!$profile_share) { goto YzVPl; } goto QGAqq; m8Sth: $profile_share = D("\x6d\x65\x6d\142\145\162")->dataEdit($this->message["\163\x63\x65\156\145"], false); goto mnODl; xPxLA: $notice = Util::msg_tjrtzewm($nickname, $profile_share["\x72\x65\x61\154\156\141\x6d\145"], "\x74\x6a\162\164\172\145\x77\155"); goto w_xAj; Jo7D7: YXTaG: goto J3_kg; MJ55M: if (!(empty($myfansx["\156\x69\143\153\156\141\x6d\145"]) || empty($myfansx["\141\x76\x61\164\x61\162"]))) { goto Lwxwd; } goto LC4HN; yguEI: $this->sendcustomMsg($account, $profile_share["\x66\x72\x6f\155\x5f\165\x73\x65\x72"], $notice); goto iJgzT; rtyCp: J0S1w: goto Crz7p; P6kIj: $params["\146\x72\157\x6d\x5f\x75\x73\145\162"] = $from_user; goto agQTO; LVLut: if (!($this->message["\x63\x6f\156\x74\145\x6e\164"] == "\155\x69\150\x75\x61\137\155\141\x6c\154" && $this->message["\163\143\145\x6e\145"] > 0 || $this->message["\143\157\156\x74\x65\x6e\164"] == "\146\x72\x6f\155\x5f\x75\163\x65\x72\x5f\x71\x72")) { goto Z6bas; } goto moKR0; fx1Wb: $myfansx = $account_api->fansQueryInfo($this->message["\146\162\157\x6d"]); goto MV21R; WLSa8: exit; goto Jcrhc; agQTO: $uniacid = $_W["\165\156\151\141\x63\x69\144"]; goto Xxwtg; t1DtY: $profile_share3 = D("\x6d\145\155\x62\145\x72")->dataEdit($profile_share2["\163\x68\141\x72\x65\x69\144"], false); goto xh3bc; L17LF: $data = array("\x75\156\151\x61\143\151\144" => $uniacid, "\146\x72\x6f\155\137\165\x73\145\162" => $from_user, "\162\145\141\x6c\156\141\x6d\145" => $nickname, "\143\157\x6d\155\151\163\163\151\157\x6e" => 0, "\143\x72\x65\x61\164\x65\164\x69\155\145" => TIMESTAMP, "\x73\x68\x61\x72\145\151\x64" => $seid, "\x73\x74\141\x74\x75\x73" => 1, "\x66\154\141\x67" => 0, "\x75\151\144" => $uid, "\160\x77\144" => "\x65\x72"); goto kA03O; Pc5Hu: if (!($this->message["\143\157\156\164\x65\x6e\164"] == "\xe5\210\206\xe9\x94\x80\xe4\xb8\223\xe5\xb1\x9e\xe4\272\x8c\xe7\xbb\xb4\xe7\xa0\x81")) { goto YXTaG; } goto pg2yI; J3_kg: if (!strstr($this->message["\x63\x6f\x6e\x74\x65\x6e\x74"], "\344\272\xa7\xe5\x93\201\53")) { goto J0S1w; } goto ibU0v; pYcOk: $this->sendcustomMsg($account, $profile_share["\x66\x72\157\x6d\x5f\165\x73\145\x72"], $notice); goto lBcQ0; jUXW7: load()->func("\x6c\x6f\147\147\x69\x6e\x67"); goto RB2Lj; K_LMu: pdo_update("\x6d\x63\x5f\x6d\x65\x6d\142\145\x72\163", array("\x61\166\x61\x74\141\x72" => $myfansx["\x68\145\x61\x64\x69\155\x67\x75\x72\154"], "\x6e\x69\143\x6b\x6e\141\x6d\145" => $myfansx["\x6e\x69\143\x6b\156\141\155\x65"]), array("\165\151\x64" => $uid, "\x75\156\x69\x61\143\x69\144" => $_W["\x75\x6e\x69\141\143\151\x64"])); goto TlnU3; Jcrhc: IxJye: goto J67eB; Lsym6: $account = $_W["\x61\x63\143\157\x75\x6e\x74"]; goto Pc5Hu; MV21R: pdo_update("\155\143\x5f\x6d\x61\160\x70\151\x6e\147\x5f\146\141\156\x73", array("\156\x69\x63\x6b\x6e\x61\x6d\x65" => $myfansx["\x6e\x69\x63\x6b\156\x61\155\x65"]), array("\x75\x69\x64" => $uid, "\165\x6e\x69\x61\x63\x69\x64" => $_W["\x75\x6e\151\x61\143\151\144"])); goto K_LMu; pg2yI: return $this->loadImg_QR($account, 1, '', "\x20\x61\x6e\x64\x20\x61\x63\164\151\x76\x65\x3d\x31\40"); goto Jo7D7; HJHj2: Z6bas: goto BzADq; Do7Eu: $this->sendcustomMsg($account, $from_user, $notice); goto MeDBc; jKsS0: pdo_insert("\155\x69\x68\165\141\137\155\141\154\154\137\x6d\145\x6d\142\145\162", $data); goto yBSGl; lBcQ0: exit; goto r44I0; bzci9: $myfansx = mc_fetch($uid); goto MJ55M; GZ098: yRJas: goto YQvbp; yNIBF: exit; goto KS1Dz; KS1Dz: fKrC2: goto HJHj2; rkRVC: eLWjU: goto m8Sth; HVOL1: if (!($rule["\x6e\x61\x6d\145"] == "\350\277\x9b\345\x85\xa5\345\205\xac\xe4\274\x97\345\217\xb7\x28\347\xb3\xbb\347\xbb\237\347\xbb\xb4\346\x8a\xa4\51")) { goto yRJas; } goto JScbO; cAxJJ: $creidit2 = $this->procredit($from_user, "\x31"); goto S2OZT; YQvbp: Z9ueH: goto LVLut; TlnU3: mc_update($uid, array("\x61\166\141\164\141\x72" => $myfansx["\x68\145\141\144\151\155\147\x75\162\154"], "\156\151\143\x6b\156\x61\x6d\145" => $myfansx["\x6e\151\x63\153\156\x61\x6d\145"])); goto FMxih; GViIg: $nickname = $myfansx["\x6e\x69\x63\153\x6e\x61\x6d\x65"]; goto vqZg3; vLR0b: if ($have_or_not) { goto yf5Xc; } goto jKsS0; iJgzT: if (!($profile_share["\163\x68\141\x72\x65\151\144"] > 0)) { goto Wjc61; } goto e7QJa; BzADq: } public function autoRegedit($from_user, $account = '') { goto Zcy_e; d_ACz: logging_run($info); goto KKoQ0; uCWlo: pdo_update("\155\151\150\x75\x61\x5f\155\x61\x6c\x6c\x5f\x6d\x65\x6d\142\x65\x72", $data, array("\x69\x64" => $profile["\151\144"])); goto eMpMl; k6yqt: pdo_update("\x6d\143\x5f\x6d\141\160\x70\151\x6e\147\x5f\x66\x61\156\x73", array("\165\151\x64" => $uid), array("\x66\141\156\151\144" => $myfansx["\146\x61\156\151\144"])); goto I0pGw; Gy2GP: $access_token = $this->get_weixin_token(); goto CbI02; rJetb: $seid = 0; goto LzzBN; GDmIC: $seid = $shareids["\x73\150\x61\x72\x65\155\151\144"]; goto AlscT; FQ0UX: $profile = pdo_fetch("\123\x45\114\x45\103\x54\40\146\x72\157\155\x5f\165\163\x65\162\x2c\151\144\54\162\x65\141\154\156\141\x6d\145\x2c\x75\x69\144\40\106\x52\117\115\40" . tablename("\x6d\x69\150\165\141\137\155\x61\154\x6c\x5f\155\145\155\142\x65\x72") . "\x20\127\110\105\x52\x45\40\140\165\x6e\151\141\143\151\144\x60\x20\x3d\40\x3a\x75\x6e\151\x61\x63\x69\144\40\101\x4e\104\x20\x66\162\x6f\155\x5f\x75\x73\x65\162\x3d\x3a\146\x72\157\155\137\x75\163\x65\x72\40", array("\x3a\165\156\x69\x61\x63\151\144" => $_W["\x75\156\151\141\x63\151\144"], "\x3a\146\162\157\155\137\165\163\145\x72" => $from_user)); goto bYHLL; D1VqT: GUSTF: goto xhR9g; QY3P3: $joinfans = pdo_fetch("\123\105\114\x45\x43\124\40\x6f\x70\x65\x6e\151\144\x2c\x6e\x69\143\x6b\x6e\x61\155\x65\x20\106\122\117\x4d\40" . tablename("\155\143\x5f\x6d\x61\x70\x70\151\x6e\147\137\x66\x61\156\163") . "\x20\x57\110\105\x52\105\x20\x60\x75\156\x69\x61\143\x69\144\x60\40\x3d\40\72\165\x6e\x69\141\x63\x69\144\x20\x41\116\104\x20\157\160\x65\156\x69\x64\x3d\72\x66\x72\x6f\155\137\x75\x73\x65\x72\x20\x6c\x69\155\x69\164\40\61", array("\72\x75\156\x69\141\143\151\x64" => $_W["\165\156\x69\x61\143\151\x64"], "\x3a\146\162\157\155\x5f\x75\163\145\x72" => $from_user)); goto g9nm8; gnrZH: if (!empty($profile["\162\x65\x61\154\156\x61\155\145"])) { goto YP4c_; } goto A9uzA; wR_RT: K7e1T: goto fcF5X; xhR9g: $member_data = pdo_fetch("\123\x45\x4c\x45\103\x54\x20\x2a\40\106\122\x4f\115\x20" . tablename("\155\x69\x68\x75\141\x5f\x6d\x61\154\154\x5f\x6d\x65\x6d\x62\x65\162") . "\40\127\110\105\x52\x45\x20\40\x75\x6e\151\x61\x63\x69\x64\x20\x3d\x20\x3a\x75\x6e\x69\x61\143\151\144\40\x61\x6e\144\x20\x66\x72\157\155\137\x75\x73\145\x72\x20\75\x20\72\x66\162\157\155\x5f\165\163\145\162", array("\x3a\165\x6e\x69\141\143\151\144" => $_W["\x75\x6e\x69\x61\x63\x69\144"], "\72\x66\162\x6f\155\x5f\165\x73\x65\x72" => $from_user)); goto IlAbj; g9nm8: twPWg: goto Ici_s; KKoQ0: if (empty($nickname)) { goto EnaTX; } goto V0VLm; LzzBN: goto K7e1T; goto BYiV8; yLrbZ: $data = array("\x72\145\141\154\x6e\x61\155\x65" => $nickname); goto uCWlo; lgv3H: pdo_update("\155\151\150\x75\141\137\x6d\141\x6c\154\x5f\155\145\x6d\x62\145\162", $data, array("\146\x72\x6f\x6d\x5f\165\163\145\162" => $from_user)); goto Nv1Ob; hZDvq: pdo_insert("\155\151\150\165\141\137\155\141\154\x6c\x5f\155\x65\x6d\x62\145\x72", $data); goto B5h31; JOzg5: goto whBKD; goto MHzZU; jfWde: $nickname = $myfansx["\156\151\x63\x6b\156\x61\x6d\145"]; goto jJyyR; cfCdR: $uid = mc_openid2uid($from_user); goto uVg57; PGRkY: $data = array("\165\151\x64" => $uid); goto raHqD; P4RAE: logging_run($content); goto vSFID; IlAbj: if (!empty($member_data)) { goto i3LS_; } goto hZDvq; V0VLm: pdo_update("\155\143\x5f\x6d\x61\x70\160\x69\156\147\137\x66\141\x6e\x73", array("\156\x69\x63\x6b\x6e\141\155\x65" => $nickname, "\x61\x63\151\x64" => $_W["\141\x63\x69\x64"]), array("\x66\x61\156\x69\x64" => $myfansx["\x66\141\x6e\x69\x64"])); goto HWnIl; KRssF: if ($theone["\160\x72\x6f\155\x6f\164\x65\162\x74\x69\x6d\145\163"] == 1) { goto lCiy2; } goto in7Wd; NnP40: logging_run("\75\75\75\75\75\x3d\75\75\x3d\x3d\75\x3d\75\x20\x69\156\146\157\40\75\x3d\x3d\x3d\x3d\x3d\75\75\75\x3d\x3d\x3d\x3d\x3d\75\75\x20"); goto d_ACz; gcfHH: if (empty($info["\150\x65\x61\144\151\x6d\147\165\162\154"])) { goto SvVtM; } goto N7h0b; TZASl: if (!($member["\x66\154\141\x67"] != 1)) { goto BEYLa; } goto tL4rA; BYiV8: K0PoS: goto GDmIC; E2FgM: SvVtM: goto ozxSa; Zcy_e: global $_W, $_GPC; goto y4_gs; zz5zp: load()->func("\143\x6f\155\x6d\x75\x6e\x69\x63\x61\x74\x69\x6f\156"); goto FkSL8; tL4rA: $seid = 0; goto NU4FS; in7Wd: $data = array("\165\156\151\141\143\x69\x64" => $_W["\165\x6e\151\x61\143\x69\144"], "\146\x72\157\155\x5f\x75\163\x65\162" => $from_user, "\x72\145\141\x6c\156\x61\x6d\145" => $nickname, "\x63\157\155\x6d\x69\163\163\x69\157\x6e" => 0, "\143\x72\145\141\x74\145\x74\151\x6d\x65" => TIMESTAMP, "\x66\154\x61\147\164\151\155\x65" => TIMESTAMP, "\x73\x68\x61\162\145\x69\144" => $seid, "\163\x74\x61\164\165\163" => 1, "\146\154\x61\x67" => 0, "\x75\x69\x64" => $uid); goto My_Cn; AlscT: $member = $this->getMember($shareids["\x73\150\x61\162\145\x6d\151\x64"]); goto TZASl; gn6r3: $uid = pdo_insertid(); goto QPK3U; fzaip: if (!(empty($uid) && empty($myfansx["\165\151\x64"]))) { goto HLPAB; } goto LeoA5; Ici_s: whBKD: goto ZHvyD; I0pGw: HLPAB: goto oL3uu; co81r: if (!empty($shareids["\x73\150\141\162\x65\155\x69\x64"])) { goto K0PoS; } goto rJetb; vSFID: $info = @json_decode($content["\143\157\x6e\x74\145\x6e\x74"], true); goto Bgtu1; oL3uu: $seid = 0; goto UNZY7; MHzZU: qFJBT: goto co81r; N7h0b: pdo_update("\x6d\143\x5f\155\x65\x6d\142\145\x72\163", array("\x61\166\141\164\x61\162" => $info["\x68\x65\141\144\x69\x6d\147\x75\x72\154"]), array("\x75\x69\144" => $uid)); goto E2FgM; siSu3: i3LS_: goto lgv3H; aBt14: ItRDX: goto gnrZH; My_Cn: goto GUSTF; goto AQrPZ; fcF5X: $theone = pdo_fetch("\123\x45\114\105\x43\x54\40\x2a\40\x46\x52\x4f\115\40" . tablename("\155\x69\150\x75\141\x5f\155\x61\x6c\154\137\162\x75\154\145\163") . "\x20\x57\x48\105\122\105\x20\x20\x75\x6e\x69\141\143\x69\144\x20\75\x20\x3a\165\x6e\x69\141\x63\151\x64", array("\x3a\x75\156\151\141\x63\151\144" => $_W["\165\156\x69\x61\143\x69\x64"])); goto KRssF; y4omd: $sharemember = pdo_fetch("\123\105\114\x45\x43\124\x20\146\x72\157\155\x5f\x75\163\145\162\54\151\x64\x20\106\x52\x4f\115\x20" . tablename("\x6d\x69\x68\165\141\x5f\155\141\x6c\154\x5f\155\x65\x6d\142\145\162") . "\x20\x57\x48\105\x52\x45\x20\140\165\x6e\151\x61\143\151\x64\x60\40\75\40\x3a\x75\156\151\x61\x63\x69\144\40\101\x4e\x44\40\x69\x64\75\x3a\x69\x64\40", array("\72\x75\x6e\x69\141\143\x69\x64" => $_W["\165\x6e\x69\141\x63\151\144"], "\72\151\144" => $seid)); goto QY3P3; tsbCh: YP4c_: goto JOzg5; m4bND: logging_run("\x3d\x3d\x3d\x3d\75\x3d\75\75\75\x3d\x3d\x3d\x3d\143\157\x6d\145\x20\x69\x6e\75\x3d\x3d\75\x3d\75\75\75\x3d\x3d\75\x3d\75\x3d\x3d\x3d\40"); goto Gy2GP; HWnIl: EnaTX: goto gcfHH; aLXc_: if (!empty($profile["\165\x69\x64"])) { goto ItRDX; } goto PGRkY; Nv1Ob: lwfZz: goto vmD0U; A9uzA: if (empty($nickname)) { goto K63ZF; } goto yLrbZ; jJyyR: if (!(empty($nickname) || empty($myfansx["\x75\x69\x64"]))) { goto xOCRy; } goto m4bND; uVg57: $myfansx = pdo_fetch("\x53\105\114\105\103\124\40\165\x69\x64\x2c\40\146\141\156\x69\144\54\x6f\x70\145\156\151\x64\54\x6e\x69\x63\153\x6e\141\155\x65\x2c\146\157\154\x6c\157\167\40\x46\x52\117\115\40" . tablename("\x6d\x63\x5f\155\x61\x70\160\x69\x6e\147\137\146\141\156\163") . "\x20\127\110\105\x52\x45\x20\x60\165\x6e\151\x61\143\151\x64\140\x20\75\x20\72\165\156\151\x61\x63\x69\x64\40\101\116\104\x20\157\160\x65\x6e\x69\144\75\72\x66\162\x6f\155\x5f\x75\x73\x65\x72\40\154\x69\x6d\x69\x74\x20\x31", array("\72\x75\x6e\x69\x61\143\151\x64" => $_W["\165\156\x69\141\x63\x69\144"], "\x3a\x66\x72\157\x6d\x5f\x75\163\x65\162" => $from_user)); goto fzaip; vmD0U: if (!(!empty($seid) && $seid != 0 && $theone["\160\162\157\155\x6f\164\145\162\x74\151\155\145\163"] == 1)) { goto twPWg; } goto y4omd; INCD3: logging_run("\75\x3d\x3d\75\75\x3d\x3d\x3d\75\75\75\x3d\x3d\x20\44\143\157\x6e\x74\x65\x6e\x74\x3d\x3d\x3d\75\x3d\x3d\75\x3d\75\75\75\75\x3d\75\75\x3d\40"); goto P4RAE; QPK3U: $_W["\x6d\x65\155\142\145\162"]["\165\151\x64"] = $uid; goto YxtmY; BGIF1: $data = array("\165\156\x69\x61\x63\151\x64" => $_W["\165\x6e\151\141\x63\x69\144"], "\146\162\x6f\155\x5f\x75\x73\x65\162" => $from_user, "\x72\145\141\x6c\156\x61\x6d\x65" => $nickname, "\x63\x6f\x6d\x6d\x69\x73\x73\x69\x6f\156" => 0, "\143\x72\x65\141\164\145\164\x69\x6d\145" => TIMESTAMP, "\146\154\x61\147\x74\151\x6d\145" => TIMESTAMP, "\x73\x68\141\162\x65\151\144" => $seid, "\163\164\x61\x74\165\x73" => 1, "\x66\x6c\141\x67" => 1, "\165\151\144" => $uid); goto D1VqT; raHqD: pdo_update("\x6d\x69\x68\165\141\137\x6d\x61\x6c\154\137\x6d\x65\155\142\x65\x72", $data, array("\x69\x64" => $profile["\x69\x64"])); goto aBt14; FkSL8: $content = ihttp_get($oauth2_url); goto INCD3; Bgtu1: $nickname = $info["\156\x69\x63\x6b\x6e\141\x6d\145"]; goto NnP40; UNZY7: $shareids = pdo_fetch("\123\105\114\105\103\124\x20\52\40\x46\x52\117\x4d\40" . tablename("\x6d\x69\x68\x75\141\x5f\x6d\141\x6c\x6c\137\163\150\141\x72\145\137\x68\x69\163\x74\x6f\162\171") . "\x20\127\x48\x45\122\105\40\x20\146\x72\x6f\x6d\137\165\163\x65\162\x3d\72\146\162\x6f\155\137\x75\x73\x65\x72\40\x61\156\x64\40\165\156\151\x61\143\x69\x64\x3d\x3a\165\x6e\x69\141\143\151\x64\40\154\x69\x6d\x69\x74\x20\x31", array("\72\x66\162\x6f\155\137\x75\x73\145\162" => $from_user, "\72\x75\156\x69\x61\x63\x69\144" => $_W["\x75\156\151\x61\x63\x69\144"])); goto jfWde; B5h31: goto lwfZz; goto siSu3; YxtmY: $_W["\x66\141\x6e\x73"]["\x75\151\144"] = $uid; goto k6yqt; LeoA5: pdo_insert("\155\143\x5f\x6d\145\155\142\x65\162\x73", array("\165\x6e\x69\141\x63\151\144" => $_W["\165\156\151\141\143\151\144"])); goto gn6r3; eMpMl: K63ZF: goto tsbCh; ozxSa: xOCRy: goto FQ0UX; NU4FS: BEYLa: goto wR_RT; CbI02: $oauth2_url = "\150\x74\x74\x70\x73\x3a\57\57\x61\x70\151\56\x77\x65\x69\x78\x69\x6e\56\x71\161\56\x63\x6f\155\x2f\143\x67\151\x2d\x62\x69\x6e\x2f\x75\x73\145\x72\x2f\151\x6e\146\x6f\x3f\x61\x63\143\x65\163\x73\x5f\164\157\x6b\x65\x6e\75" . $access_token . "\x26\157\160\x65\x6e\x69\144\x3d" . $from_user . "\x26\154\x61\x6e\147\75\x7a\x68\x5f\103\116"; goto zz5zp; AQrPZ: lCiy2: goto BGIF1; bYHLL: if (empty($profile["\x69\x64"])) { goto qFJBT; } goto aLXc_; y4_gs: load()->model("\x6d\143"); goto cfCdR; ZHvyD: } public function loadImg_QR($account, $msgtype, $model, $other_where = '') { goto qEOiP; XrLr2: UHzgC: goto ihjy1; ihvJM: if ($model == "\167\x65\151\x78\151\x6e\x5f\161\x72") { goto hd36D; } goto fRdN8; Pg3m1: v2zpO: goto d0U7s; o_bOk: mopw3: goto Ycxc3; SCLfy: if (!empty($follow["\146\157\x6c\154\157\x77\x65\x72"])) { goto fcXan; } goto Wm5sG; lyL20: $uniacid = $_W["\165\x6e\x69\x61\x63\151\x64"]; goto C18Vt; Mj5MS: $toagent = 1; goto imLwY; JD4NI: $a = 4; goto wjOr9; DsMVP: Yq17a: goto pcTTV; e39UH: if ($list["\156\x75\155"] < $commtime["\x70\162\157\x6d\157\164\145\162\143\x6f\x75\156\x74"]) { goto yHnvO; } goto kUcRG; J0zzJ: $tqmjf_qr = pdo_fetch("\x73\145\x6c\x65\143\x74\x20\52\x20\146\x72\157\155\40" . tablename("\x6d\151\150\165\x61\x5f\155\141\x6c\x6c\x5f\161\x72") . "\x20\x57\x48\105\x52\105\40\165\x6e\151\x61\x63\x69\x64\75\x3a\165\x6e\151\x61\143\x69\144\x20\141\x6e\x64\40\x66\162\157\x6d\137\165\x73\x65\x72\75\72\x66\162\x6f\155\x5f\165\163\x65\162\x20\x61\x6e\x64\x20\143\x68\x61\x6e\x6e\x65\154\x3d\x3a\x63\x68\141\156\x6e\x65\154\x20\x20\154\x69\155\151\164\x20\61", array("\72\x75\x6e\151\x61\143\x69\144" => $GLOBALS["\137\x57"]["\x75\x6e\x69\x61\x63\151\x64"], "\72\146\x72\x6f\155\x5f\165\x73\x65\162" => $this->message["\146\x72\x6f\x6d"], "\x3a\x63\x68\141\x6e\x6e\x65\x6c" => $rule["\143\x68\141\156\x6e\x65\154"])); goto U53rU; O1TgK: if (!($commtime["\160\x72\x6f\x6d\157\x74\145\x72\164\151\x6d\x65\163"] == 2)) { goto mrlQv; } goto TJIc1; q3Glo: oJMCX: goto l5odL; LQvec: $media_id = $this->uploadImage($account, $qrpic); goto LZuxY; GImMP: return $this->respText("\351\x9c\200\350\xa6\x81\xe8\264\xad\xe4\xb9\260\344\xb8\200\xe5\x8d\225\xe6\211\x8d\350\203\275\346\210\x90\344\270\xba\xe4\xbb\243\xe7\220\206\xe5\223\xa6\xef\274\x81"); goto jCUFy; XTMEC: goto mopw3; goto DsMVP; pZUaL: $a++; goto wjhaA; TtIVY: if (!empty($profile["\151\x64"])) { goto oJMCX; } goto ymNJ0; wAGWb: if (!($profile["\x66\154\141\147"] == 0 && empty($profile["\x66\x6c\x61\x67\x74\x69\155\145"]))) { goto KZTV7; } goto flZOd; t8s2C: $from_user = $this->message["\146\x72\157\155"]; goto lyL20; KlR7h: return $this->respText("\xe9\234\200\350\xa6\201\350\264\xad\xe4\271\xb0" . $commtime["\160\162\x6f\x6d\x6f\164\145\x72\x63\157\165\156\x74"] . "\345\215\225\346\211\215\350\203\xbd\346\210\220\xe4\270\272\xe4\xbb\xa3\xe7\x90\x86\xe5\x93\246\xef\274\x81"); goto XrLr2; RE8uh: $flagtime = $lastorder["\143\162\145\141\164\x65\164\x69\155\145"]; goto OPL3s; P_Im1: goto wbeWe; goto ic4Oo; OPL3s: if (!empty($flagtime)) { goto snFOv; } goto ag1cB; tXFO6: goto yx3T1; goto gsRnd; UntzC: if (!empty($qmjf_qr["\x69\x64"])) { goto R92nz; } goto oqHMv; G37Ug: pdo_insert("\155\x69\x68\x75\x61\x5f\155\141\x6c\x6c\x5f\x66\157\154\154\x6f\x77", $insert); goto P_Im1; pMoDY: goto dpiTb; goto Ob6m1; CZeqW: exit; goto nUaLq; ymNJ0: $this->autoRegedit($from_user); goto eCJC1; pm4ou: $qrpic = $this->genImage($rule["\142\147"], $qrfile, $GLOBALS["\x5f\x57"]["\165\156\x69\x61\x63\x69\x64"], $this->message["\x66\162\157\x6d"], $rule["\143\150\141\156\x6e\145\x6c"]); goto VKWAO; WvyTS: $homeurl = $GLOBALS["\x5f\x57"]["\163\x69\x74\145\x72\157\x6f\x74"] . "\141\x70\160\57\x69\156\144\x65\x78\56\160\150\160\77\151\x3d{$GLOBALS["\137\x57"]["\165\156\x69\x61\143\151\144"]}\x26\143\75\145\x6e\x74\x72\x79\46\x64\157\75\144\x65\x74\141\x69\x6c\46\x6d\75\x6d\x69\150\165\x61\137\155\141\154\154\x26\151\x64\75" . $product_result["\151\x64"] . "\46\155\x69\x64\x3d" . $profile["\151\144"]; goto o_bOk; gpaXV: if ($rule) { goto FKDUJ; } goto t_Qpn; yzx9x: if (empty($rule["\156\x6f\x74\151\x63\145"])) { goto YHALf; } goto G3_Po; XaA_g: goto nIwPe; goto pHyzk; pHyzk: JhXqJ: goto tNZnc; g6Az9: $toagent = 1; goto tXFO6; N2VMF: $a = pdo_update("\x6d\151\150\165\141\x5f\x6d\x61\x6c\154\137\161\162", array("\145\170\x70\151\x72\x65\x74\151\155\145" => TIMESTAMP + 86400 * 2, "\155\x65\x64\x69\x61\x5f\x69\x64" => $content["\155\145\144\x69\x61\x5f\151\x64"], "\161\162\x5f\165\162\x6c" => $qrpic), array("\x69\x64" => $newid)); goto qdkU0; U53rU: $newid = $tqmjf_qr["\x69\144"]; goto ihvJM; ZcRfT: goto mopw3; goto bSsd9; ve9d4: yqGWt: goto O1TgK; KJWTJ: goto UHzgC; goto XAE2C; zf2mN: if ($model == "\160\x72\157\144\165\x63\164\137\x71\x72") { goto gjL2y; } goto XEtlk; SF_re: $list = pdo_fetch("\123\105\114\105\103\x54\x9\x63\x6f\x75\x6e\x74\x28\x66\x72\157\155\137\x75\163\x65\x72\x29\x20\x61\163\x20\x6e\165\155\x20\x66\x72\157\x6d\40" . tablename("\x6d\x69\x68\x75\x61\x5f\155\x61\x6c\154\x5f\157\162\144\145\162") . "\40\x77\x68\x65\x72\x65\x20\146\162\157\x6d\x5f\x75\163\x65\162\75\40\47" . $from_user . "\40\x27\40\x61\156\x64\40\163\x74\141\x74\165\x73\x3d\x33\40\141\x6e\x64\x20\165\x6e\x69\141\x63\x69\144\x20\75\40" . $uniacid); goto NLysa; u8yKW: $qrfile = $this->getURLQR(0, $this->message["\146\162\157\x6d"], $homeurl); goto N18rp; NLysa: if ($list["\156\165\155"] < 1) { goto DeZlg; } goto g6Az9; yuZBC: load()->classs("\141\x63\143\157\x75\156\x74"); goto AmML6; t_Qpn: return $this->respText("\345\225\x86\345\xae\266\xe6\234\252\xe8\xae\xbe\347\275\256\344\xba\214\xe7\273\264\xe7\240\x81\xe7\224\x9f\xe6\x88\220"); goto xw47I; wjOr9: zWsC5: goto lQIlq; flZOd: $toagent = 0; goto a9F37; Zrhr1: pdo_update("\155\151\x68\x75\141\x5f\x6d\141\154\154\x5f\146\x6f\154\154\157\x77", array("\143\162\145\x61\x74\x65\x74\151\155\x65" => TIMESTAMP + 3), array("\x75\x6e\x69\141\x63\x69\144" => $GLOBALS["\x5f\127"]["\x75\156\x69\x61\x63\151\144"], "\x66\157\x6c\154\157\167\145\x72" => $this->message["\146\162\x6f\x6d"], "\x63\x68\141\156\x6e\x65\154" => $rule["\x63\150\141\x6e\156\x65\x6c"])); goto Jhjj1; TAAZs: $weixin_qr = $this->account->barCodeCreateFixed($barcode); goto W0ON7; Jhjj1: goto iXsqy; goto OSxhi; Ycxc3: $follow = pdo_fetch("\163\145\x6c\145\143\x74\40\x2a\x20\x66\162\x6f\155\40" . tablename("\155\151\150\165\x61\137\x6d\141\x6c\154\x5f\146\x6f\154\x6c\x6f\167") . "\x20\x57\x48\x45\122\x45\40\165\x6e\x69\141\143\151\x64\x3d\72\165\156\x69\141\143\151\x64\x20\x61\156\144\40\146\x6f\154\x6c\x6f\167\145\x72\x3d\72\146\162\x6f\155\137\x75\x73\x65\162\40\141\156\x64\x20\x63\x68\x61\156\156\145\154\x3d\x3a\x63\x68\141\x6e\x6e\x65\154\40\x6c\x69\155\x69\x74\40\x31", array("\72\165\156\x69\141\x63\151\x64" => $GLOBALS["\137\x57"]["\x75\x6e\151\141\x63\x69\x64"], "\x3a\146\162\x6f\155\x5f\x75\x73\x65\x72" => $this->message["\146\162\157\x6d"], "\x3a\143\x68\141\156\x6e\x65\154" => $rule["\143\x68\x61\x6e\x6e\145\x6c"])); goto SCLfy; OKoaq: pdo_update("\155\151\x68\165\x61\137\155\x61\x6c\x6c\x5f\155\x65\x6d\x62\145\162", array("\146\154\x61\147\164\x69\x6d\x65" => $flagtime, "\x66\x6c\141\147" => 1), array("\151\x64" => $profile["\151\x64"], "\x75\x6e\x69\141\x63\151\144" => $uniacid)); goto GTIA6; imLwY: goto Dv4kU; goto Pg3m1; rKVS2: KZTV7: goto gpaXV; tNZnc: pdo_update("\x6d\x69\150\165\x61\137\x6d\141\154\154\137\146\157\154\154\x6f\x77", array("\143\x72\x65\141\x74\145\164\151\x6d\x65" => TIMESTAMP + 6), array("\x75\156\151\x61\x63\x69\x64" => $GLOBALS["\x5f\127"]["\165\156\151\141\x63\x69\x64"], "\146\157\154\x6c\157\x77\x65\x72" => $this->message["\146\x72\x6f\155"], "\143\x68\x61\156\x6e\145\154" => $rule["\x63\150\x61\156\x6e\x65\x6c"])); goto yzx9x; W0ON7: $qrfile = "\150\x74\x74\160\163\x3a\57\x2f\x6d\x70\56\167\145\x69\170\151\156\x2e\x71\161\x2e\x63\157\155\x2f\143\147\151\x2d\142\x69\x6e\x2f\x73\x68\x6f\x77\x71\162\143\157\x64\145\77\164\151\x63\153\x65\x74\75" . $weixin_qr["\x74\151\143\x6b\145\x74"]; goto M3vie; dIyX1: VwHfb: goto t3iAk; Djd3L: I_vC1: goto SYeef; fZfvl: Fq8GP: goto pMoDY; aGpcK: yVtfB: goto IYtW7; eCJC1: $profile = pdo_fetch("\x53\x45\x4c\x45\x43\124\40\52\40\106\122\117\x4d\x20" . tablename("\x6d\x69\150\165\x61\x5f\155\x61\x6c\154\x5f\155\x65\155\142\145\162") . "\x20\x57\x48\105\122\x45\40\x20\x75\x6e\x69\141\143\x69\x64\40\75\x20\72\165\x6e\151\141\143\151\144\x20\40\101\x4e\104\x20\146\162\157\155\x5f\165\163\145\x72\x20\x3d\40\72\146\162\x6f\155\x5f\x75\163\145\162\40", array("\72\x75\x6e\151\x61\143\x69\144" => $uniacid, "\72\146\162\157\155\137\165\x73\x65\x72" => $from_user)); goto q3Glo; SYeef: $qrfile = $this->getURLQR($profile["\151\x64"], $this->message["\x66\x72\157\155"], $homeurl); goto fZfvl; wjhaA: goto yVtfB; goto svDLw; NEAKu: wbeWe: goto Ph_RN; bSsd9: gjL2y: goto CBrps; nUaLq: iXsqy: goto NEAKu; XYm_p: if (empty($qmjf_qr["\151\144"]) || empty($qmjf_qr["\161\x72\137\x75\x72\x6c"]) || empty($qmjf_qr["\155\x65\x64\151\x61\137\151\144"]) || empty($qmjf_qr["\151\x64"]) || !empty($qmjf_qr["\145\x78\x70\x69\x72\x65\x74\151\155\145"]) && $qmjf_qr["\145\x78\x70\151\x72\145\164\151\x6d\145"] < TIMESTAMP || $model == "\160\162\157\144\165\x63\x74\137\161\x72") { goto JhXqJ; } goto TNFV1; d0U7s: return $this->respText("\xe9\x9c\200\xe8\xa6\x81\350\264\xad\344\xb9\260" . $commtime["\x70\x72\x6f\155\x6f\164\x65\162\x6d\157\156\x65\x79"] . "\xe5\205\203\346\x89\215\xe8\203\275\346\210\x90\344\xb8\xba\344\xbb\243\xe7\220\x86\xe5\x93\246\xef\274\201"); goto Lg88u; Ob6m1: hd36D: goto yuZBC; jCUFy: yx3T1: goto ve9d4; XEtlk: $homeurl = $GLOBALS["\x5f\x57"]["\x73\x69\x74\145\162\157\157\x74"] . "\x61\x70\x70\57\151\156\x64\145\170\56\x70\150\160\x3f\x69\x3d{$GLOBALS["\x5f\x57"]["\165\x6e\x69\141\143\x69\144"]}\x26\143\75\145\156\x74\x72\171\x26\x64\x6f\75\154\151\163\164\x26\x6d\75\x6d\151\150\x75\141\x5f\x6d\x61\154\x6c\46\165\x6e\151\x61\143\x69\144\75" . $GLOBALS["\x5f\127"]["\x75\x6e\151\x61\143\151\x64"] . "\46\155\151\144\75" . $profile["\151\144"]; goto XTMEC; qEOiP: global $_W; goto t8s2C; bVLSJ: R92nz: goto J0zzJ; K3LyH: FKDUJ: goto nWhLg; xw47I: goto KDrtC; goto K3LyH; pcTTV: $barcode = array("\x61\143\164\151\157\x6e\137\x6e\x61\x6d\x65" => "\x51\x52\137\114\x49\115\111\124\137\x53\x43\105\116\105", "\141\143\164\x69\x6f\156\137\x69\x6e\146\x6f" => array("\x73\x63\145\x6e\145" => array("\x73\x63\145\156\145\x5f\x69\x64" => $profile["\x69\144"]))); goto ZcRfT; t62jM: dpiTb: goto R1Wdt; qjjSO: pdo_insert("\x6d\x69\x68\165\141\x5f\x6d\x61\154\154\x5f\161\162", $insert); goto bVLSJ; IYtW7: if (!($a < 3)) { goto XF5zz; } goto pm4ou; nWhLg: if ($model == "\x77\x65\151\x78\151\x6e\137\161\162") { goto Yq17a; } goto zf2mN; kUcRG: $toagent = 1; goto KJWTJ; TNFV1: return $this->respImage($qmjf_qr["\x6d\145\x64\151\141\137\151\x64"]); goto XaA_g; OSxhi: fZO63: goto CZeqW; OBKuJ: exit; goto rS0ji; ACrl2: if ($follow["\143\162\145\x61\164\145\164\x69\x6d\x65"] > TIMESTAMP) { goto fZO63; } goto Zrhr1; TW722: KDrtC: goto CmMfZ; WCQ16: GnOPS: goto v1lpa; a9F37: if (!($commtime["\160\162\x6f\155\x6f\164\145\162\164\x69\x6d\x65\x73"] == 1)) { goto VwHfb; } goto TtIVY; C18Vt: $rule = pdo_fetch("\123\x45\x4c\x45\103\x54\x20\x2a\x20\x66\162\x6f\155\40" . tablename("\155\x69\150\165\141\x5f\155\141\154\154\x5f\x63\x68\141\156\156\145\x6c") . "\40\x77\150\x65\x72\145\40\155\x73\147\x74\x79\160\145\75\72\155\x73\x67\164\x79\160\145\40\141\x6e\x64\40\151\x73\x64\145\x6c\x3d\60\40\x20\x61\156\144\40\165\x6e\x69\141\143\x69\144\x3d\x3a\165\156\151\x61\143\151\144\40{$other_where}\x20\157\x72\144\x65\162\x20\142\x79\x20\143\150\141\156\156\x65\154\40\x64\145\x73\x63", array("\x75\156\151\x61\x63\x69\144" => $uniacid, "\155\x73\147\164\171\x70\145" => $msgtype)); goto qXTjy; VKWAO: if (empty($qrpic)) { goto zWsC5; } goto JD4NI; G3_Po: $res = $this->sendcustomMsg($account, $this->message["\146\162\x6f\x6d"], $rule["\x6e\157\x74\x69\143\145"]); goto K1m52; Wm5sG: $insert = array("\165\156\x69\141\143\151\x64" => $GLOBALS["\137\127"]["\x75\x6e\151\x61\143\151\x64"], "\146\157\x6c\x6c\x6f\167\145\162" => $this->message["\x66\162\x6f\155"], "\154\145\x61\x64\145\x72" => $this->message["\146\x72\157\x6d"], "\x63\150\141\x6e\x6e\145\x6c" => $rule["\143\x68\141\156\x6e\145\154"], "\143\x72\145\x64\151\x74" => 0, "\x63\162\x65\141\164\145\164\151\155\x65" => TIMESTAMP + 3); goto G37Ug; gsRnd: DeZlg: goto GImMP; CBrps: list($a, $product_name) = explode("\x2b", $this->message["\x63\x6f\156\x74\145\x6e\164"]); goto dpD6o; t3iAk: if (!($commtime["\160\x72\157\155\x6f\164\x65\162\164\151\x6d\x65\163"] == 0)) { goto yqGWt; } goto SF_re; T1v9E: $lastorder = pdo_fetch("\123\x45\114\105\103\124\x20\x63\162\145\141\164\x65\x74\151\155\145\x20\106\122\x4f\115\40" . tablename("\x6d\x69\150\x75\x61\x5f\155\x61\154\154\137\157\162\144\145\x72") . "\x20\x57\110\x45\122\x45\x20\x73\164\141\x74\x75\163\x3d\x20\63\40\x41\x4e\104\x20\x20\x75\156\151\141\x63\151\144\40\75\x20\x3a\165\x6e\151\x61\143\151\x64\x20\x20\15\12\x9\x9\11\x9\101\116\104\x20\146\162\157\155\x5f\165\163\145\x72\x20\x3d\40\x3a\146\x72\x6f\155\137\x75\163\145\162\40\x6f\162\x64\x65\x72\x20\x62\x79\x20\143\x72\x65\141\x74\145\164\151\155\145\40\x64\145\163\143\x20\x6c\x69\155\151\164\x20\x31", array("\72\x75\x6e\x69\x61\143\151\x64" => $uniacid, "\x3a\146\162\157\155\137\x75\x73\145\x72" => $from_user)); goto wAGWb; oqHMv: $insert = array("\165\156\x69\x61\x63\x69\144" => $GLOBALS["\137\127"]["\165\156\151\x61\143\x69\x64"], "\146\162\157\155\137\x75\x73\x65\162" => $this->message["\x66\162\157\x6d"], "\143\x68\141\x6e\x6e\145\x6c" => $rule["\143\150\141\x6e\156\145\154"], "\161\162\x5f\165\x72\154" => '', "\155\x65\x64\x69\141\x5f\x69\144" => 0, "\x65\170\160\151\x72\x65\164\x69\x6d\145" => TIMESTAMP + 60 * 24 * 6, "\143\x72\x65\x61\x74\145\164\151\155\x65" => TIMESTAMP); goto qjjSO; Ph_RN: $qmjf_qr = pdo_fetch("\163\x65\154\145\x63\164\40\52\40\146\162\157\155\40" . tablename("\155\151\150\x75\141\x5f\155\x61\154\x6c\137\x71\162") . "\40\127\x48\105\x52\x45\x20\165\x6e\x69\141\143\151\x64\x3d\72\165\x6e\151\141\143\151\x64\40\141\156\144\40\146\x72\157\x6d\137\165\163\x65\x72\x3d\72\146\x72\x6f\155\137\165\x73\x65\162\x20\141\156\x64\x20\143\150\x61\x6e\156\145\x6c\x3d\72\143\150\x61\x6e\156\x65\154\x20\40\154\x69\155\151\x74\40\x31", array("\72\x75\x6e\151\x61\x63\x69\144" => $GLOBALS["\x5f\x57"]["\165\156\151\141\x63\x69\x64"], "\72\146\x72\157\x6d\x5f\165\163\x65\x72" => $this->message["\x66\x72\157\155"], "\72\143\150\x61\156\156\145\154" => $rule["\x63\x68\141\156\156\x65\154"])); goto XYm_p; AmML6: $this->account = WeAccount::create($GLOBALS["\x5f\127"]["\141\x63\x69\x64"]); goto TAAZs; K1m52: YHALf: goto UntzC; ag1cB: $flagtime = TIMESTAMP; goto hOow6; XAE2C: yHnvO: goto KlR7h; GTIA6: wjgMb: goto rKVS2; D17k4: $s = pdo_insert("\x71\x72\143\x6f\x64\145", $insert); goto t62jM; mmFZT: if (!($commtime["\160\162\x6f\155\x6f\x74\145\162\x74\151\155\145\163"] == 3)) { goto GnOPS; } goto RAG8I; lC0EE: $commtime = pdo_fetch("\x53\105\x4c\x45\x43\x54\40\160\x72\157\x6d\x6f\x74\145\x72\x63\157\x75\156\x74\54\x70\162\x6f\x6d\157\164\x65\162\x6d\157\x6e\x65\171\54\x70\162\157\x6d\x6f\164\145\x72\164\151\x6d\x65\163\x20\146\162\157\155\40" . tablename("\x6d\151\150\x75\x61\x5f\x6d\141\x6c\x6c\137\162\165\154\x65\163") . "\40\x77\150\145\x72\145\x20\165\156\x69\141\x63\151\x64\x20\x3d\x20" . $uniacid); goto T1v9E; qXTjy: $profile = pdo_fetch("\x53\105\114\x45\x43\124\x20\52\x20\x46\122\117\x4d\x20" . tablename("\155\151\150\165\x61\x5f\155\141\x6c\x6c\137\155\145\x6d\x62\x65\162") . "\x20\127\110\x45\122\x45\x20\x20\165\156\151\141\x63\x69\x64\x20\x3d\x20\x3a\x75\156\x69\141\x63\151\144\40\x20\101\116\x44\x20\146\162\x6f\155\x5f\165\x73\x65\x72\x20\x3d\40\x3a\x66\x72\x6f\x6d\137\x75\x73\x65\162\40", array("\x3a\x75\x6e\x69\141\x63\x69\x64" => $uniacid, "\x3a\146\x72\157\x6d\x5f\x75\163\145\x72" => $from_user)); goto lC0EE; lQIlq: QLE35: goto pZUaL; dpD6o: $product_result = pdo_fetch("\163\145\x6c\145\x63\x74\40\x2a\40\146\162\x6f\x6d\40" . tablename("\x6d\x69\x68\165\x61\x5f\155\x61\154\x6c\x5f\147\x6f\x6f\x64\163") . "\x20\167\150\x65\x72\145\40\165\x6e\x69\x61\x63\x69\144\x20\x3d\x20\47{$uniacid}\x27\x20\141\156\144\40\x74\151\x74\154\145\x3d\47{$product_name}\47\40"); goto WvyTS; TJIc1: $list = pdo_fetch("\x73\x65\x6c\x65\x63\x74\11\143\x6f\165\156\164\x28\x66\162\157\x6d\x5f\165\x73\x65\x72\x29\40\141\163\x20\x6e\x75\x6d\40\x66\162\157\155\40" . tablename("\155\151\x68\x75\141\137\155\x61\x6c\x6c\137\x6f\162\144\x65\162") . "\x20\167\x68\145\x72\145\40\x66\x72\x6f\155\x5f\165\163\145\x72\75\40\x27" . $from_user . "\40\x27\x20\141\x6e\144\x20\163\164\x61\x74\x75\163\x3d\63\x20\141\156\144\40\165\156\x69\141\143\x69\x64\x20\75\40" . $uniacid); goto e39UH; ihjy1: mrlQv: goto mmFZT; rS0ji: nIwPe: goto TW722; hOow6: snFOv: goto OKoaq; fRdN8: if (!empty($profile["\151\x64"])) { goto I_vC1; } goto u8yKW; M3vie: $insert = array("\x75\x6e\x69\141\143\151\144" => $GLOBALS["\137\x57"]["\x75\x6e\151\x61\x63\151\144"], "\x61\x63\x69\x64" => $GLOBALS["\137\x57"]["\x61\143\151\144"], "\161\162\143\151\x64" => $profile["\x69\144"], "\153\145\x79\167\157\162\x64" => "\155\151\150\x75\x61\x5f\x6d\141\x6c\x6c", "\156\141\155\145" => "\xe8\277\x9b\xe5\x85\xa5\xe5\205\xac\xe4\xbc\x97\345\217\267\xe4\272\x8c\xe7\273\xb4\xe7\xa0\201", "\155\x6f\144\x65\x6c" => 2, "\x74\x69\143\x6b\x65\164" => $weixin_qr["\164\x69\x63\x6b\145\164"], "\165\x72\154" => $qrfile, "\145\x78\160\151\x72\x65" => $barcode["\145\x78\160\x69\x72\145\137\x73\x65\x63\x6f\156\x64\163"], "\143\x72\145\x61\x74\145\164\151\155\145" => TIMESTAMP, "\x73\x74\141\x74\165\x73" => "\x31", "\x74\x79\160\145" => "\x73\x63\145\156\145"); goto D17k4; N18rp: goto Fq8GP; goto Djd3L; BEYNk: if ($list["\156\165\155"] < $commtime["\160\x72\x6f\155\157\x74\x65\x72\155\x6f\156\145\171"]) { goto v2zpO; } goto Mj5MS; v1lpa: if (!($toagent == 1)) { goto wjgMb; } goto RE8uh; svDLw: XF5zz: goto LQvec; Lg88u: Dv4kU: goto WCQ16; LZuxY: $content = @json_decode($media_id, true); goto N2VMF; ic4Oo: fcXan: goto ACrl2; RAG8I: $list = pdo_fetch("\x73\145\x6c\x65\143\164\11\163\165\x6d\x28\160\162\x69\x63\145\x29\x20\141\x73\40\x6e\165\x6d\40\146\162\x6f\x6d\40" . tablename("\155\x69\150\165\x61\137\155\x61\x6c\154\x5f\157\162\x64\145\162") . "\40\167\150\x65\x72\x65\40\x66\x72\157\155\x5f\x75\163\x65\162\x3d\40\x27" . $from_user . "\40\x27\x20\x61\156\144\40\163\164\141\x74\165\163\x3d\63\40\x61\156\144\x20\165\x6e\x69\141\143\151\x64\40\75\x20" . $uniacid); goto BEYNk; l5odL: $toagent = 1; goto dIyX1; R1Wdt: $a = 0; goto aGpcK; qdkU0: return $this->sendcustomIMG($account, $this->message["\x66\x72\x6f\155"], $media_id); goto OBKuJ; CmMfZ: } public function uploadImage($account, $img) { return $this->uploadRes($this->get_weixin_token(), $img, "\x69\155\x61\x67\x65"); } public function sendcustomMsg($account, $from_user, $msg) { goto gZBHi; gZBHi: $access_token = $this->get_weixin_token(); goto zWWDU; s4vjg: $msg = $this->curlPost($url, $post); goto uS1x8; LwCbG: $post = "\x7b\42\164\157\x75\x73\x65\162\x22\72\42" . $from_user . "\x22\x2c\x22\x6d\163\x67\164\171\x70\x65\42\72\42\x74\x65\x78\x74\x22\x2c\x22\164\145\x78\x74\x22\x3a\173\42\x63\x6f\156\x74\145\156\164\x22\x3a\42" . $msg . "\x22\x7d\x7d"; goto s4vjg; zWWDU: $url = "\x68\x74\164\x70\x73\72\57\57\x61\x70\151\x2e\x77\145\151\170\151\x6e\56\161\x71\56\143\x6f\x6d\x2f\x63\x67\x69\x2d\x62\x69\156\x2f\x6d\145\163\163\x61\x67\145\x2f\x63\165\x73\164\x6f\x6d\57\x73\145\156\144\77\141\x63\143\x65\x73\x73\x5f\164\x6f\153\145\156\x3d{$access_token}"; goto LwCbG; uS1x8: } public function sendcustomIMG($account, $from_user, $msg) { goto pL_eg; pL_eg: $access_token = $this->get_weixin_token(); goto s0KqJ; s0KqJ: $url = "\x68\164\x74\160\163\72\57\57\x61\160\x69\x2e\167\x65\151\x78\x69\156\56\x71\x71\56\143\x6f\x6d\x2f\x63\147\151\55\x62\151\x6e\57\x6d\145\x73\x73\141\x67\x65\x2f\x63\165\x73\164\157\x6d\x2f\x73\x65\x6e\144\x3f\141\143\143\x65\163\x73\137\x74\157\x6b\145\x6e\x3d{$access_token}"; goto cpXsj; kfnOO: $this->curlPost($url, $post); goto uPFRd; cpXsj: $post = "\173\42\x74\157\x75\163\x65\x72\x22\72\x22" . $from_user . "\42\x2c\42\155\x73\147\x74\171\x70\x65\42\72\x22\x69\155\x61\x67\x65\42\x2c\x22\x69\155\x61\147\145\42\72\x7b\x22\155\x65\x64\151\x61\137\x69\144\x22\x3a\42" . $msg . "\x22\x7d\x7d"; goto kfnOO; uPFRd: } static function getimgdir() { goto XQQPm; XQQPm: global $_W; goto YVpsv; YVpsv: $url = "\151\155\x61\x67\145\x73\x2f" . $_W["\x75\156\x69\x61\143\151\x64"] . "\57" . date("\x59") . "\x2f" . date("\155"); goto tdwBq; tdwBq: return $url; goto EZ2eG; EZ2eG: } public function getURLQR($mid, $from_user, $homeurl) { goto NGKOl; RZgCA: $value = $homeurl . "\x26\155\x69\144\75" . $mid; goto SE4lY; gV2Ym: $rand_file = $from_user . "\x2e\160\156\x67"; goto VfJNx; ttFZu: $target_file = tomedia($att_target_file); goto tpqBe; NGajp: QRcode::png($value, $target_file, $errorCorrectionLevel, $matrixPointSize); goto t3w_x; SE4lY: $errorCorrectionLevel = "\x4c"; goto M81Z7; NGKOl: include IA_ROOT . "\57\x66\162\x61\x6d\145\167\x6f\x72\x6b\57\154\x69\x62\x72\141\x72\171\57\x71\162\143\157\144\145\57\160\150\x70\161\x72\x63\157\x64\x65\x2e\160\150\x70"; goto RZgCA; VfJNx: $att_target_file = "\x71\x72\55" . $rand_file; goto pzlKB; M81Z7: $matrixPointSize = "\64"; goto gV2Ym; tpqBe: UH5ja: goto NGajp; qTLwI: ndtKk: goto ttFZu; t3w_x: return $target_file; goto uHyU2; yIK2q: goto UH5ja; goto qTLwI; RWMF2: $target_file = ATTACHMENT_ROOT . $url . $att_target_file; goto yIK2q; WduXC: if (!empty($_W["\163\x65\164\164\151\x6e\147"]["\162\x65\x6d\157\x74\x65"]["\x74\171\160\x65"])) { goto ndtKk; } goto RWMF2; pzlKB: $url = self::getimgdir(); goto WduXC; uHyU2: } private function uploadRes($access_token, $img, $type) { goto W08Ga; YgHGE: return $content["\155\x65\144\151\x61\x5f\x69\144"]; goto C235Q; AB3v0: $content = @json_decode($ret["\x63\157\156\x74\x65\156\164"], true); goto YgHGE; W08Ga: $url = "\x68\164\164\x70\x3a\x2f\x2f\x66\151\154\x65\x2e\141\x70\x69\56\x77\x65\x69\x78\x69\x6e\x2e\161\161\x2e\143\x6f\x6d\x2f\x63\x67\151\x2d\142\151\156\57\155\145\x64\x69\141\x2f\165\x70\x6c\157\x61\144\x3f\141\143\143\x65\163\x73\137\164\x6f\x6b\x65\x6e\75{$access_token}\46\x74\x79\x70\145\x3d{$type}"; goto rabhK; rabhK: $post = array("\155\x65\144\x69\x61" => "\x40" . $img); goto Hbtrj; Hbtrj: $ret = $this->http_request($url, $post); goto AB3v0; C235Q: } public static function http_request($url, $post = '', $extra = array(), $timeout = 60000) { goto vr5SL; WX1Zx: $error = curl_error($ch); goto UiPmz; O9sMd: curl_setopt($ch, CURLOPT_SSLVERSION, CURL_SSLVERSION_TLSv1); goto CJ2FK; hrv91: $fdata .= "\x43\x6f\156\x74\x65\x6e\x74\x2d\x4c\145\x6e\x67\164\150\72\x20" . strlen($body) . "\xd\xa\15\xa{$body}"; goto EFWUo; pmjbm: HgZuo: goto En1JK; UiPmz: curl_close($ch); goto t7B9w; XOCSs: message("\xe8\xaf\xb7\345\xbc\200\xe5\x90\xaf\xe6\202\250\120\x48\x50\xe7\216\xaf\xe5\242\x83\xe7\x9a\x84\x6f\x70\x65\x6e\163\163\x6c"); goto MbNm7; MbNm7: XCfbb: goto nxfeJ; En1JK: if (is_array($post)) { goto Ki0je; } goto KWqGU; TI3Zo: ytCNe: goto cYcpg; Vb1qs: if (!empty($urlset["\x70\x61\164\150"])) { goto dRJVL; } goto cFEpV; yzSNU: $body = ''; goto IPVnQ; FIkpJ: goto MvlEw; goto TI3Zo; nxfeJ: hl3yP: goto JZZBn; t7B9w: if ($errno || empty($data)) { goto pQHc9; } goto uHMGI; awBl_: $urlset = parse_url($url); goto Vb1qs; kg09D: if (!empty($urlset["\x70\157\x72\164"])) { goto AIPym; } goto NoFk4; NoFk4: $urlset["\x70\x6f\162\x74"] = $urlset["\x73\x63\150\x65\155\145"] == "\x68\164\164\160\x73" ? "\64\x34\x33" : "\70\x30"; goto Vg5Mn; MXyLt: if (!$fp) { goto IBoiq; } goto GT3uv; jMEsC: $fdata = "{$method}\40{$urlset["\160\x61\164\150"]}{$urlset["\161\165\145\162\171"]}\40\x48\x54" . "\x54\120\x2f\x31\56\x31\15\xa"; goto uqJWp; ChDmV: stream_set_blocking($fp, true); goto Wu47l; uFXkD: if (!(strexists($url, "\x68\164\164\160\163\x3a\57\x2f") && !extension_loaded("\x6f\x70\x65\x6e\163\x73\154"))) { goto hl3yP; } goto xsNYO; cNXWF: if (feof($fp)) { goto sPdk6; } goto eeHRS; l81T2: $fdata .= "\xd\12"; goto DPKRe; Uy4Mg: lXGpF: goto VYNQJ; Wu47l: stream_set_timeout($fp, $timeout); goto MXyLt; cYcpg: $fp = fsockopen("\x73\163\154\72\x2f\57" . $urlset["\x68\157\x73\x74"], $urlset["\x70\x6f\162\x74"], $errno, $error); goto Kywdc; m0QLL: G7Gk5: goto TpYmU; mZ8Ro: t_ctm: goto Liof0; oX61B: tt6Gr: goto aMEd3; DIMb2: if (empty($headers)) { goto NwLxH; } goto sshqk; TpYmU: ps97Y: goto RoXQ5; eeHRS: $content .= fgets($fp, 512); goto tkbOk; M3UDn: if ($filepost) { goto G7Gk5; } goto sd_kg; VYMlw: X9CBe: goto yzSNU; WMHRR: $status = curl_getinfo($ch); goto OmOdM; sd_kg: $post = http_build_query($post); goto m0QLL; JZZBn: if (!(function_exists("\x63\x75\162\x6c\137\151\x6e\151\164") && function_exists("\x63\x75\x72\x6c\x5f\x65\x78\145\143"))) { goto BdVKs; } goto r74JJ; xsNYO: if (extension_loaded("\x6f\x70\145\156\x73\163\154")) { goto XCfbb; } goto XOCSs; IPVnQ: if ($post) { goto HgZuo; } goto l81T2; Vg5Mn: AIPym: goto uFXkD; xHFJf: RNQyx: goto hrv91; uHMGI: load()->func("\x63\x6f\x6d\x6d\165\x6e\151\143\x61\164\x69\x6f\x6e"); goto yLszp; en4ir: NwLxH: goto Uy4Mg; YqHnN: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto u6qQb; Liof0: BdVKs: goto nJ9dM; Yyjoq: curl_setopt($ch, CURLOPT_USERAGENT, "\115\x6f\172\151\x6c\x6c\141\x2f\65\56\x30\x20\x28\x57\151\x6e\x64\x6f\167\x73\40\116\124\40\x36\56\61\73\x20\127\x4f\x57\66\x34\73\40\x72\x76\x3a\x39\56\60\56\x31\x29\x20\x47\145\143\153\x6f\57\62\60\x31\x30\60\x31\x30\x31\40\x46\151\162\145\x66\157\170\x2f\x39\56\x30\x2e\61"); goto JO5RM; yLszp: return ihttp_response_parse($data); goto z0zYa; BbEuT: curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout); goto oumA3; JO5RM: if (!(!empty($extra) && is_array($extra))) { goto lXGpF; } goto tyzHb; nJ9dM: $method = empty($post) ? "\x47\105\x54" : "\x50\117\x53\x54"; goto jMEsC; OmOdM: $errno = curl_errno($ch); goto WX1Zx; oumA3: curl_setopt($ch, CURLOPT_TIMEOUT, $timeout); goto YqHnN; RoXQ5: curl_setopt($ch, CURLOPT_POSTFIELDS, $post); goto R7NFq; mwQSn: QxzHh: goto cNXWF; JHxei: $body = http_build_query($post); goto xHFJf; dY6_M: $fdata .= "\103\x6f\x6e\156\145\143\x74\151\x6f\156\72\40\x63\x6c\157\163\145\15\xa"; goto YS_t1; Kywdc: MvlEw: goto ChDmV; WATne: curl_setopt($ch, CURLOPT_URL, $urlset["\x73\143\x68\x65\155\x65"] . "\x3a\x2f\57" . $urlset["\x68\157\x73\x74"] . ($urlset["\160\x6f\x72\164"] == "\x38\60" ? '' : "\72" . $urlset["\x70\157\x72\x74"]) . $urlset["\160\141\x74\x68"] . $urlset["\x71\165\145\162\171"]); goto eCSKz; CJ2FK: YIE23: goto Yyjoq; uVzba: return ihttp_response_parse($content, true); goto CMz4Z; Jt2q7: Lz2Io: goto dY6_M; ot3Zw: $filepost = false; goto dnPSg; u7KLz: $content = ''; goto mwQSn; u6qQb: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); goto LF1pG; UwlOC: if (!$post) { goto Xr0rx; } goto OayyQ; sshqk: curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); goto en4ir; NzS1O: $fdata .= "\x41\143\143\x65\x70\164\x2d\x45\x6e\x63\157\144\151\156\147\x3a\x20\x67\x7a\151\160\54\40\x64\145\146\x6c\141\164\x65\15\xa"; goto Jt2q7; wpFny: foreach ($extra as $opt => $value) { goto Ka27x; e2C3o: LEmqL: goto hWOhu; lBnxh: HBiEI: goto e2C3o; Kz6G3: $fdata .= "{$opt}\72\40{$value}\xd\12"; goto lBnxh; Ka27x: if (strexists($opt, "\x43\125\x52\114\117\x50\x54\137")) { goto HBiEI; } goto Kz6G3; hWOhu: } goto bxxlT; VApW7: if (!is_array($post)) { goto ps97Y; } goto ot3Zw; YS_t1: if (!(!empty($extra) && is_array($extra))) { goto X9CBe; } goto wpFny; qVV9r: if (empty($urlset["\161\x75\145\x72\x79"])) { goto a0H46; } goto uB_Al; E_3u5: $fp = fsockopen($urlset["\150\x6f\163\164"], $urlset["\160\x6f\x72\x74"], $errno, $error); goto FIkpJ; z0zYa: goto t_ctm; goto SL6I7; eCSKz: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto JYnX7; LF1pG: curl_setopt($ch, CURLOPT_SSLVERSION, 1); goto KfLzc; uB_Al: $urlset["\161\165\145\162\171"] = "\x3f{$urlset["\161\x75\145\162\x79"]}"; goto ru_yG; bbW1R: return error(1, $error); goto oX61B; R7NFq: Xr0rx: goto BbEuT; EFWUo: D5A8d: goto ObVX3; r74JJ: $ch = curl_init(); goto WATne; GT3uv: fwrite($fp, $fdata); goto u7KLz; CMz4Z: goto tt6Gr; goto bCpRo; BF4VH: sPdk6: goto GXYF8; cFEpV: $urlset["\160\141\x74\150"] = "\x2f"; goto N0Ez8; OayyQ: curl_setopt($ch, CURLOPT_POST, 1); goto VApW7; gbnRY: wQnkX: goto M3UDn; POo4X: load()->func("\143\x6f\x6d\155\165\x6e\x69\143\x61\164\x69\x6f\156"); goto uVzba; tkbOk: goto QxzHh; goto BF4VH; dnPSg: foreach ($post as $name => $value) { goto ujx9N; ujx9N: if (!(substr($value, 0, 1) == "\100")) { goto a8Vdj; } goto Rbfic; PXBv3: a8Vdj: goto mmLCj; gwH2s: goto wQnkX; goto PXBv3; vA7TI: $post[$name] = class_exists("\103\x55\122\x4c\106\151\x6c\x65", false) ? new CURLFile(substr($value, 1)) : $value; goto gwH2s; mmLCj: L2qSY: goto k4X7p; Rbfic: $filepost = true; goto vA7TI; k4X7p: } goto gbnRY; bxxlT: H05nB: goto VYMlw; ixlna: foreach ($extra as $opt => $value) { goto F3CD_; xcmix: jDWuU: goto WAjx3; oH8hx: lfFeH: goto uQFL0; uQFL0: curl_setopt($ch, $opt, $value); goto xcmix; XqyoZ: goto jDWuU; goto oH8hx; VA_DF: t9Zf9: goto DtQjc; ba8da: if (is_numeric($opt)) { goto lfFeH; } goto ZgeNp; ZgeNp: $headers[] = "{$opt}\72\40{$value}"; goto p2oaa; p2oaa: goto jDWuU; goto VA_DF; F3CD_: if (strexists($opt, "\x43\x55\x52\114\x4f\120\x54\x5f")) { goto t9Zf9; } goto ba8da; DtQjc: curl_setopt($ch, constant($opt), $value); goto XqyoZ; WAjx3: wBgue: goto HoD2N; HoD2N: } goto yZVWG; u4Kra: if (!function_exists("\147\x7a\144\145\143\x6f\x64\145")) { goto Lz2Io; } goto NzS1O; KWqGU: $body = urlencode($post); goto nLstd; nLstd: goto RNQyx; goto aC78Q; bCpRo: IBoiq: goto bbW1R; VYNQJ: $data = curl_exec($ch); goto WMHRR; ObVX3: if ($urlset["\163\143\x68\x65\155\145"] == "\150\x74\164\160\x73") { goto ytCNe; } goto E_3u5; yZVWG: UzYUZ: goto DIMb2; i7sBq: $timeout = 0 == $timeout ? 1 : $timeout; goto awBl_; vr5SL: $timeout = intval($timeout / 1000); goto i7sBq; aC78Q: Ki0je: goto JHxei; ru_yG: a0H46: goto kg09D; SL6I7: pQHc9: goto I4wrR; JYnX7: curl_setopt($ch, CURLOPT_HEADER, 1); goto UwlOC; I4wrR: return error(1, $error); goto mZ8Ro; N0Ez8: dRJVL: goto qVV9r; GXYF8: fclose($fp); goto POo4X; KfLzc: if (!defined("\103\x55\x52\114\x5f\123\x53\114\x56\105\122\x53\x49\117\116\137\124\x4c\x53\166\61")) { goto YIE23; } goto O9sMd; uqJWp: $fdata .= "\x48\x6f\163\164\x3a\40{$urlset["\x68\x6f\163\164"]}\xd\xa"; goto u4Kra; tyzHb: $headers = array(); goto ixlna; DPKRe: goto D5A8d; goto pmjbm; aMEd3: } public function curlPost($url, $data) { goto y2h6t; y2h6t: $ch = curl_init(); goto Lzoxy; A0qx8: return $info; goto UEJu9; gpJ5H: curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); goto R_sgt; e4r1y: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); goto ihPSQ; ihPSQ: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE); goto EiUHd; AcbRA: curl_close($ch); goto A0qx8; xpiKF: $info = curl_exec($ch); goto AcbRA; R_sgt: curl_setopt($ch, CURLOPT_AUTOREFERER, 1); goto XKgEo; TjMqr: curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); goto xpiKF; i055A: curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "\120\x4f\123\124"); goto e4r1y; EiUHd: curl_setopt($ch, CURLOPT_USERAGENT, "\x4d\157\172\x69\x6c\x6c\141\x2f\65\56\60\40\50\x63\x6f\155\x70\x61\164\x69\x62\154\145\x3b\40\x4d\x53\111\x45\40\x35\x2e\x30\61\x3b\40\127\151\x6e\144\x6f\x77\163\40\116\124\40\65\x2e\x30\x29"); goto gpJ5H; Lzoxy: curl_setopt($ch, CURLOPT_URL, $url); goto i055A; XKgEo: curl_setopt($ch, CURLOPT_POSTFIELDS, $data); goto TjMqr; UEJu9: } private function genImage($bg, $qr_file, $uniacid, $from_user, $channel) { goto WHO0w; UyTqx: return $qr_adv; goto SyTqC; SyTqC: WMN8r: goto Ui_2r; WHO0w: global $_W; goto cj7HZ; zwy91: $qr_adv = Qr_code::qrcode_adv($_W["\x61\164\x74\141\x63\x68\x75\162\x6c"], $uniacid, $from_user, $bg, $qr_file, $channel); goto UyTqx; cj7HZ: if (!$channel) { goto WMN8r; } goto zwy91; Ui_2r: } public function get_weixin_token() { goto aqQgB; ttYZN: load()->classs("\x61\143\143\x6f\165\x6e\x74"); goto eMnNC; Z7pHL: $access_token = $accObj->fetch_token(); goto fv0B3; aqQgB: global $_W; goto ttYZN; fv0B3: return $access_token; goto VMI6Q; eMnNC: $accObj = WeixinAccount::create($_W["\x61\x63\151\x64"]); goto Z7pHL; VMI6Q: } public function getProfile($from_user = '') { goto xzb60; ROYcJ: gFwAN: goto XRO2_; X9CsI: pdo_insert("\155\x63\137\x6d\x61\160\x70\x69\156\x67\137\x66\x61\x6e\x73", $row2); goto tTS8K; Gj59q: if (!(!empty($profile["\x69\144"]) && !empty($from_user))) { goto XzEz8; } goto kdnBB; ttHmF: $uid = pdo_insertid(); goto Ft5IL; m3XfA: YD85s: goto zpC9h; xcrRz: if (!($profile["\146\x6c\x61\x67"] == 1 && ($profile["\146\154\x61\x67\x74\151\x6d\145"] == 0 || empty($profile["\x66\x6c\141\x67\x74\151\x6d\145"])) && !empty($profile["\151\x64"]))) { goto lhO2Z; } goto gIEU8; kccKQ: pdo_update("\155\x63\x5f\155\x61\x70\160\151\156\147\x5f\x66\x61\156\x73", array("\x75\151\144" => $uid), array("\157\160\x65\156\151\x64" => $from_user, "\x75\x6e\x69\141\143\151\x64" => $_W["\x75\156\151\141\143\151\x64"])); goto Z2nPf; Oz1d6: logging_run("\75\75\75\x3d\75\75\x3d\x3d\x3d\x3d\x3d\75\75\x3d\75\75\75\x3d\75\x3d\x3d\75\40\44\160\162\x6f\x66\x69\x6c\x65\137\x69\144\75\x3d\x3d\x3d\x3d\x3d\x3d\x3d\75\x3d\75\75\x3d\x3d\x3d\x3d\75" . $profile["\x69\x64"]); goto Gj59q; n0AIl: $checkdelfansid = pdo_fetchall("\x53\105\114\105\x43\x54\40\146\x61\x6e\x69\x64\x20\106\x52\x4f\x4d\40" . tablename("\x6d\143\x5f\155\141\160\160\x69\x6e\147\137\146\x61\x6e\x73") . "\x20\127\110\105\122\105\40\x75\x6e\151\x61\143\151\144\x20\75\40\x3a\x75\156\x69\x61\x63\151\144\x20\x41\x4e\x44\x20\157\x70\145\156\151\144\40\x3d\x20\72\146\x72\157\x6d\x5f\165\163\145\162\40\x6f\x72\x64\x65\x72\40\x62\171\40\146\141\156\x69\x64\x20", array("\x3a\x75\156\x69\141\x63\x69\144" => $_W["\165\156\151\141\x63\x69\144"], "\x3a\146\162\157\x6d\x5f\x75\163\145\x72" => $from_user)); goto NTdwl; Ft5IL: $row2 = array("\x75\x69\x64" => $uid, "\x6f\x70\145\156\x69\144" => $from_user, "\x75\x6e\x69\141\x63\151\x64" => $_W["\165\x6e\x69\141\x63\151\x64"], "\141\143\x69\x64" => $_W["\x61\x63\x69\144"], "\x6e\x69\x63\153\x6e\141\155\x65" => $profile["\x72\145\x61\x6c\156\x61\155\x65"], "\x73\141\x6c\164" => $row["\x73\141\x6c\x74"]); goto X9CsI; DWRMw: if (!($fansscount > 1)) { goto PZnm2; } goto n0AIl; nKkvW: PZnm2: goto YcXo5; pICeT: if (!($a < $fansscount)) { goto lXazj; } goto Ji0yu; zpC9h: $a++; goto W1CuL; Nnszm: XzEz8: goto qutpk; uW1l1: pdo_insert("\155\x63\137\x6d\x65\x6d\142\145\162\163", $row); goto OA4cj; ifCy3: lhO2Z: goto Oz1d6; s4MmI: pdo_insert("\155\143\137\x6d\x65\155\x62\x65\162\163", $row); goto ttHmF; nkN8a: if (!empty($from_user)) { goto gFwAN; } goto W5urf; zWINK: if (!(!empty($profile["\x69\144"]) && empty($_COOKIE["\x6d\x69\x64\x5f" . mihua_mall_VERSION . $_W["\165\156\x69\141\143\151\144"]]))) { goto mAMh3; } goto AwtBt; YcXo5: $myfans = pdo_fetch("\x53\x45\x4c\105\x43\124\x20\x2a\40\x46\x52\117\115\40" . tablename("\x6d\x63\137\x6d\x61\160\x70\x69\x6e\x67\x5f\x66\x61\x6e\163") . "\40\x57\x48\x45\122\x45\x20\40\x75\156\151\x61\x63\151\144\x20\75\x20\72\x75\x6e\151\141\x63\x69\144\40\40\x41\116\104\x20\x6f\x70\x65\x6e\x69\x64\x20\75\40\72\146\162\x6f\x6d\x5f\165\163\x65\x72", array("\72\x75\156\151\x61\x63\x69\x64" => $_W["\x75\156\x69\x61\x63\x69\144"], "\72\146\162\157\x6d\x5f\x75\163\x65\x72" => $from_user)); goto udxdF; xzb60: global $_W, $_GPC; goto nkN8a; OA4cj: $uid = pdo_insertid(); goto kccKQ; XRO2_: $profile = pdo_fetch("\x53\x45\x4c\105\x43\124\x20\52\40\x46\x52\x4f\115\40" . tablename("\x6d\151\150\x75\x61\137\155\x61\154\x6c\x5f\155\x65\x6d\142\145\x72") . "\x20\x57\110\x45\122\x45\40\40\x75\156\x69\x61\143\151\144\40\75\x20\x3a\x75\156\x69\141\143\x69\144\x20\40\101\116\x44\x20\x66\x72\x6f\x6d\x5f\165\x73\145\162\x20\x3d\40\72\146\x72\157\155\137\165\163\x65\162", array("\x3a\x75\x6e\151\141\x63\x69\144" => $_W["\165\x6e\x69\x61\143\151\x64"], "\72\146\x72\x6f\x6d\x5f\165\163\x65\162" => $from_user)); goto h4jCS; NaM0W: $row = array("\165\x6e\151\x61\x63\151\144" => $_W["\165\156\x69\x61\143\x69\x64"], "\156\151\x63\x6b\x6e\141\155\x65" => $profile["\x72\x65\141\154\x6e\x61\x6d\x65"], "\162\145\x61\154\x6e\141\155\x65" => $profile["\x72\145\x61\x6c\x6e\141\x6d\145"], "\147\x65\x6e\144\145\x72" => 0, "\x73\141\154\164" => random(8), "\x63\x72\145\x61\x74\x65\164\151\x6d\x65" => TIMESTAMP, "\145\155\141\151\x6c" => time() . random(8) . "\100\167\145\x37\x2e\x63\x63", "\160\x61\x73\163\x77\x6f\162\144" => random(8)); goto uW1l1; J7UmC: $row = array("\165\x6e\151\x61\143\151\144" => $_W["\x75\156\151\141\143\x69\x64"], "\x6e\x69\143\x6b\156\141\x6d\x65" => $profile["\x72\145\x61\x6c\x6e\141\x6d\145"], "\162\145\x61\x6c\156\x61\155\x65" => $profile["\162\x65\x61\154\x6e\x61\x6d\x65"], "\147\x65\156\144\x65\162" => 0, "\163\x61\x6c\164" => random(8), "\143\x72\x65\141\x74\x65\164\x69\x6d\x65" => TIMESTAMP, "\145\155\x61\151\x6c" => time() . random(8) . "\x40\167\x65\67\56\143\x63", "\x70\141\163\x73\167\x6f\x72\144" => random(8)); goto s4MmI; qutpk: return $profile; goto SUEW5; HocCh: if ($myfans) { goto GDmRD; } goto J7UmC; Ji0yu: pdo_delete("\155\x63\x5f\x6d\141\160\160\151\156\x67\x5f\146\141\x6e\163", array("\x66\x61\x6e\x69\x64" => $checkdelfansid[$a]["\146\x61\156\151\144"])); goto m3XfA; kdnBB: $fansscount = pdo_fetchcolumn("\x53\x45\114\x45\x43\124\40\x63\x6f\x75\156\x74\50\146\x61\x6e\151\144\x29\x20\x46\122\117\x4d\x20" . tablename("\x6d\x63\137\x6d\141\x70\160\x69\x6e\x67\x5f\146\x61\x6e\163") . "\x20\x57\x48\x45\122\x45\40\165\x6e\151\x61\x63\x69\x64\x20\x3d\x20\72\x75\x6e\x69\x61\x63\x69\144\x20\101\116\104\40\157\160\x65\x6e\x69\x64\x20\x3d\40\72\x66\162\x6f\155\137\x75\x73\x65\x72", array("\72\x75\x6e\151\x61\143\151\144" => $_W["\x75\156\x69\141\143\x69\144"], "\72\x66\162\x6f\x6d\137\x75\163\145\x72" => $from_user)); goto DWRMw; ezoIR: logging_run($profile); goto zWINK; zinQu: mO62b: goto pICeT; gIEU8: pdo_update("\x6d\151\x68\x75\141\137\155\141\154\x6c\137\x6d\145\155\x62\x65\162", array("\146\x6c\x61\147\x74\151\x6d\x65" => TIMESTAMP), array("\x69\144" => $profile["\x69\144"])); goto ifCy3; oV82O: mAMh3: goto xcrRz; W1CuL: goto mO62b; goto eJOK5; NTdwl: $a = 1; goto zinQu; Z2nPf: jTtZZ: goto HocCh; h4jCS: logging_run("\75\x3d\75\75\75\75\x3d\x3d\75\x3d\x3d\75\x3d\75\x3d\x3d\75\75\x3d\75\75\75\x20\44\x70\162\157\x66\x69\154\x65\x3d\x3d\75\75\75\75\x3d\x3d\x3d\x3d\75\x3d\75\x3d\x3d\x3d\75"); goto ezoIR; tTS8K: GDmRD: goto Nnszm; eJOK5: lXazj: goto nKkvW; W5urf: $from_user = $this->getFromUser(); goto ROYcJ; udxdF: if (!(empty($myfans["\x75\151\144"]) && $from_user && $myfans["\146\x61\156\151\144"])) { goto jTtZZ; } goto NaM0W; AwtBt: setcookie("\155\x69\x64\137" . mihua_mall_VERSION . $_W["\165\156\151\141\143\x69\x64"], $profile["\x69\144"], time() + 3600); goto oV82O; SUEW5: } public function procredit($from_user, $flag = "\x30") { goto oNite; MNALx: $theone = pdo_fetch("\123\x45\x4c\105\x43\x54\x20\x2a\40\x46\122\x4f\115\40" . tablename("\x6d\151\150\x75\141\x5f\x6d\x61\154\x6c\137\162\x75\x6c\x65\x73") . "\40\127\x48\x45\122\x45\x20\x20\x75\x6e\x69\141\x63\x69\144\40\x3d\40\72\165\x6e\151\x61\143\x69\x64", array("\x3a\165\x6e\x69\x61\143\x69\144" => $_W["\x75\x6e\x69\x61\x63\151\x64"])); goto jlSa2; ddf0K: return $theone["\x63\x6c\151\x63\153\x63\x72\145\144\x69\x74"]; goto qtE1i; htNty: return 0; goto bJAbX; Q6m7X: return 0; goto vArbR; qtE1i: IiXJc: goto l5U2L; jlSa2: if (!(!empty($theone["\x63\154\151\x63\153\x63\162\x65\144\x69\164"]) && $theone["\x63\154\x69\143\153\143\x72\x65\x64\151\x74"] > 0)) { goto YW_Nq; } goto IkfIs; oNite: global $_W; goto sc414; dySqg: pdo_query("\x75\x70\x64\x61\x74\145\40" . tablename("\155\143\137\x6d\145\155\142\x65\162\x73") . "\40\x53\x45\124\40\x63\x72\145\144\151\164\61\x3d\x63\162\x65\x64\x69\164\x31\53\x27" . $theone["\143\154\151\143\153\143\162\x65\144\x69\164"] . "\x27\40\x57\x48\105\x52\x45\40\165\151\144\75{$fans["\x75\151\144"]}\40"); goto os5Ob; pN0oE: $credit = mc_credit_fetch($fans["\x75\x69\144"]); goto KxA3X; KxA3X: $nowcredit = $credit["\x63\162\x65\144\x69\x74\x31"] + $theone["\143\x6c\x69\143\x6b\x63\162\x65\144\x69\x74"]; goto dySqg; os5Ob: $paylog = array("\x74\x79\160\x65" => "\162\x65\x74\x75\x72\156", "\165\x6e\151\141\x63\151\144" => $_W["\x75\156\151\141\143\151\x64"], "\x6f\160\145\156\x69\144" => $from_user, "\164\151\144" => date("\131\x2d\155\x2d\144\40\110\x3a\x69\x3a\x73"), "\146\x65\x65" => $nowcredit, "\x6d\157\x64\165\x6c\x65" => "\155\151\x68\x75\x61\137\155\141\x6c\x6c", "\x74\x61\x67" => "\x20\345\205\263\346\xb3\250\xe8\xb5\xa0\351\x80\201" . $theone["\x63\154\x69\143\x6b\143\162\145\144\151\164"] . "\xe7\247\257\xe5\x88\206", "\145\x6e\x63\162\171\160\164\137\x63\x6f\x64\145" => "\xe5\x85\263\xe6\xb3\xa8\350\265\xa0\351\x80\x81"); goto Z1bB1; IkfIs: $fans = pdo_fetch("\x53\105\114\105\103\x54\x20\x2a\40\x46\122\117\115\x20" . tablename("\x6d\x63\137\x6d\x61\x70\x70\151\156\147\137\x66\141\x6e\x73") . "\40\127\110\x45\122\x45\x20\x20\165\156\x69\x61\143\x69\144\x20\75\40\72\165\x6e\151\x61\x63\x69\x64\x20\x61\156\144\x20\157\x70\145\x6e\x69\x64\75\x3a\x66\x72\157\x6d\137\165\x73\x65\162", array("\72\165\156\x69\141\143\x69\144" => $_W["\165\x6e\151\141\x63\151\144"], "\72\146\162\157\155\x5f\165\163\x65\162" => $from_user)); goto UKz6x; UKz6x: if (empty($fans)) { goto IiXJc; } goto rLtc7; vFynk: $m = pdo_fetch("\x53\x45\114\x45\x43\124\x20\151\x64\x2c\x63\162\x65\x69\x64\151\x74\x5f\x66\x6c\141\x67\40\106\x52\117\115\x20" . tablename("\x6d\x69\x68\165\x61\137\155\141\154\x6c\x5f\x6d\x65\x6d\142\x65\162") . "\x20\127\110\x45\x52\x45\x20\40\x75\x6e\x69\141\x63\x69\144\x20\75\x20\72\165\x6e\x69\141\x63\151\x64\40\141\x6e\144\40\x66\162\x6f\155\137\x75\163\145\162\x3d\x3a\146\x72\x6f\155\137\165\x73\145\x72", array("\72\165\156\x69\x61\143\151\x64" => $_W["\x75\x6e\151\x61\x63\151\x64"], "\72\x66\162\x6f\155\137\165\163\x65\162" => $from_user)); goto VJg_u; vArbR: x7giz: goto Zezg1; sc414: if (!($flag == "\x31")) { goto TqI_3; } goto vFynk; rLtc7: load()->model("\x6d\143"); goto pN0oE; rwbUQ: pdo_update("\x6d\151\150\x75\x61\137\x6d\141\x6c\154\x5f\x6d\x65\x6d\x62\x65\x72", array("\x63\x72\x65\x69\144\151\x74\137\146\154\x61\147" => 1), array("\165\156\x69\x61\x63\151\x64" => $_W["\x75\156\151\141\143\x69\x64"], "\146\x72\x6f\x6d\137\x75\163\145\162" => $from_user)); goto ddf0K; VJg_u: if (!($m["\x63\162\x65\x69\144\x69\164\137\146\154\x61\147"] > 0)) { goto x7giz; } goto Q6m7X; Zezg1: TqI_3: goto MNALx; Z1bB1: pdo_insert("\x63\157\162\145\x5f\x70\x61\171\154\157\147", $paylog); goto rwbUQ; l5U2L: YW_Nq: goto htNty; bJAbX: } }